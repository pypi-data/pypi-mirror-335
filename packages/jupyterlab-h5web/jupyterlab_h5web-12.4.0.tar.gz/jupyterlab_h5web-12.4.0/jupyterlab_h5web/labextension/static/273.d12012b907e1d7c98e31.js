"use strict";(self.webpackChunkjupyterlab_h5web=self.webpackChunkjupyterlab_h5web||[]).push([[273,338],{2273:(e,t,n)=>{n.r(t),n.d(t,{default:()=>C});var r={};n.r(r),n.d(r,{default:()=>j});var a=n(358),i=n(4643),o=n(4120),c=n(8397),s=n(8693),d=n(240),l=n(4178),u=n(7262),m=n(5197);const p=new u.Token("@jupyterlab/application:ILayoutRestorer","A service providing application layout restoration functionality. Use this to have your activities restored across page loads.");var y;!function(e){function t(n){return n&&n.type?"tab-area"===n.type?{type:"tab-area",currentIndex:n.currentIndex,widgets:n.widgets.map((t=>e.nameProperty.get(t))).filter((e=>!!e))}:{type:"split-area",orientation:n.orientation,sizes:n.sizes,children:n.children.map(t).filter((e=>!!e))}:null}function n(e,t){if(!e)return null;const r=e.type||"unknown";if("unknown"===r||"tab-area"!==r&&"split-area"!==r)return console.warn(`Attempted to deserialize unknown type: ${r}`),null;if("tab-area"===r){const{currentIndex:n,widgets:r}=e,a={type:"tab-area",currentIndex:n||0,widgets:r&&r.map((e=>t.get(e))).filter((e=>!!e))||[]};return a.currentIndex>a.widgets.length-1&&(a.currentIndex=0),a}const{orientation:a,sizes:i,children:o}=e;return{type:"split-area",orientation:a,sizes:i||[],children:o&&o.map((e=>n(e,t))).filter((e=>!!e))||[]}}e.nameProperty=new m.AttachedProperty({name:"name",create:e=>""}),e.serializeMain=function(n){const r={dock:n&&n.dock&&t(n.dock.main)||null};if(n&&n.currentWidget){const t=e.nameProperty.get(n.currentWidget);t&&(r.current=t)}return r},e.deserializeMain=function(e,t){if(!e)return null;const r=e.current||null,a=e.dock||null;return{currentWidget:r&&t.has(r)&&t.get(r)||null,dock:a?{main:n(a,t)}:null}}}(y||(y={}));const f=new u.Token("@jupyterlab/application:IMimeDocumentTracker","A widget tracker for documents rendered using a mime renderer extension. Use this if you want to list and interact with documents rendered by such extensions.");var h;!function(e){e.factoryNameProperty=new m.AttachedProperty({name:"factoryName",create:()=>{}})}(h||(h={}));var g=n(4979);const v=new l.LabIcon({name:"hdf5-icon",svgstr:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">\n <defs>\n  <linearGradient id="BlueGreen" x2="0" y1="20" y2="180" gradientTransform="matrix(.032652 0 0 .032652 -.16134 3.4472)" gradientUnits="userSpaceOnUse">\n   <stop stop-color="#0515fe" offset="0"/>\n   <stop stop-color="#2cab28" offset="1"/>\n  </linearGradient>\n </defs>\n <path d="m5.2622 3.5865a0.78373 0.78373 0 0 0-0.77185 0.79475v2.7847h-2.9229v-2.7738a0.78373 0.78373 0 0 0-0.79545-0.79475 0.78373 0.78373 0 0 0-0.77185 0.79475v7.1622a0.78373 0.78373 0 1 0 1.5673 0v-2.8211h4.4902v-3.5327c2.3805 0.22492 3.3059 1.5899 3.2949 2.8309-0.012074 1.3686-1.1541 2.8626-4.1233 2.7672a0.78373 0.78373 0 1 0-0.050317 1.5665c2.1801 0.07003 3.8328-0.70129 4.7927-1.8367v1.0903a0.78373 0.78373 0 1 0 1.5673 0v-2.8462h2.6107a0.78373 0.78373 0 1 0 0-1.5673h-2.6107v-2.0404h3.6663a0.78373 0.78373 0 1 0 0-1.5673h-9.8031a0.78373 0.78373 0 0 0-0.13992-0.011092z" fill="url(#BlueGreen)" stroke-width=".032652"/>\n</svg>\n'}),w=new l.LabIcon({name:"h5web-icon",svgstr:'<?xml version="1.0" encoding="UTF-8"?>\n<svg version="1.1" viewBox="0 0 192 192" xmlns="http://www.w3.org/2000/svg">\n <path class="h5web-icon" fill="#5500aa" d="m13.774 190.86c-5.2034-1.383-11.266-7.7278-12.655-13.244-1.5699-6.2347-1.5699-156.88 0-163.12 1.493-5.9294 7.3929-11.829 13.322-13.322 6.2347-1.5699 156.88-1.5699 163.12 0 5.9294 1.493 11.829 7.3929 13.322 13.322 1.5699 6.2347 1.5699 156.88 0 163.12-1.493 5.9294-7.3929 11.829-13.322 13.322-5.7714 1.4532-158.3 1.3806-163.78-0.078zm90.226-42.803v-8l-8.75-0.0137c-13.925-0.0217-13.138 0.69903-13.468-12.345l-0.28174-11.142h-11.5c-6.325 0-12.288 0.32338-13.25 0.71862-1.5561 0.63898-1.75 2.3678-1.75 15.602 0 13.801 0.1645 15.128 2.2612 18.239 1.2437 1.8455 3.3812 3.6672 4.75 4.0482 1.3688 0.38101 11.376 0.73761 22.239 0.79243l19.75 0.0997zm28.035 5.5c4.5796-4.0878 4.9646-6.7681 4.9646-34.564 0-35.16 0.58689-34.289-23.75-35.259l-14.25-0.56778v16.786l10.5 0.60452 0.26598 27.843 0.26599 27.843 9.8814-0.34321c8.1583-0.28336 10.272-0.69198 12.122-2.3432zm-39.535-62v-8l-8-1-0.5374-46.72-10.969 0.37544c-16.388 0.56092-15.431-1.2993-15.754 30.621-0.19704 19.438 0.0537 26.335 1.0261 28.224 2.0026 3.8907 6.7345 4.9397 21.235 4.7079l13-0.20788zm43.5-36.477c1.1477-0.72437 1.5-3.0106 1.5-9.7347v-8.788l-47.5-0.5362v20.036l22.25-0.01531c12.246-0.0084 22.924-0.44099 23.75-0.96202z"/>\n</svg>\n'}),b={name:"hdf5file",icon:v,displayName:"HDF5 File",extensions:[".cxi",".hdf",".hdf5",".h5",".nexus",".nx",".nx5",".nxs",".nc",".nc4",".loom"],mimeTypes:["application/x-hdf5"],fileFormat:"base64"};var x=n(3345),F=n.n(x),T=n(9847),k=n(6916);const P=function(e){const{filePath:t}=e,{baseUrl:n,token:r}=k.ServerConnection.makeSettings(),a=(0,x.useMemo)((()=>({params:{file:t},headers:r?{Authorization:`token ${r}`}:{}})),[t,r]);return F().createElement("div",{className:"h5web-root"},F().createElement(T.H5GroveProvider,{url:`${n.endsWith("/")?n.slice(0,-1):n}/h5web`,filepath:t,axiosConfig:a},F().createElement(T.App,{getFeedbackURL:e=>(0,T.getFeedbackMailto)(e,"h5web@esrf.fr"),disableDarkMode:!0})))};class I extends o.ReactWidget{constructor(e){super(),this.addClass("jp-ReactWidget"),this.filePath=e,this.title.icon=w}render(){return F().createElement(P,{filePath:this.filePath})}}c.ABCWidgetFactory;const R="h5web-open";var W=n(5256),z=n(5338),E=n(5849);const M=function(e){const{path:t}=e,[n,r]=(0,E.useMeasure)();return F().createElement("div",{ref:r,className:"h5web-in-cell"},n&&n.width>0&&F().createElement(P,{filePath:t}))};class A extends W.Widget{constructor(e){super(),this.mimeType=e.mimeType}renderModel(e){const t=e.data[this.mimeType];if("string"!=typeof t)throw new TypeError("Expected string");return(0,z.H)(this.node).render(F().createElement(M,{path:t})),Promise.resolve()}}const j={id:"jupyter-h5web:mime-plugin",rendererFactory:{safe:!0,mimeTypes:b.mimeTypes,createRenderer:e=>new A(e)},rank:0,dataType:"string"},C={id:"jupyterlab-h5web",autoStart:!0,requires:[i.IDefaultFileBrowser,s.IRenderMimeRegistry,a.IDocumentManager],activate:(e,t,n,a)=>{console.log("JupyterLab extension jupyterlab-h5web is activated!"),e.docRegistry.addFileType(b);const[i]=function(e){const t=[],n=new o.WidgetTracker({namespace:"application-mimedocuments"});return e.forEach((e=>{let r=e.default;e.hasOwnProperty("__esModule")||(r=e),Array.isArray(r)||(r=[r]),r.forEach((e=>{t.push(function(e,t){return{id:t.id,description:t.description,requires:[s.IRenderMimeRegistry,d.ITranslator],autoStart:!0,activate:(n,r,a)=>{if(void 0!==t.rank?r.addFactory(t.rendererFactory,t.rank):r.addFactory(t.rendererFactory),!t.documentWidgetFactoryOptions)return;const i=n.docRegistry;let o=[];o=Array.isArray(t.documentWidgetFactoryOptions)?t.documentWidgetFactoryOptions:[t.documentWidgetFactoryOptions],t.fileTypes&&t.fileTypes.forEach((e=>{e.icon&&(e={...e,icon:l.LabIcon.resolve({icon:e.icon})}),n.docRegistry.addFileType(e)})),o.forEach((n=>{const o=n.toolbarFactory?e=>n.toolbarFactory(e.content.renderer):void 0,s=new c.MimeDocumentFactory({renderTimeout:t.renderTimeout,dataType:t.dataType,rendermime:r,modelName:n.modelName,name:n.name,primaryFileType:i.getFileType(n.primaryFileType),fileTypes:n.fileTypes,defaultFor:n.defaultFor,defaultRendered:n.defaultRendered,toolbarFactory:o,translator:a,factory:t.rendererFactory});i.addWidgetFactory(s),s.widgetCreated.connect(((t,n)=>{h.factoryNameProperty.set(n,s.name),n.context.pathChanged.connect((()=>{e.save(n)})),e.add(n)}))}))}}}(n,e))}))})),t.push({id:"@jupyterlab/application:mimedocument",description:"Provides a mime document widget tracker.",optional:[p],provides:f,autoStart:!0,activate:(e,t)=>(t&&t.restore(n,{command:"docmanager:open",args:e=>({path:e.context.path,factory:h.factoryNameProperty.get(e)}),name:e=>`${e.context.path}:${h.factoryNameProperty.get(e)}`}),n)}),t}([r]);e.registerPlugin(i),i.activate(e,n),function(e,t,n){const{commands:r}=e;r.addCommand(R,{label:"View HDF5 file contents",caption:"Explore and visualize the contents of the HDF5 file",icon:w,execute:()=>{const n=t.selectedItems().next(),r=n.value.path,a=r.startsWith("RTC:")?r.slice(4,r.length):r,i=new I(a),c=new o.MainAreaWidget({content:i});c.title.label=n.value.name,e.shell.add(c,"main")}}),function(e,t){const{commands:n}=e,r=t.open;t.open=(e,a="default",i,o)=>{if(!b.extensions.includes(g.PathExt.extname(e)))return r.call(t,e,a,i,o);n.execute(R)}}(e,n),e.contextMenu.addItem({command:R,selector:`.jp-DirListing-item[data-file-type="${b.name}"]`,rank:0})}(e,t,a)}}},5338:(e,t,n)=>{var r=n(7628);t.H=r.createRoot,r.hydrateRoot}}]);