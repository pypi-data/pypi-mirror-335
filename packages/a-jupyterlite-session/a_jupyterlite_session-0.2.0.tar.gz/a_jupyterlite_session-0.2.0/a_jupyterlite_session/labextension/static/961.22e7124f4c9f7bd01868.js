"use strict";(self.webpackChunka_jupyterlite_session=self.webpackChunka_jupyterlite_session||[]).push([[961],{961:(e,t,i)=>{i.r(t),i.d(t,{IJupyterLiteSession:()=>n,default:()=>r});var s=i(979),a=i(916),o=i(347);const n=new(i(262).Token)("a-jupyterlite-session:IJupyterLiteSession"),r={id:"a-jupyterlite-session:plugin",autoStart:!0,provides:n,requires:[a.IDefaultDrive],activate:async(e,t)=>{const i=".sessions",a="README.md",n="requirements.txt",r=t;await r.ready,console.log("JupyterLite extension a-jupyterlite-session is activated!");const c=r._storage,l=new Date;await c.getItem(i)||await c.setItem(i,{name:i,path:i,last_modified:l.toISOString(),created:l.toISOString(),format:"json",mimetype:"",content:null,size:0,writable:!0,type:"directory"});const p=l.toLocaleDateString("en-us",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h24"}).replace(/\//g,"-").replace(/:/g,"-").replace(", ","-"),u=(0,o.v4)().slice(0,8),d=s.PathExt.join(i,`${p}-${u}`);await c.setItem(d,{name:s.PathExt.basename(d),path:d,last_modified:l.toISOString(),created:l.toISOString(),format:"json",mimetype:"",content:null,size:0,writable:!0,type:"directory"});const y=new URL(window.location.href);return null!==y.searchParams.get("repo")&&(y.searchParams.set("uploadpath",d),window.history.replaceState(null,"",y)),r.copy(a,d).catch((e=>console.warn(`Failed to copy the ${a} file to the new session: ${e}`))),r.copy(n,d).catch((e=>console.warn(`Failed to copy the ${n} file to the new session: ${e}`))),{sessionPath:d}}}}}]);