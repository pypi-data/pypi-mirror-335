function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["./WdsDropdownMenu-Cxc0Dcti.js","./index-B-FeWsn1.js","./index-DJXKEzhd.css","./WdsDropdownMenu-2tTk3P_q.css","./BuilderEmbeddedCodeEditor-B95MXBmu.js","./BuilderEmbeddedCodeEditor-DiDqfWdt.css","./BuilderSettings-hpW8Ubel.js","./instancePath-BsbOTTI8.js","./marked.esm-273vDTCT.js","./BuilderSettings-C5fn5ktN.css","./BuilderSidebar-CV8K_91y.js","./BuilderSidebar-BDpKaarp.css","./ComponentRenderer-BTYIS9kW.js","./ComponentRenderer-CT0sUztE.css","./BuilderInstanceTracker-BK_sYiLI.js","./BuilderInstanceTracker-BECcXNnW.css","./BuilderInsertionOverlay-ClGgbBc8.js","./BuilderInsertionOverlay-D2XS0ij9.css","./BuilderInsertionLabel-BznXQA85.js","./BuilderInsertionLabel-_YS5WPfq.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{d as R,i as q,a as Z,r as W,c as k,o as v,e as w,f as r,s as A,z as V,_ as M,L as Nt,b as F,M as b,t as P,N as B,n as E,q as I,W as Q,D as ce,x as z,y as de,T as xt,O as Le,P as Ve,j as Se,l as Ae,Q as nt,m as Ue,v as ot,E as Ne,G as he,R as zt,S as be,w as ve,U as lt,V as ut,X as J,Y as Me,Z as pe,$ as ke,a0 as Ye,a1 as Ht,a2 as jt,a3 as ct,a4 as Kt,a5 as qt,a6 as Zt,a7 as Ce,a8 as Gt,a9 as ae,K as re,aa as Xt,ab as St,ac as Yt,ad as dt,ae as Jt,af as Qt,ag as en,ah as tn,ai as nn,aj as on,ak as ln,al as sn,am as an,A as rn,an as un,ao as cn,ap as ft}from"./index-B-FeWsn1.js";import{marked as dn}from"./marked.esm-273vDTCT.js";const fn="data:image/svg+xml,%3csvg%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20width='48'%20height='48'%20rx='24'%20fill='black'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M34.0187%2028.9434L37.2255%2015.7128H32.7659L30.812%2015.7128L34.0187%2028.9434Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M25.4266%2015.7128H20.967L25.4266%2034.1126L27.4085%2034.1126H31.8681L27.4085%2015.7128H25.4266L25.4266%2015.7128Z'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M17.5635%2015.7129H13.1038L13.1039%2015.7132H11.1219L15.5816%2034.113H20.0413L20.0412%2034.1126H22.0231L17.5635%2015.7129Z'%20fill='white'/%3e%3c/svg%3e",pn={class:"BuilderSwitcher"},mn=R({__name:"BuilderSwitcher",setup(e){const t=q(Z.builderManager);let n=W(null);const o=i=>{const s=t.getMode();s!=i&&(n.value=i,t.setMode(i),(i=="preview"||s=="workflows"||i=="workflows")&&t.setSelection(null))},l=k(()=>t.getMode());return(i,s)=>(v(),w("div",pn,[r("div",{"data-automation-action":"set-mode-ui",class:V({active:l.value=="ui"}),onClick:s[0]||(s[0]=c=>o("ui"))},s[3]||(s[3]=[r("i",{class:"icon material-symbols-outlined"}," brush ",-1),A(" UI ")]),2),r("div",{"data-automation-action":"set-mode-workflows",class:V({active:l.value=="workflows"}),onClick:s[1]||(s[1]=c=>o("workflows"))},s[4]||(s[4]=[r("i",{class:"icon material-symbols-outlined"}," linked_services ",-1),A(" Blueprints ")]),2),r("div",{class:V({active:l.value=="preview"}),"data-automation-action":"set-mode-preview",onClick:s[2]||(s[2]=c=>o("preview"))},s[5]||(s[5]=[r("i",{class:"icon material-symbols-outlined"}," preview ",-1),A(" Preview ")]),2)]))}}),vn=M(mn,[["__scopeId","data-v-33d00133"]]),gn={class:"main"},hn={class:"titleContainer"},yn={key:0,class:"material-symbols-outlined"},_n={class:"slotContainer"},wn={key:0,class:"actionContainer"},bn=R({__name:"BuilderModal",props:{modalTitle:{type:String,required:!0},icon:{type:String,required:!1,default:void 0},closeAction:{type:Object,required:!0},menuActions:{type:Array,required:!1,default:void 0},allowOverflow:{type:Boolean,required:!1}},setup(e){const t=e,{modalTitle:n,icon:o,closeAction:l,menuActions:i}=Nt(t),s=c=>{c.key=="Escape"&&l.value.fn()};return(c,p)=>{var h,u;return v(),F(xt,{to:"#modal"},[r("div",{class:V(["BuilderModal",{"BuilderModal--overflow":e.allowOverflow}]),tabindex:"-1",onKeydown:s},[r("div",gn,[r("div",hn,[b(o)?(v(),w("i",yn,P(b(o)),1)):B("",!0),r("h2",null,P(b(n)),1),E(Q,{variant:"neutral",size:"icon","data-writer-tooltip":((h=b(l))==null?void 0:h.desc)??"Close",onClick:b(l).fn},{default:I(()=>p[0]||(p[0]=[r("i",{class:"material-symbols-outlined"},"close",-1)])),_:1},8,["data-writer-tooltip","onClick"])]),r("div",_n,[ce(c.$slots,"default",{},void 0,!0)]),((u=b(i))==null?void 0:u.length)>0?(v(),w("div",wn,[(v(!0),w(z,null,de(b(i),(m,f)=>(v(),F(Q,{key:f,variant:"primary",size:"small",onClick:m.fn},{default:I(()=>[A(P(m.desc),1)]),_:2},1032,["onClick"]))),128))])):B("",!0)])],34)])}}}),Cn=M(bn,[["__scopeId","data-v-c090e9f1"]]),kn={class:"BuilderStateExplorer"},xn=R({__name:"BuilderStateExplorer",setup(e){const t=q(Z.core);return(n,o)=>(v(),w("div",kn,[E(Le,{data:b(t).userState.value,"enable-copy-to-json":!0,"initial-depth":1,"hide-root":!0},null,8,["data"])]))}}),Sn=M(xn,[["__scopeId","data-v-eafb7b97"]]),Bn={class:"BuilderHeader"},$n={class:"undoRedo"},Tn=["data-writer-tooltip","disabled"],Dn=["data-writer-tooltip","disabled"],Pn=["title"],Ln={key:0},En=R({__name:"BuilderHeader",setup(e){const t=q(Z.core),n=q(Z.builderManager),{undo:o,redo:l,getUndoRedoSnapshot:i}=Ve(t,n),s=W(!1),c=k(()=>i()),p=()=>{let m="";switch(t.syncHealth.value){case"offline":m+="Offline. Not syncing.";break;case"connected":m+="Online. Syncing...";break;case"idle":m+="Sync not initialised.";break;case"suspended":m+="Sync suspended.";break}return t.featureFlags.value.length>0&&(m+=` Feature flags: ${t.featureFlags.value.join(", ")}`),m};function h(){s.value=!0}const u={desc:"Close",fn:()=>{s.value=!1}};return(m,f)=>(v(),w("div",Bn,[f[6]||(f[6]=r("img",{src:fn,alt:"Writer Framework logo"},null,-1)),E(vn),r("div",$n,[r("button",{class:"undo","data-writer-tooltip":c.value.isUndoAvailable?`Undo: ${c.value.undoDesc}`:"Nothing to undo",disabled:!c.value.isUndoAvailable,"data-writer-tooltip-placement":"bottom",onClick:f[0]||(f[0]=d=>b(o)())},f[2]||(f[2]=[r("i",{class:"material-symbols-outlined"}," undo ",-1),A(" Undo ")]),8,Tn),r("button",{class:"redo","data-writer-tooltip":c.value.isRedoAvailable?`Redo: ${c.value.redoDesc}`:"Nothing to redo",disabled:!c.value.isRedoAvailable,"data-writer-tooltip-placement":"bottom",onClick:f[1]||(f[1]=d=>b(l)())},f[3]||(f[3]=[r("i",{class:"material-symbols-outlined"}," redo ",-1),A(" Redo ")]),8,Dn)]),r("div",null,[r("button",{onClick:h},f[4]||(f[4]=[r("i",{class:"material-symbols-outlined"}," mystery ",-1),A(" State Explorer ")])),s.value?(v(),F(Cn,{key:0,"close-action":u,icon:"mystery","modal-title":"State Explorer"},{default:I(()=>[E(Sn)]),_:1})):B("",!0)]),f[7]||(f[7]=r("div",{class:"gap"},null,-1)),r("div",{class:V(["syncHealth",b(t).syncHealth.value]),title:p()},[f[5]||(f[5]=r("i",{class:"material-symbols-outlined icon"},"sync",-1)),b(t).syncHealth.value=="offline"?(v(),w("span",Ln,"Offline")):B("",!0)],10,Pn)]))}}),Fn=M(En,[["__scopeId","data-v-85cc3ebb"]]),An={class:"text"},In=200,Rn=4,Mn=R({__name:"BuilderTooltip",setup(e){const t=Se("rootEl"),n=W(!1),o=W(null);let l=null,i=null;const s=W("top"),c=W({top:0,left:0});async function p(){if(!l||(o.value=l.dataset.writerTooltip,!o.value))return;const d=l.dataset.writerTooltipGap?parseInt(l.dataset.writerTooltipGap):Rn;if(n.value=h(l),!n.value)return;await he();const{x:_,y:a,width:g,height:y}=l.getBoundingClientRect(),{width:C,height:x}=t.value.getBoundingClientRect();switch(s.value){case"top":c.value.top=a-x-d,c.value.left=_+g/2-C/2;break;case"right":c.value.top=a+y/2-x/2,c.value.left=_+g+d;break;case"left":c.value.left=_-C-d,c.value.top=a+y/2-x/2;break;case"bottom":c.value.top=a+y+d,c.value.left=_+g/2-C/2;break}}function h(d){return d.getAttribute("data-writer-tooltip-strategy")==="overflow"?d.scrollWidth>d.clientWidth:!0}function u(d){const a=d.target.closest("[data-writer-tooltip]");if(a)l!==a&&(n.value=!1);else{n.value=!1,l=null;return}l=a,s.value=l.dataset.writerTooltipPlacement??"top",setTimeout(()=>m(a),In)}async function m(d){d===l&&(i==null||i.disconnect(),i=new MutationObserver(p),i.observe(l,{attributes:!0,attributeFilter:["data-writer-tooltip","data-writer-tooltip-placement","data-writer-tooltip-strategy"]}),p())}const f=k(()=>{const{top:d,left:_}=c.value;return{top:`${d}px`,left:`${_}px`}});return Ae(()=>{document.documentElement.addEventListener("mouseover",u)}),nt(()=>{document.documentElement.removeEventListener("mouseover",u),i==null||i.disconnect()}),(d,_)=>Ue((v(),w("div",{ref_key:"rootEl",ref:t,class:"BuilderTooltip",style:Ne(f.value)},[r("div",{class:V(["arrow",s.value])},null,2),r("div",An,P(o.value),1)],4)),[[ot,n.value]])}}),On=M(Mn,[["__scopeId","data-v-7ba01c7c"]]),Wn={class:"BuilderAsyncLoader"},Vn=R({__name:"BuilderAsyncLoader",setup(e){return(t,n)=>(v(),w("div",Wn,[E(zt)]))}}),me=M(Vn,[["__scopeId","data-v-bb820549"]]),Un=""+new URL("art-paper-WsD9P5Lu.svg",import.meta.url).href,Nn="data:image/svg+xml,%3csvg%20width='120'%20height='160'%20viewBox='0%200%20120%20160'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='16.0273'%20y='89.9375'%20width='80.1422'%20height='55.209'%20rx='7.12375'%20fill='%23A95EF8'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M47.9297%20135.352H13.3542C9.41988%20135.352%206.23047%20138.541%206.23047%20142.475V152.27C6.23047%20156.205%209.41987%20159.394%2013.3542%20159.394H97.9487C101.883%20159.394%20105.072%20156.205%20105.072%20152.27V142.475C105.072%20138.541%20101.883%20135.352%2097.9487%20135.352H63.3737C63.3737%20136.103%2063.174%20136.848%2062.7859%20137.542C62.3979%20138.237%2061.8291%20138.868%2061.112%20139.399C60.395%20139.931%2059.5437%20140.352%2058.6068%20140.64C57.6699%20140.928%2056.6658%20141.076%2055.6517%20141.076C54.6376%20141.076%2053.6335%20140.928%2052.6966%20140.64C51.7597%20140.352%2050.9085%20139.931%2050.1914%20139.399C49.4744%20138.868%2048.9056%20138.237%2048.5175%20137.542C48.1295%20136.848%2047.9297%20136.103%2047.9297%20135.352Z'%20fill='%23721CC9'/%3e%3crect%20x='27.6055'%20y='103.295'%20width='56.99'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20x='38.293'%20y='112.199'%20width='35.6187'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20x='46.3047'%20y='121.104'%20width='19.5903'%20height='3.56187'%20rx='1.78094'%20fill='%23F6EFFD'/%3e%3crect%20y='10.3691'%20width='40.0647'%20height='30.0485'%20rx='7.12375'%20transform='rotate(-15%200%2010.3691)'%20fill='%23EDE2FF'/%3e%3cpath%20d='M15.0475%2021.5308C15.2249%2020.8687%2016.0526%2020.6469%2016.5373%2021.1316L21.9902%2026.5846C22.475%2027.0693%2022.2532%2027.897%2021.5911%2028.0744L14.1421%2030.0703C13.48%2030.2477%2012.8741%2029.6418%2013.0515%2028.9797L15.0475%2021.5308Z'%20fill='%23D4B2F7'/%3e%3cpath%20d='M25.3727%2010.4659C25.5501%209.80376%2026.3777%209.58199%2026.8624%2010.0667L34.9516%2018.1559C35.4363%2018.6406%2035.2145%2019.4682%2034.5524%2019.6456L23.5024%2022.6065C22.8403%2022.7839%2022.2344%2022.178%2022.4118%2021.5159L25.3727%2010.4659Z'%20fill='%23D4B2F7'/%3e%3crect%20x='68.2383'%20y='23.1523'%20width='54.3186'%20height='40.0711'%20rx='7.12375'%20transform='rotate(17.6282%2068.2383%2023.1523)'%20fill='%23D4B2F7'/%3e%3cpath%20d='M72.1976%2052.7145C71.7609%2052.9406%2071.5902%2053.4779%2071.8163%2053.9146C72.0424%2054.3514%2072.5797%2054.5221%2073.0164%2054.296L72.1976%2052.7145ZM82.1128%2048.5839L82.8321%2048.059L82.3818%2047.4419L81.7034%2047.7931L82.1128%2048.5839ZM86.9945%2055.274L86.2752%2055.7989L86.71%2056.3948L87.3764%2056.0784L86.9945%2055.274ZM104.339%2047.7366C104.504%2047.2733%20104.262%2046.764%20103.798%2046.599L96.2487%2043.9102C95.7854%2043.7452%2095.2761%2043.987%2095.1111%2044.4503C94.9461%2044.9136%2095.1879%2045.4229%2095.6512%2045.5879L102.362%2047.9779L99.972%2054.6888C99.807%2055.1521%20100.049%2055.6614%20100.512%2055.8264C100.975%2055.9914%20101.485%2055.7496%20101.65%2055.2863L104.339%2047.7366ZM73.0164%2054.296L82.5222%2049.3746L81.7034%2047.7931L72.1976%2052.7145L73.0164%2054.296ZM81.3935%2049.1087L86.2752%2055.7989L87.7138%2054.7491L82.8321%2048.059L81.3935%2049.1087ZM87.3764%2056.0784L103.882%2048.2423L103.118%2046.6334L86.6126%2054.4696L87.3764%2056.0784Z'%20fill='%23F6EFFD'/%3e%3c/svg%3e",Qe=150;function zn(e){const t=W(structuredClone(be(e.sourceFiles.value)));ve(e.sourceFiles,(a,g)=>{let y=!1,C=structuredClone(be(t.value));for(const x of ut(a)){const L=J(x,g),S=J(x,a);if(ke(S))continue;if(L===void 0||Me(S)){C=Ye(x,C,structuredClone(be(S))),y=!0;continue}if(!pe(L)||!(!L.complete&&S.complete))continue;const D=J(x,C);pe(D)&&(y=!0,D.complete=!0,D.content=S.content)}for(const x of Ht(C))J(x,a)===void 0&&(C=jt(x,C),y=!0);y&&(t.value=C)});const n=lt(),o=k(()=>Array.from(ut(t.value))),l=k(()=>o.value.filter(a=>{const g=J(a,t.value);if(Me(g))return!1;if(!pe(g))return!0;const y=J(a,e.sourceFiles.value);return pe(y)?!g.complete||!y.complete?!1:g.content!==y.content:!0})),i=k(()=>{if(n.value!==void 0)return J(n.value,t.value)}),s=k({get(){return pe(i.value)?i.value.content:""},set(a){if(n.value===void 0)return;const g=J(n.value,t.value);pe(g)&&(g.content=a)}});function c(a=1){const g=`new-file-${a}.txt`;return J([g],t.value)?c(a+1):g}async function p(){const a=c();t.value=Ye([a],be(t.value)),m([a]),await e.sendCreateSourceFileRequest([a])}const h=k(()=>{var g;return(g=n.value)!=null&&g.length?n.value.at(-1).split(".").at(-1):""}),u=k(()=>{switch(h.value){case"py":return"python";case"md":case"markdown":return"markdown";default:return h.value}});function m(a){n.value=a,pe(i.value)&&!i.value.complete&&e.requestSourceFileLoading(a)}async function f(a){if(!(!n.value||!i.value)&&(i.value.type==="file"&&await e.sendCodeSaveRequest(s.value,n.value),a)){const g=[...be(n.value)];n.value=void 0;try{await e.sendRenameSourceFileRequest(g,a)}catch(y){throw n.value=g,y}m(a)}}function d(a){return new Promise((g,y)=>{const C=new FileReader;C.addEventListener("loadend",x=>{const L=x.target.result;if(L instanceof ArrayBuffer){const S=String.fromCharCode.apply(null,new Uint8Array(L));return g(S)}g(L.split(",")[1])}),C.addEventListener("error",()=>{y()}),C.readAsDataURL(a)})}async function _(a){const g=Qe*1024*1024;if(a.size>g)throw Error(`Cannot upload file bigger than ${Qe}mb`);const y=[a.name];if(J(y,e.sourceFiles.value))throw Error(`The file ${a.name} already exists`);t.value=Ye(y,be(t.value),{type:"binary",uploading:!0});const C=await d(a);await e.sendFileUploadRequest(y,C)}return{code:s,sourceFileDraft:t,fileOpen:i,filepathOpen:n,pathsUnsaved:l,openedFileLanguage:u,save:f,upload:_,openFile:m,openNewFile:p,getNewFilename:c}}const Hn={class:"BuilderDropFileZone"},jn=R({__name:"BuilderDropFileZone",setup(e){return(t,n)=>(v(),w("div",Hn,[n[0]||(n[0]=r("img",{src:Nn,alt:"Drop file illustration"},null,-1)),n[1]||(n[1]=r("h2",null,"Upload files",-1)),r("p",null,"Files can be up to "+P(b(Qe))+"mb",1)]))}}),Kn=M(jn,[["__scopeId","data-v-92e0a561"]]),qn={class:"BuilderPanel__collapser"},Zn={class:"material-symbols-outlined"},Gn={class:"BuilderPanel__title"},Xn={class:"BuilderPanel__titleCompanion"},Yn=["data-order"],Jn={key:0,class:"BuilderPanel__contents__leftPanel"},Qn={class:"BuilderPanel__actions"},eo={class:"BuilderPanel__actionsCompanion"},to={class:"material-symbols-outlined"},no={class:"BuilderPanel__mainContents"},oo=R({__name:"BuilderPanel",props:{panelId:{},name:{},actions:{},contentsTeleportEl:{},scrollable:{type:Boolean},keyboardShortcutKey:{},enableLeftPanel:{type:Boolean},enableDropFile:{type:Boolean}},emits:{openned:e=>typeof e=="boolean",filesDrop:e=>Array.isArray(e)&&e.length>0},setup(e,{emit:t}){const n=q(Z.builderManager),o=["code","log"],l=e,i=t,s=k(()=>l.enableDropFile&&c.value),c=W(!1);function p(a,g){l.enableDropFile&&(a.preventDefault(),c.value=g)}function h(a){if(c.value=!1,!l.enableDropFile)return;a.preventDefault();const g=[];if(a.dataTransfer.items)for(const y of a.dataTransfer.items){if(y.kind!=="file")continue;const C=y.getAsFile();C&&g.push(C)}else for(const y of a.dataTransfer.files)g.push(y);g.length>0&&i("filesDrop",g)}const u=k(()=>!n.openPanels.value.has(l.panelId)),m=k(()=>o.indexOf(l.panelId));function f(a){if(n.openPanels.value.has(a)){n.openPanels.value.delete(a),i("openned",!1);return}n.openPanels.value.add(a),i("openned",!0)}function d(a){const g=Kt(a);if(g&&a.key==l.keyboardShortcutKey.toLowerCase()){a.preventDefault(),f(l.panelId);return}l.actions.forEach(y=>{if(!y.keyboardShortcut)return;const{key:C,modifierKey:x}=y.keyboardShortcut;C.toLowerCase()==a.key&&(!g&&x||(a.preventDefault(),y.callback()))})}function _(a){if(!a)return"";let g=" (";return a.modifierKey&&(g+=ct()),g+=a.key,g+=")",g}return Ae(async()=>{document.addEventListener("keydown",d)}),nt(()=>{document.removeEventListener("keydown",d)}),(a,g)=>(v(),w("div",{class:V(["BuilderPanel",{collapsed:u.value}])},[r("div",qn,[E(Q,{variant:"neutral",size:"smallIcon","data-automation-action":"toggle-panel","data-automation-key":a.panelId,"data-writer-tooltip":`Toggle ${a.name} (${b(ct)()}${a.keyboardShortcutKey})`,onClick:g[0]||(g[0]=y=>f(a.panelId))},{default:I(()=>[r("i",Zn,P(u.value?"expand_less":"expand_more"),1)]),_:1},8,["data-automation-key","data-writer-tooltip"])]),r("div",Gn,P(a.name),1),r("div",Xn,[ce(a.$slots,"titleCompanion",{},void 0,!0)]),u.value?B("",!0):(v(),F(xt,{key:0,to:a.contentsTeleportEl},[r("div",{style:Ne({order:m.value}),"data-order":m.value,class:V(["BuilderPanel__contents",{"BuilderPanel__contents--leftPanel":a.enableLeftPanel,"BuilderPanel__contents--dropingFile":s.value}]),onDrop:h,onDragover:g[1]||(g[1]=y=>p(y,!0)),onDragleave:g[2]||(g[2]=y=>p(y,!1))},[s.value?(v(),F(Kn,{key:0})):(v(),w(z,{key:1},[a.enableLeftPanel?(v(),w("div",Jn,[ce(a.$slots,"leftPanel",{},void 0,!0)])):B("",!0),r("div",Qn,[r("div",eo,[ce(a.$slots,"actionsCompanion",{},void 0,!0)]),(v(!0),w(z,null,de(a.actions,(y,C)=>(v(),F(Q,{key:C,"data-writer-tooltip":y.name+_(y.keyboardShortcut),"data-writer-tooltip-placement":"left",variant:"neutral",size:"smallIcon",disabled:y.isDisabled,onClick:y.callback},{default:I(()=>[r("i",to,P(y.icon),1)]),_:2},1032,["data-writer-tooltip","disabled","onClick"]))),128))]),r("div",no,[ce(a.$slots,"default",{},void 0,!0)])],64))],46,Yn)],8,["to"]))],2))}}),Bt=M(oo,[["__scopeId","data-v-a30a0b3d"]]),lo=["top","right","bottom","left"],pt=["start","end"],mt=lo.reduce((e,t)=>e.concat(t,t+"-"+pt[0],t+"-"+pt[1]),[]),vt=Math.min,Ee=Math.max,Oe=Math.round,le=e=>({x:e,y:e}),so={left:"right",right:"left",bottom:"top",top:"bottom"},io={start:"end",end:"start"};function $t(e,t){return typeof e=="function"?e(t):e}function ze(e){return e.split("-")[0]}function ge(e){return e.split("-")[1]}function ao(e){return e==="x"?"y":"x"}function Tt(e){return e==="y"?"height":"width"}function Dt(e){return["top","bottom"].includes(ze(e))?"y":"x"}function Pt(e){return ao(Dt(e))}function ro(e,t,n){n===void 0&&(n=!1);const o=ge(e),l=Pt(e),i=Tt(l);let s=l==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=gt(s)),[s,gt(s)]}function uo(e){return e.replace(/start|end/g,t=>io[t])}function gt(e){return e.replace(/left|right|bottom|top/g,t=>so[t])}function co(e){return{top:0,right:0,bottom:0,left:0,...e}}function fo(e){return typeof e!="number"?co(e):{top:e,right:e,bottom:e,left:e}}function We(e){const{x:t,y:n,width:o,height:l}=e;return{width:o,height:l,top:n,left:t,right:t+o,bottom:n+l,x:t,y:n}}function ht(e,t,n){let{reference:o,floating:l}=e;const i=Dt(t),s=Pt(t),c=Tt(s),p=ze(t),h=i==="y",u=o.x+o.width/2-l.width/2,m=o.y+o.height/2-l.height/2,f=o[c]/2-l[c]/2;let d;switch(p){case"top":d={x:u,y:o.y-l.height};break;case"bottom":d={x:u,y:o.y+o.height};break;case"right":d={x:o.x+o.width,y:m};break;case"left":d={x:o.x-l.width,y:m};break;default:d={x:o.x,y:o.y}}switch(ge(t)){case"start":d[s]-=f*(n&&h?-1:1);break;case"end":d[s]+=f*(n&&h?-1:1);break}return d}const po=async(e,t,n)=>{const{placement:o="bottom",strategy:l="absolute",middleware:i=[],platform:s}=n,c=i.filter(Boolean),p=await(s.isRTL==null?void 0:s.isRTL(t));let h=await s.getElementRects({reference:e,floating:t,strategy:l}),{x:u,y:m}=ht(h,o,p),f=o,d={},_=0;for(let a=0;a<c.length;a++){const{name:g,fn:y}=c[a],{x:C,y:x,data:L,reset:S}=await y({x:u,y:m,initialPlacement:o,placement:f,strategy:l,middlewareData:d,rects:h,platform:s,elements:{reference:e,floating:t}});u=C??u,m=x??m,d={...d,[g]:{...d[g],...L}},S&&_<=50&&(_++,typeof S=="object"&&(S.placement&&(f=S.placement),S.rects&&(h=S.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:l}):S.rects),{x:u,y:m}=ht(h,f,p)),a=-1)}return{x:u,y:m,placement:f,strategy:l,middlewareData:d}};async function mo(e,t){var n;t===void 0&&(t={});const{x:o,y:l,platform:i,rects:s,elements:c,strategy:p}=e,{boundary:h="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:f=!1,padding:d=0}=$t(t,e),_=fo(d),g=c[f?m==="floating"?"reference":"floating":m],y=We(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(g)))==null||n?g:g.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(c.floating)),boundary:h,rootBoundary:u,strategy:p})),C=m==="floating"?{x:o,y:l,width:s.floating.width,height:s.floating.height}:s.reference,x=await(i.getOffsetParent==null?void 0:i.getOffsetParent(c.floating)),L=await(i.isElement==null?void 0:i.isElement(x))?await(i.getScale==null?void 0:i.getScale(x))||{x:1,y:1}:{x:1,y:1},S=We(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:C,offsetParent:x,strategy:p}):C);return{top:(y.top-S.top+_.top)/L.y,bottom:(S.bottom-y.bottom+_.bottom)/L.y,left:(y.left-S.left+_.left)/L.x,right:(S.right-y.right+_.right)/L.x}}function vo(e,t,n){return(e?[...n.filter(l=>ge(l)===e),...n.filter(l=>ge(l)!==e)]:n.filter(l=>ze(l)===l)).filter(l=>e?ge(l)===e||(t?uo(l)!==l:!1):!0)}const go=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,o,l;const{rects:i,middlewareData:s,placement:c,platform:p,elements:h}=t,{crossAxis:u=!1,alignment:m,allowedPlacements:f=mt,autoAlignment:d=!0,..._}=$t(e,t),a=m!==void 0||f===mt?vo(m||null,d,f):f,g=await mo(t,_),y=((n=s.autoPlacement)==null?void 0:n.index)||0,C=a[y];if(C==null)return{};const x=ro(C,i,await(p.isRTL==null?void 0:p.isRTL(h.floating)));if(c!==C)return{reset:{placement:a[0]}};const L=[g[ze(C)],g[x[0]],g[x[1]]],S=[...((o=s.autoPlacement)==null?void 0:o.overflows)||[],{placement:C,overflows:L}],N=a[y+1];if(N)return{data:{index:y+1,overflows:S},reset:{placement:N}};const D=S.map(K=>{const ne=ge(K.placement);return[K.placement,ne&&u?K.overflows.slice(0,2).reduce(($e,_e)=>$e+_e,0):K.overflows[0],K.overflows]}).sort((K,ne)=>K[1]-ne[1]),G=((l=D.filter(K=>K[2].slice(0,ge(K[0])?2:3).every(ne=>ne<=0))[0])==null?void 0:l[0])||D[0][0];return G!==c?{data:{index:y+1,overflows:S},reset:{placement:G}}:{}}}};function He(){return typeof window<"u"}function ye(e){return st(e)?(e.nodeName||"").toLowerCase():"#document"}function X(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ue(e){var t;return(t=(st(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function st(e){return He()?e instanceof Node||e instanceof X(e).Node:!1}function ee(e){return He()?e instanceof Element||e instanceof X(e).Element:!1}function se(e){return He()?e instanceof HTMLElement||e instanceof X(e).HTMLElement:!1}function yt(e){return!He()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof X(e).ShadowRoot}function Ie(e){const{overflow:t,overflowX:n,overflowY:o,display:l}=te(e);return/auto|scroll|overlay|hidden|clip/.test(t+o+n)&&!["inline","contents"].includes(l)}function ho(e){return["table","td","th"].includes(ye(e))}function je(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function it(e){const t=at(),n=ee(e)?te(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(o=>(n.willChange||"").includes(o))||["paint","layout","strict","content"].some(o=>(n.contain||"").includes(o))}function yo(e){let t=fe(e);for(;se(t)&&!Be(t);){if(it(t))return t;if(je(t))return null;t=fe(t)}return null}function at(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Be(e){return["html","body","#document"].includes(ye(e))}function te(e){return X(e).getComputedStyle(e)}function Ke(e){return ee(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function fe(e){if(ye(e)==="html")return e;const t=e.assignedSlot||e.parentNode||yt(e)&&e.host||ue(e);return yt(t)?t.host:t}function Lt(e){const t=fe(e);return Be(t)?e.ownerDocument?e.ownerDocument.body:e.body:se(t)&&Ie(t)?t:Lt(t)}function et(e,t,n){var o;t===void 0&&(t=[]),n===void 0&&(n=!0);const l=Lt(e),i=l===((o=e.ownerDocument)==null?void 0:o.body),s=X(l);if(i){const c=tt(s);return t.concat(s,s.visualViewport||[],Ie(l)?l:[],c&&n?et(c):[])}return t.concat(l,et(l,[],n))}function tt(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Et(e){const t=te(e);let n=parseFloat(t.width)||0,o=parseFloat(t.height)||0;const l=se(e),i=l?e.offsetWidth:n,s=l?e.offsetHeight:o,c=Oe(n)!==i||Oe(o)!==s;return c&&(n=i,o=s),{width:n,height:o,$:c}}function Ft(e){return ee(e)?e:e.contextElement}function xe(e){const t=Ft(e);if(!se(t))return le(1);const n=t.getBoundingClientRect(),{width:o,height:l,$:i}=Et(t);let s=(i?Oe(n.width):n.width)/o,c=(i?Oe(n.height):n.height)/l;return(!s||!Number.isFinite(s))&&(s=1),(!c||!Number.isFinite(c))&&(c=1),{x:s,y:c}}const _o=le(0);function At(e){const t=X(e);return!at()||!t.visualViewport?_o:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function wo(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==X(e)?!1:t}function Fe(e,t,n,o){t===void 0&&(t=!1),n===void 0&&(n=!1);const l=e.getBoundingClientRect(),i=Ft(e);let s=le(1);t&&(o?ee(o)&&(s=xe(o)):s=xe(e));const c=wo(i,n,o)?At(i):le(0);let p=(l.left+c.x)/s.x,h=(l.top+c.y)/s.y,u=l.width/s.x,m=l.height/s.y;if(i){const f=X(i),d=o&&ee(o)?X(o):o;let _=f,a=tt(_);for(;a&&o&&d!==_;){const g=xe(a),y=a.getBoundingClientRect(),C=te(a),x=y.left+(a.clientLeft+parseFloat(C.paddingLeft))*g.x,L=y.top+(a.clientTop+parseFloat(C.paddingTop))*g.y;p*=g.x,h*=g.y,u*=g.x,m*=g.y,p+=x,h+=L,_=X(a),a=tt(_)}}return We({width:u,height:m,x:p,y:h})}function rt(e,t){const n=Ke(e).scrollLeft;return t?t.left+n:Fe(ue(e)).left+n}function It(e,t,n){n===void 0&&(n=!1);const o=e.getBoundingClientRect(),l=o.left+t.scrollLeft-(n?0:rt(e,o)),i=o.top+t.scrollTop;return{x:l,y:i}}function bo(e){let{elements:t,rect:n,offsetParent:o,strategy:l}=e;const i=l==="fixed",s=ue(o),c=t?je(t.floating):!1;if(o===s||c&&i)return n;let p={scrollLeft:0,scrollTop:0},h=le(1);const u=le(0),m=se(o);if((m||!m&&!i)&&((ye(o)!=="body"||Ie(s))&&(p=Ke(o)),se(o))){const d=Fe(o);h=xe(o),u.x=d.x+o.clientLeft,u.y=d.y+o.clientTop}const f=s&&!m&&!i?It(s,p,!0):le(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-p.scrollLeft*h.x+u.x+f.x,y:n.y*h.y-p.scrollTop*h.y+u.y+f.y}}function Co(e){return Array.from(e.getClientRects())}function ko(e){const t=ue(e),n=Ke(e),o=e.ownerDocument.body,l=Ee(t.scrollWidth,t.clientWidth,o.scrollWidth,o.clientWidth),i=Ee(t.scrollHeight,t.clientHeight,o.scrollHeight,o.clientHeight);let s=-n.scrollLeft+rt(e);const c=-n.scrollTop;return te(o).direction==="rtl"&&(s+=Ee(t.clientWidth,o.clientWidth)-l),{width:l,height:i,x:s,y:c}}function xo(e,t){const n=X(e),o=ue(e),l=n.visualViewport;let i=o.clientWidth,s=o.clientHeight,c=0,p=0;if(l){i=l.width,s=l.height;const h=at();(!h||h&&t==="fixed")&&(c=l.offsetLeft,p=l.offsetTop)}return{width:i,height:s,x:c,y:p}}function So(e,t){const n=Fe(e,!0,t==="fixed"),o=n.top+e.clientTop,l=n.left+e.clientLeft,i=se(e)?xe(e):le(1),s=e.clientWidth*i.x,c=e.clientHeight*i.y,p=l*i.x,h=o*i.y;return{width:s,height:c,x:p,y:h}}function _t(e,t,n){let o;if(t==="viewport")o=xo(e,n);else if(t==="document")o=ko(ue(e));else if(ee(t))o=So(t,n);else{const l=At(e);o={x:t.x-l.x,y:t.y-l.y,width:t.width,height:t.height}}return We(o)}function Rt(e,t){const n=fe(e);return n===t||!ee(n)||Be(n)?!1:te(n).position==="fixed"||Rt(n,t)}function Bo(e,t){const n=t.get(e);if(n)return n;let o=et(e,[],!1).filter(c=>ee(c)&&ye(c)!=="body"),l=null;const i=te(e).position==="fixed";let s=i?fe(e):e;for(;ee(s)&&!Be(s);){const c=te(s),p=it(s);!p&&c.position==="fixed"&&(l=null),(i?!p&&!l:!p&&c.position==="static"&&!!l&&["absolute","fixed"].includes(l.position)||Ie(s)&&!p&&Rt(e,s))?o=o.filter(u=>u!==s):l=c,s=fe(s)}return t.set(e,o),o}function $o(e){let{element:t,boundary:n,rootBoundary:o,strategy:l}=e;const s=[...n==="clippingAncestors"?je(t)?[]:Bo(t,this._c):[].concat(n),o],c=s[0],p=s.reduce((h,u)=>{const m=_t(t,u,l);return h.top=Ee(m.top,h.top),h.right=vt(m.right,h.right),h.bottom=vt(m.bottom,h.bottom),h.left=Ee(m.left,h.left),h},_t(t,c,l));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function To(e){const{width:t,height:n}=Et(e);return{width:t,height:n}}function Do(e,t,n){const o=se(t),l=ue(t),i=n==="fixed",s=Fe(e,!0,i,t);let c={scrollLeft:0,scrollTop:0};const p=le(0);if(o||!o&&!i)if((ye(t)!=="body"||Ie(l))&&(c=Ke(t)),o){const f=Fe(t,!0,i,t);p.x=f.x+t.clientLeft,p.y=f.y+t.clientTop}else l&&(p.x=rt(l));const h=l&&!o&&!i?It(l,c):le(0),u=s.left+c.scrollLeft-p.x-h.x,m=s.top+c.scrollTop-p.y-h.y;return{x:u,y:m,width:s.width,height:s.height}}function Je(e){return te(e).position==="static"}function wt(e,t){if(!se(e)||te(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ue(e)===n&&(n=n.ownerDocument.body),n}function Mt(e,t){const n=X(e);if(je(e))return n;if(!se(e)){let l=fe(e);for(;l&&!Be(l);){if(ee(l)&&!Je(l))return l;l=fe(l)}return n}let o=wt(e,t);for(;o&&ho(o)&&Je(o);)o=wt(o,t);return o&&Be(o)&&Je(o)&&!it(o)?n:o||yo(e)||n}const Po=async function(e){const t=this.getOffsetParent||Mt,n=this.getDimensions,o=await n(e.floating);return{reference:Do(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:o.width,height:o.height}}};function Lo(e){return te(e).direction==="rtl"}const Eo={convertOffsetParentRelativeRectToViewportRelativeRect:bo,getDocumentElement:ue,getClippingRect:$o,getOffsetParent:Mt,getElementRects:Po,getClientRects:Co,getDimensions:To,getScale:xe,isElement:ee,isRTL:Lo},Fo=go,Ao=(e,t,n)=>{const o=new Map,l={platform:Eo,...n},i={...l.platform,_c:o};return po(e,t,{...l,platform:i})};function Io(e){return e!=null&&typeof e=="object"&&"$el"in e}function bt(e){if(Io(e)){const t=e.$el;return st(t)&&ye(t)==="#comment"?null:t}return e}function De(e){return typeof e=="function"?e():b(e)}function Ot(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ct(e,t){const n=Ot(e);return Math.round(t*n)/n}function Ro(e,t,n){n===void 0&&(n={});const o=n.whileElementsMounted,l=k(()=>{var D;return(D=De(n.open))!=null?D:!0}),i=k(()=>De(n.middleware)),s=k(()=>{var D;return(D=De(n.placement))!=null?D:"bottom"}),c=k(()=>{var D;return(D=De(n.strategy))!=null?D:"absolute"}),p=k(()=>{var D;return(D=De(n.transform))!=null?D:!0}),h=k(()=>bt(e.value)),u=k(()=>bt(t.value)),m=W(0),f=W(0),d=W(c.value),_=W(s.value),a=lt({}),g=W(!1),y=k(()=>{const D={position:d.value,left:"0",top:"0"};if(!u.value)return D;const H=Ct(u.value,m.value),G=Ct(u.value,f.value);return p.value?{...D,transform:"translate("+H+"px, "+G+"px)",...Ot(u.value)>=1.5&&{willChange:"transform"}}:{position:d.value,left:H+"px",top:G+"px"}});let C;function x(){if(h.value==null||u.value==null)return;const D=l.value;Ao(h.value,u.value,{middleware:i.value,placement:s.value,strategy:c.value}).then(H=>{m.value=H.x,f.value=H.y,d.value=H.strategy,_.value=H.placement,a.value=H.middlewareData,g.value=D!==!1})}function L(){typeof C=="function"&&(C(),C=void 0)}function S(){if(L(),o===void 0){x();return}if(h.value!=null&&u.value!=null){C=o(h.value,u.value,x);return}}function N(){l.value||(g.value=!1)}return ve([i,s,c,l],x,{flush:"sync"}),ve([h,u],S,{flush:"sync"}),ve(l,N,{flush:"sync"}),qt()&&Zt(L),{x:Ce(m),y:Ce(f),strategy:Ce(d),placement:Ce(_),middlewareData:Ce(a),isPositioned:Ce(g),floatingStyles:y,update:x}}const Mo=R({__name:"BuilderMoreDropdown",props:{options:{type:Array,default:()=>[]},triggerCustomSize:{type:String,default:"smallIcon"},disabled:{type:Boolean},hideIcons:{type:Boolean,required:!1}},emits:{select:e=>typeof e=="string"},setup(e,{emit:t}){const n=ae(()=>re(()=>import("./WdsDropdownMenu-Cxc0Dcti.js"),__vite__mapDeps([0,1,2,3]),import.meta.url)),o=t,l=W(!1),i=Se("trigger"),s=Se("dropdown"),{floatingStyles:c}=Ro(i,s,{placement:"bottom-end",middleware:[Fo({allowedPlacements:["bottom-end","top-end"]})]}),p=Gt(i);ve(p,()=>{p.value||he().then(()=>l.value=!1)},{immediate:!0});function h(u){l.value=!1,o("select",u)}return(u,m)=>(v(),w("div",{ref_key:"trigger",ref:i,class:"BuilderMoreDropdown"},[E(Q,{variant:"neutral",size:"smallIcon",disabled:e.disabled,"custom-size":e.triggerCustomSize,onClick:m[0]||(m[0]=f=>l.value=!l.value)},{default:I(()=>m[1]||(m[1]=[r("i",{class:"material-symbols-outlined"},"more_horiz",-1)])),_:1},8,["disabled","custom-size"]),l.value?(v(),F(b(n),{key:0,ref_key:"dropdown",ref:s,class:"BuilderMoreDropdown__dropdown",options:e.options,style:Ne(b(c)),onSelect:h},null,8,["options","style"])):B("",!0)],512))}}),Wt=M(Mo,[["__scopeId","data-v-4b95d14b"]]),Oo=Object.freeze(Object.defineProperty({__proto__:null,default:Wt},Symbol.toStringTag,{value:"Module"})),Wo={class:"BuilderTree"},Vo=["draggable","data-automation-key","aria-expanded"],Uo={class:"material-symbols-outlined"},No=["data-writer-tooltip"],zo={key:1,class:"BuilderTree__main__dropdown"},Ho={class:"BuilderTree__children"},jo=R({__name:"BuilderTree",props:{name:{type:String,required:!0},query:{type:String,required:!1,default:void 0},dataAutomationKey:{type:String,required:!1,default:void 0},hasChildren:{type:Boolean},draggable:{type:Boolean},matched:{type:Boolean},selected:{type:Boolean},disabled:{type:Boolean},dropdownOptions:{type:Array,required:!1,default:void 0}},emits:{expandBranch:()=>!0,select:e=>!!e,dragover:e=>!!e,dragstart:e=>!!e,dragend:e=>!!e,drop:e=>!!e,dropdownSelect:e=>typeof e=="string"},setup(e,{expose:t,emit:n}){const o=ae(()=>re(()=>Promise.resolve().then(()=>Oo),void 0,import.meta.url)),l=e,i=n;t({expand:u,toggleCollapse:m});const s=W(!1),c=W(!1),p=k(()=>!l.matched),h=k(()=>!l.hasChildren);function u(){s.value=!1,i("expandBranch")}function m(f){f??(f=!s.value),f!==s.value&&(s.value=f)}return(f,d)=>(v(),w("div",Wo,[r("div",{class:V(["BuilderTree__main",{selected:e.selected,notMatched:p.value,childless:h.value}]),tabindex:"0",draggable:e.draggable,"data-automation-key":e.dataAutomationKey,"aria-expanded":!s.value,onMouseenter:d[2]||(d[2]=_=>c.value=!0),onMouseleave:d[3]||(d[3]=_=>c.value=!1),onClick:d[4]||(d[4]=_=>f.$emit("select",_)),onKeydown:d[5]||(d[5]=St(_=>f.$emit("select",_),["enter"])),onDragover:d[6]||(d[6]=_=>f.$emit("dragover",_)),onDragstart:d[7]||(d[7]=_=>f.$emit("dragstart",_)),onDragend:d[8]||(d[8]=_=>f.$emit("dragend",_)),onDrop:d[9]||(d[9]=_=>f.$emit("drop",_))},[e.hasChildren?(v(),F(Q,{key:0,class:"BuilderTree__main__collapser",variant:"neutral",size:"icon",disabled:e.disabled,onClick:d[0]||(d[0]=Xt(_=>m(void 0),["stop"]))},{default:I(()=>[r("i",Uo,P(s.value?"expand_more":"expand_less"),1)]),_:1},8,["disabled"])):B("",!0),ce(f.$slots,"nameLeft",{},void 0,!0),r("span",{class:V(["BuilderTree__main__name",{"BuilderTree__main__name--disabled":e.disabled}]),"data-writer-tooltip":e.name,"data-writer-tooltip-strategy":"overflow"},P(e.name),11,No),ce(f.$slots,"nameRight",{},void 0,!0),e.dropdownOptions&&c.value?(v(),w("div",zo,[E(b(o),{options:e.dropdownOptions,"trigger-custom-size":"16px",onSelect:d[1]||(d[1]=_=>f.$emit("dropdownSelect",_))},null,8,["options"])])):B("",!0)],42,Vo),E(Yt,{name:"slide-fade"},{default:I(()=>[Ue(r("div",Ho,[ce(f.$slots,"children",{},void 0,!0)],512),[[ot,!s.value&&e.hasChildren]])]),_:3})]))}}),Ko=M(jo,[["__scopeId","data-v-0bf4199a"]]),qo=R({__name:"WdsStateDot",props:{state:{type:String,required:!0}},setup(e){return(t,n)=>(v(),w("div",{class:V(["WdsStateDotState",`WdsStateDotState--${e.state}`])},null,2))}}),Zo=M(qo,[["__scopeId","data-v-4eacfc04"]]),Go=["width","height","viewBox","aria-valuenow"],Xo=["r","cx","cy","stroke","stroke-width"],Yo=["r","cx","cy","stroke","stroke-width","stroke-dasharray","stroke-dashoffset"],Jo=R({__name:"WdsProgressLinear",props:{progress:{type:Number,required:!1,default:100},sizePx:{type:Number,required:!1,default:12},strokeWidth:{type:Number,required:!1,default:2}},setup(e){const t=e,n=k(()=>t.sizePx/2),o=k(()=>t.sizePx/2-t.strokeWidth/2),l=k(()=>2*Math.PI*o.value),i=k(()=>l.value*((100-t.progress)/100)),s=k(()=>`0 0 ${t.sizePx} ${t.sizePx}`);return(c,p)=>(v(),w("svg",{width:e.sizePx,height:e.sizePx,viewBox:s.value,style:{transform:"rotate(-90deg)"},role:"progressbar","aria-valuenow":e.progress,"aria-valuemin":"0","aria-valuemax":"100"},[r("circle",{r:o.value,cx:n.value,cy:n.value,fill:"transparent",stroke:b(dt).Blue1,"stroke-width":e.strokeWidth},null,8,Xo),r("circle",{r:o.value,cx:n.value,cy:n.value,fill:"transparent",stroke:b(dt).Blue5,"stroke-width":e.strokeWidth,"stroke-dasharray":l.value,"stroke-dashoffset":i.value},null,8,Yo)],8,Go))}}),Qo=R({__name:"BuilderCodePanelFileUploading",props:{timeMs:{type:Number,required:!0}},setup(e){const t=e,n=W(0);return Ae(()=>{let o;const l=i=>{o||(o=i);const s=i-o;n.value=Math.min(s/t.timeMs*100,100),n.value<100&&requestAnimationFrame(l)};requestAnimationFrame(l)}),(o,l)=>(v(),F(Jo,{class:"BuilderCodePanelFileUploading",progress:n.value,"size-px":12,"stroke-width":2},null,8,["progress"]))}}),el=M(Qo,[["__scopeId","data-v-449f2dac"]]),kt=[{label:"Delete",value:"delete",icon:"delete"}],tl=R({__name:"BuilderCodePanelSourceFilesTree",props:{sourceFiles:{type:Object,required:!0},path:{type:Array,default:()=>[]},pathActive:{type:Array,default:()=>[]},pathsUnsaved:{type:Array,default:()=>[]},displayAddFileButton:{type:Boolean}},emits:{select:e=>Array.isArray(e),delete:e=>Array.isArray(e),addFile:()=>!0},setup(e,{emit:t}){const n=e,o=t;function l(d){return d.join("/")}const i=k(()=>l(n.pathActive)),s=k(()=>n.pathsUnsaved.map(l)),c=k(()=>ke(n.sourceFiles)?Object.entries(n.sourceFiles.children).sort((d,_)=>d[0].localeCompare(_[0])):[]);function p(d){const _=J([...n.path,d],n.sourceFiles);return Me(_)&&_.uploading}function h(d){const _=l([...n.path,d]);return s.value.includes(_)}function u(d){return l([...n.path,d])===i.value}function m(d){if(!ke(n.sourceFiles)||p(d))return;const _=n.sourceFiles.children[d];ke(_)||o("select",[...n.path,d])}function f(d,_){d==="delete"&&o("delete",[...n.path,_])}return(d,_)=>(v(),w("div",null,[(v(!0),w(z,null,de(c.value,([a,g])=>(v(),F(Ko,{key:a,name:a,matched:"","has-children":b(ke)(g),selected:u(a),disabled:p(a),"right-click-options":kt,"dropdown-options":b(ke)(g)||b(Me)(g)?kt:void 0,onSelect:y=>m(a),onDropdownSelect:y=>f(y,a)},Jt({children:I(()=>[E(Vt,{"source-files":g,"path-active":e.pathActive,"paths-unsaved":e.pathsUnsaved,path:[...e.path,a],onSelect:_[0]||(_[0]=y=>d.$emit("select",y)),onDelete:_[1]||(_[1]=y=>d.$emit("delete",y))},null,8,["source-files","path-active","paths-unsaved","path"])]),_:2},[p(a)||h(a)?{name:"nameLeft",fn:I(()=>[p(a)?(v(),F(el,{key:0,"time-ms":2e3})):h(a)?(v(),F(Zo,{key:1,state:"newDraft"})):B("",!0)]),key:"0"}:void 0]),1032,["name","has-children","selected","disabled","dropdown-options","onSelect","onDropdownSelect"]))),128))]))}}),Vt=M(tl,[["__scopeId","data-v-42a4456e"]]),Pe=lt([]);function Ut(){function e(n){Pe.value=Pe.value.filter(o=>o.id!==n)}function t(n){const o=new Date().getTime();Pe.value=[...Pe.value,{...n,id:o}],n.closable||setTimeout(()=>e(o),n.delayMs??3e3)}return{pushToast:t,removeToast:e,toasts:Qt(Pe)}}const nl={class:"BuilderCodePanelFileUploadBtn"},ol=R({__name:"BuilderCodePanelFileUploadBtn",emits:{selected:e=>Array.isArray(e)&&e.length>0},setup(e,{emit:t}){const n=Se("input"),o=t;function l(){var i;(i=n.value.files)!=null&&i.length&&o("selected",n.value.files)}return(i,s)=>(v(),w("form",nl,[Ue(r("input",{ref_key:"input",ref:n,type:"file",multiple:"true",onChange:l},null,544),[[ot,!1]]),r("button",{class:"BuilderCodePanelFileUploadBtn__btn",type:"button",onClick:s[0]||(s[0]=c=>b(n).click())},s[1]||(s[1]=[r("i",{class:"material-symbols-outlined"},"upload",-1),A(" Upload ")]))]))}}),ll=M(ol,[["__scopeId","data-v-f452b9e2"]]),sl={class:"BuilderCodePanel__tree"},il={class:"BuilderCodePanel__tree__actions"},al={key:1,class:"BuilderCodePanel__noPreview"},rl={class:"BuilderCodePanel__actionsCompanion"},ul=R({__name:"BuilderCodePanel",props:{contentsTeleportEl:{}},setup(e){const t=ae({loader:()=>re(()=>import("./BuilderEmbeddedCodeEditor-B95MXBmu.js").then($=>$.a),__vite__mapDeps([4,1,2,5]),import.meta.url),loadingComponent:me}),n=q(Z.core),o=[{label:"Rename file",value:"rename",icon:"edit"},{label:"Delete file",value:"delete",icon:"delete"}],{sourceFileDraft:l,openFile:i,upload:s,openNewFile:c,code:p,openedFileLanguage:h,filepathOpen:u,fileOpen:m,pathsUnsaved:f,save:d}=zn(n);async function _($){await Promise.all([...$].map(a))}async function a($){try{await s($),y({type:"success",message:`File ${$.name} uploaded`})}catch(U){y({type:"error",message:U.message})}}const g=k(()=>{var $;return($=m.value)==null?void 0:$.type}),{pushToast:y}=Ut(),C=nn();function x($){const U=new AbortController;Ae(()=>{document.addEventListener("keydown",async Y=>{const Ze=Y.metaKey||Y.ctrlKey,Ge=Y.key==="s"||Y.key==="S";!Ze||!Ge||(Y.preventDefault(),await $())},{signal:U.signal})}),nt(U.abort)}x(Te);const L=Se("filenameEl"),S=W(""),N=W(!1),D=k(()=>{var $;return(($=u.value)==null?void 0:$.join("/"))??""}),H=k(()=>D.value!=="main.py"),G=k(()=>D.value!==S.value),K=k(()=>N.value||D.value==="main.py"),ne=k(()=>G.value?!1:u.value===void 0?!0:!f.value.map($=>$.join("/")).includes(D.value));ve(u,()=>{var $;S.value=(($=u.value)==null?void 0:$.join("/"))??""}),ve(n.sessionTimestamp,()=>{N.value=!1});function $e($){$&&u.value===void 0&&i(["main.py"])}async function _e(){var $;D.value!=="main.py"&&(await he(),($=L.value)==null||$.focus())}async function qe($){switch($){case"rename":return _e();case"delete":await Re(u.value)}}async function ie(){await c(),_e()}async function Re($){await n.sendDeleteSourceFileRequest($),y({type:"success",message:"The file was deleted"}),u.value.join("/").startsWith($.join("/"))&&i(["main.py"])}async function Te(){if(u.value===void 0)return y({type:"error",message:"There is no file open"});if(ne.value)return y({type:"info",message:"There are not file changes to save"});N.value=!0;try{await d(G.value?S.value.split("/"):void 0),y({type:"success",message:"The file was saved"})}catch($){C.error("The file hasn't been saved.",$),y({type:"error",message:"The file hasn't been saved"});return}finally{N.value=!1}}return($,U)=>(v(),F(Bt,{"panel-id":"code",name:"Code","contents-teleport-el":$.contentsTeleportEl,actions:[],scrollable:!1,"enable-left-panel":"","keyboard-shortcut-key":"J",class:"BuilderCodePanel","enable-drop-file":"",onFilesDrop:_,onOpenned:$e},{leftPanel:I(()=>[r("div",sl,[E(Vt,{"path-active":b(u),"paths-unsaved":b(f),"source-files":b(l),onAddFile:ie,onSelect:b(i),onDelete:Re},null,8,["path-active","paths-unsaved","source-files","onSelect"]),r("div",il,[r("button",{class:"BuilderCodePanel__tree__actions__addFile",onClick:ie},U[2]||(U[2]=[r("i",{class:"material-symbols-outlined"},"add",-1),A(" Add file ")])),E(ll,{onSelected:_})])])]),actionsCompanion:I(()=>[r("div",rl,[E(en,{ref_key:"filenameEl",ref:L,modelValue:S.value,"onUpdate:modelValue":U[1]||(U[1]=Y=>S.value=Y),disabled:!H.value,class:"BuilderCodePanel__actionsCompanion__filename",autofocus:"",variant:"ghost",onKeydown:St(Te,["enter"])},null,8,["modelValue","disabled"]),E(Q,{variant:"primary",size:"small",disabled:N.value||ne.value,class:"BuilderCodePanel__actionsCompanion__saveBtn",onClick:Te},{default:I(()=>U[4]||(U[4]=[r("i",{class:"material-symbols-outlined"},"save",-1),A(" Save file ")])),_:1},8,["disabled"]),E(Wt,{disabled:K.value,options:o,onSelect:qe},null,8,["disabled"])])]),default:I(()=>[g.value==="file"?(v(),F(b(t),{key:0,modelValue:b(p),"onUpdate:modelValue":U[0]||(U[0]=Y=>tn(p)?p.value=Y:null),variant:"full",language:b(h),disabled:N.value},null,8,["modelValue","language","disabled"])):B("",!0),g.value==="binary"?(v(),w("div",al,U[3]||(U[3]=[r("img",{class:"BuilderCodePanel__noPreview__img",src:Un},null,-1),r("p",{class:"BuilderCodePanel__noPreview__title"},"Canâ€™t Preview File",-1),r("p",{class:"BuilderCodePanel__noPreview__desc"}," Non-text files are not available to view here ",-1)]))):B("",!0)]),_:1},8,["contents-teleport-el"]))}}),cl=M(ul,[["__scopeId","data-v-5bff2a2b"]]),dl={class:"BuiderLogWorkflowExecutionTrace"},fl={key:0,class:"trace"},pl={class:"type"},ml={key:0},vl={key:1},gl={class:"main"},hl={key:0},yl={key:1},_l={key:2},wl={key:3},bl={class:"details"},Cl={class:"data","data-automation-key":"result"},kl={key:1,class:"nothing"},xl={class:"data","data-automation-key":"return-value"},Sl={class:"environment"},Bl={class:"data"},$l={key:1,class:"nothing"},Tl={class:"callStack"},Dl={class:"eyebrow"},Pl=R({__name:"BuilderLogWorkflowExecutionTrace",props:{executionItem:{}},emits:["closeModal"],setup(e,{emit:t}){const n=q(Z.core),o=q(Z.builderManager),l=t,{goToComponentParentPage:i}=Ve(n,o),s=e,c=k(()=>{var m;const u=((m=s.executionItem.executionEnvironment)==null?void 0:m.call_stack)??[];return Object.fromEntries(u.map(f=>[f,n.getComponentById(f)]))}),p=k(()=>{var u;return((u=s.executionItem.executionEnvironment)==null?void 0:u.trace)??[]});async function h(u){l("closeModal"),o.setMode("workflows"),await he(),i(u),await he(),o.setSelection(u,void 0,"log")}return(u,m)=>{var f,d,_;return v(),w("div",dl,[p.value.length>0?(v(),w("div",fl,[(v(!0),w(z,null,de(p.value,(a,g)=>(v(),w("div",{key:g,class:"traceEntry"},[r("div",pl,[a.type=="functionCall"?(v(),w("span",ml,"âš¡ï¸")):B("",!0),a.type=="reasoning"?(v(),w("span",vl,"ðŸ§ ")):B("",!0)]),r("div",gl,[a.thought?(v(),w("div",hl,[m[0]||(m[0]=r("strong",null,"Thought.",-1)),A(" "+P(a.thought),1)])):B("",!0),a.action?(v(),w("div",yl,[m[1]||(m[1]=r("strong",null,"Action.",-1)),A(" "+P(a.action),1)])):B("",!0),a.name?(v(),w("div",_l,P(a.name),1)):B("",!0),a.parameters?(v(),w("div",wl,[E(Le,{"hide-root":!0,data:a.parameters,"initial-depth":1,class:"data"},null,8,["data"])])):B("",!0)])]))),128))])):B("",!0),r("div",bl,[r("div",null,[m[2]||(m[2]=r("h3",null,"Result",-1)),m[3]||(m[3]=r("p",null," The value resulting of the execution of this block. This value is added to the execution environment of the direct dependents of this block. There, it's accessible via @{result}. ",-1)),r("div",Cl,[(f=u.executionItem)!=null&&f.result?(v(),F(Le,{key:0,data:u.executionItem.result,"initial-depth":1,class:"data"},null,8,["data"])):(v(),w("div",kl,"No result."))])]),r("div",null,[m[4]||(m[4]=r("h3",null,"Return value",-1)),m[5]||(m[5]=r("p",null," The value being returned, which is used to determine the result of 'Run workflow' blocks and 'Chat completion' tool calls. ",-1)),r("div",xl,[(d=u.executionItem)!=null&&d.returnValue?(v(),F(Le,{key:0,data:u.executionItem.returnValue,"initial-depth":1,class:"data"},null,8,["data"])):(v(),w(z,{key:1},[A(" No return value. ")],64))])])]),r("div",Sl,[m[6]||(m[6]=r("h3",null,"Execution environment",-1)),m[7]||(m[7]=r("p",null," The following values were made available to this block during execution time. These values are accessible via the same template syntax i.e. @{my_var}, as state elements. ",-1)),r("div",Bl,[(_=u.executionItem)!=null&&_.executionEnvironment?(v(),F(Le,{key:0,data:u.executionItem.executionEnvironment,"initial-depth":1,class:"data"},null,8,["data"])):(v(),w("div",$l,"Empty execution environment."))])]),r("div",Tl,[m[9]||(m[9]=r("h3",null,"Call stack",-1)),(v(!0),w(z,null,de(c.value,(a,g)=>{var y,C,x;return v(),w("div",{key:g,class:V(["component",{active:g==u.executionItem.componentId}])},[r("div",null,[r("div",Dl,[g==u.executionItem.componentId?(v(),w(z,{key:0},[A(" This block Â· ")],64)):B("",!0),A(" "+P(((y=b(n).getComponentDefinition(a==null?void 0:a.type))==null?void 0:y.name)??"Unavailable component")+" Â· Id: "+P(g),1)]),A(" "+P(((C=a==null?void 0:a.content)==null?void 0:C.alias)??((x=b(n).getComponentDefinition(a==null?void 0:a.type))==null?void 0:x.name)??"Unavailable component"),1)]),a?(v(),F(Q,{key:0,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:L=>h(g)},{default:I(()=>m[8]||(m[8]=[r("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:2},1032,["onClick"])):B("",!0)],2)}),128))])])}}}),Ll=M(Pl,[["__scopeId","data-v-23814cc5"]]),El={class:"BuilderLogWorkflowExecution"},Fl={class:"name"},Al={key:0},Il={class:"eyebrow"},Rl={class:"outcome"},Ml={class:"result"},Ol={class:"time"},Wl={key:0,class:"message markdown"},Vl=R({__name:"BuilderLogWorkflowExecution",props:{executionLog:{}},setup(e){const t=q(Z.core),n=q(Z.builderManager),{goToComponentParentPage:o}=Ve(t,n),l=e,i=W(null),s=k(()=>({summary:[...l.executionLog.summary.filter(u=>!!u.outcome).map(u=>({...u,component:t.getComponentById(u.componentId),componentDef:t.getComponentById(u.componentId)?t.getComponentDefinition(t.getComponentById(u.componentId).type):void 0}))]}));async function c(h){n.setMode("workflows"),await he(),o(h),await he(),n.setSelection(h,void 0,"log")}function p(h){return h<0?"N/A":h<.1?"< 0.1s":`${h.toFixed(2)}s`}return(h,u)=>{const m=on("dompurify-html");return v(),w("div",El,[(v(!0),w(z,null,de(s.value.summary,(f,d)=>{var _,a,g,y,C,x,L,S,N,D,H,G;return v(),w("div",{key:d,class:"row"},[u[5]||(u[5]=r("div",{class:"marker top"},null,-1)),u[6]||(u[6]=r("div",{class:"marker bottom"},null,-1)),r("div",{class:V(["item",{selected:b(n).firstSelectedId.value==f.componentId}])},[r("div",Fl,[(a=(_=f.component)==null?void 0:_.content)!=null&&a.alias?(v(),w("div",Al,[r("div",Il,P(((g=f.componentDef)==null?void 0:g.name)??"Unavailable component"),1),A(" "+P((C=(y=f.component)==null?void 0:y.content)==null?void 0:C.alias),1)])):(v(),w(z,{key:1},[A(P(((x=f.componentDef)==null?void 0:x.name)??"Unavailable component"),1)],64)),f.component?(v(),F(Q,{key:2,variant:"neutral",size:"smallIcon","data-writer-tooltip":"Jump to this block",onClick:K=>c(f.componentId)},{default:I(()=>u[1]||(u[1]=[r("i",{class:"material-symbols-outlined"},"jump_to_element",-1)])),_:2},1032,["onClick"])):B("",!0)]),r("div",Rl,[f.outcome!=="in_progress"?(v(),w(z,{key:0},[r("div",{class:V(["ball",(N=(S=(L=f.componentDef)==null?void 0:L.outs)==null?void 0:S[f.outcome])==null?void 0:N.style])},null,2),A(" "+P(((G=(H=(D=f.componentDef)==null?void 0:D.outs)==null?void 0:H[f.outcome])==null?void 0:G.name)??f.outcome),1)],64)):(v(),w(z,{key:1},[u[2]||(u[2]=r("div",{class:"ballContainer"},[r("div",{class:"ball inProgress"})],-1)),u[3]||(u[3]=A(" In progress... "))],64))]),r("div",Ml,[i.value==d?(v(),F(ln,{key:0,title:"Trace",size:"wide",actions:[{desc:"Done",fn:()=>i.value=null}]},{default:I(()=>[E(Ll,{"execution-item":f,onCloseModal:u[0]||(u[0]=()=>i.value=null)},null,8,["execution-item"])]),_:2},1032,["actions"])):B("",!0),f.result||f.returnValue||f.executionEnvironment?(v(),F(Q,{key:1,variant:"special",size:"small",onClick:()=>i.value=d},{default:I(()=>u[4]||(u[4]=[r("i",{class:"material-symbols-outlined"},"find_in_page",-1),A(" Trace ")])),_:2},1032,["onClick"])):B("",!0)]),r("div",Ol,P(p(f.executionTimeInSeconds)),1),f.message?Ue((v(),w("div",Wl,null,512)),[[m,b(dn).parse(f.message)]]):B("",!0)],2)])}),128))])}}}),Ul=M(Vl,[["__scopeId","data-v-f9260bc7"]]),Nl={class:"BuilderLogIndicator"},zl={key:0,class:"number error"},Hl={key:1,class:"number info"},jl=R({__name:"BuilderLogIndicator",setup(e){const t=q(Z.builderManager),n=k(()=>t.getLogEntries().reduce((o,l)=>(l.type in o||(o[l.type]=0),o[l.type]++,o),{}));return(o,l)=>(v(),w("div",Nl,[n.value.error>0?(v(),w("div",zl,[l[0]||(l[0]=r("div",{class:"icon"},[r("i",{class:"material-symbols-outlined"},"error")],-1)),A(" "+P(n.value.error??0),1)])):B("",!0),n.value.info>0?(v(),w("div",Hl,[l[1]||(l[1]=r("div",{class:"icon"},[r("i",{class:"material-symbols-outlined"},"info")],-1)),A(" "+P(n.value.info??0),1)])):B("",!0)]))}}),Kl=M(jl,[["__scopeId","data-v-34a7a9ff"]]),ql={key:0,class:"entries"},Zl={class:"icon"},Gl={key:0,class:"material-symbols-outlined"},Xl={key:1,class:"material-symbols-outlined"},Yl={class:"title"},Jl={class:"time"},Ql={class:"content"},es={key:0,class:"codeContainer"},ts={key:1,class:"emptyMessage"},ns=R({__name:"BuilderLogPanel",props:{contentsTeleportEl:{}},setup(e){const t=q(Z.builderManager),n=[{icon:"delete",name:"Clear log",callback:()=>{t.clearLogEntries()},keyboardShortcut:{modifierKey:!0,key:"L"}}],o=k(()=>t.getLogEntries());return(l,i)=>(v(),F(Bt,{"panel-id":"log",name:"Log","contents-teleport-el":l.contentsTeleportEl,actions:n,scrollable:!0,"keyboard-shortcut-key":"K",class:"BuilderLogPanel"},{titleCompanion:I(()=>[E(Kl)]),default:I(()=>[o.value.length>0?(v(),w("div",ql,[(v(!0),w(z,null,de(o.value,(s,c)=>(v(),w(z,{key:c},[r("div",{class:V(["entry",s.type])},[r("div",Zl,[s.type=="error"?(v(),w("i",Gl,"error")):(v(),w("i",Xl,"info"))]),r("div",Yl,P(s.title)+P(s.repeated>0?` Â· Repeated ${s.repeated} times`:""),1),r("div",Jl,P(s.timestampReceived.toLocaleTimeString()),1),r("div",Ql,[A(P(s.message)+" ",1),s.code?(v(),w("div",es,[r("code",null,P(s.code),1)])):B("",!0)])],2),s.workflowExecution?(v(),F(Ul,{key:0,"execution-log":s.workflowExecution},null,8,["execution-log"])):B("",!0)],64))),128))])):B("",!0),o.value.length==0?(v(),w("div",ts,i[0]||(i[0]=[r("div",null,[A(" Exceptions and other relevant messages will be shown here."),r("br"),A("Also, you can include print statements in event handlers to create log entries. ")],-1)]))):B("",!0)]),_:1},8,["contents-teleport-el"]))}}),os=M(ns,[["__scopeId","data-v-f784bc20"]]),ls={class:"switches"},ss=R({__name:"BuilderPanelSwitcher",setup(e){const t=q(Z.builderManager),n=Se("screenEl");return(o,l)=>(v(),w("div",{class:V(["BuilderPanelSwitcher",{openPanels:b(t).openPanels.value.size>0}])},[r("div",{ref_key:"screenEl",ref:n,class:"screen"},null,512),r("div",ls,[E(cl,{"contents-teleport-el":b(n)},null,8,["contents-teleport-el"]),E(os,{"contents-teleport-el":b(n)},null,8,["contents-teleport-el"])])],2))}}),is=M(ss,[["__scopeId","data-v-75a489c0"]]),as={class:"WdsToast__icon"},rs={class:"material-symbols-outlined"},us=R({__name:"WdsToast",props:{type:{type:String,required:!0},message:{type:String,required:!0},closable:{type:Boolean}},emits:{close:()=>!0},setup(e){const t=e,n=k(()=>{switch(t.type){case"info":return"info";case"success":return"check";case"error":return"close";default:return"question_mark"}});return(o,l)=>(v(),w("div",{class:V(["WdsToast",`WdsToast--${e.type}`])},[r("div",as,[r("span",rs,P(n.value),1)]),r("p",null,P(e.message),1),e.closable?(v(),F(Q,{key:0,class:"WdsToast__close",variant:"neutral",size:"smallIcon",onClick:l[0]||(l[0]=i=>o.$emit("close"))},{default:I(()=>l[1]||(l[1]=[r("span",{class:"material-symbols-outlined"},"close",-1)])),_:1})):B("",!0)],2))}}),cs=M(us,[["__scopeId","data-v-9bb8d639"]]),ds={class:"BuilderToasts"},fs=R({__name:"BuilderToasts",setup(e){const{toasts:t,removeToast:n}=Ut();return(o,l)=>(v(),w("div",ds,[E(sn,{name:"list",tag:"div"},{default:I(()=>[(v(!0),w(z,null,de(b(t),i=>(v(),F(cs,{key:i.id,class:"BuilderToasts__toast",closable:i.closable,message:i.message,type:i.type,onClick:s=>b(n)(i.id)},null,8,["closable","message","type","onClick"]))),128))]),_:1})]))}}),ps=M(fs,[["__scopeId","data-v-d7aa9182"]]),ms={key:0,class:"sidebar"},vs={class:"builderMain"},gs={class:"rendererWrapper"},hs=R({__name:"BuilderApp",setup(e){an(T=>({bfcacb52:b(p).getMode()!=="preview"?"var(--builderSidebarWidth)":"0px"}));const t=ae({loader:()=>re(()=>import("./BuilderSettings-hpW8Ubel.js").then(T=>T.b),__vite__mapDeps([6,1,2,7,4,5,8,9]),import.meta.url),loadingComponent:me}),n=ae({loader:()=>re(()=>import("./BuilderSidebar-CV8K_91y.js"),__vite__mapDeps([10,1,2,8,11]),import.meta.url),loadingComponent:me}),o=ae({loader:()=>re(()=>import("./ComponentRenderer-BTYIS9kW.js"),__vite__mapDeps([12,1,2,7,13]),import.meta.url),loadingComponent:me}),l=ae({loader:()=>re(()=>import("./BuilderInstanceTracker-BK_sYiLI.js"),__vite__mapDeps([14,1,2,15]),import.meta.url),loadingComponent:me}),i=ae({loader:()=>re(()=>import("./BuilderInsertionOverlay-ClGgbBc8.js"),__vite__mapDeps([16,1,2,17]),import.meta.url),loadingComponent:me}),s=ae({loader:()=>re(()=>import("./BuilderInsertionLabel-BznXQA85.js"),__vite__mapDeps([18,1,2,19]),import.meta.url),loadingComponent:me}),c=q(Z.core),p=q(Z.builderManager),{candidateId:h,candidateInstancePath:u,isCandidacyConfirmed:m,dropComponent:f,assignInsertionCandidacy:d,removeInsertionCandidacy:_}=un(c),{createAndInsertComponent:a,undo:g,redo:y,moveComponent:C,moveComponentUp:x,moveComponentDown:L,cutComponent:S,isPasteAllowed:N,isCopyAllowed:D,isCutAllowed:H,isDeleteAllowed:G,isGoToParentAllowed:K,pasteComponent:ne,copyComponent:$e,removeComponentSubtree:_e,goToParent:qe}=Ve(c,p),ie=k(()=>p.getMode()),Re=k(()=>p.firstSelectedId.value);function Te(T){if(T.key=="Escape"){p.setSelection(null);return}const j=cn()?T.metaKey:T.ctrlKey;if(T.target.closest("textarea, input, select"))return;if(T.key=="z"&&j){T.preventDefault(),g();return}if(T.key=="y"&&j){T.preventDefault(),y();return}if(!p.isSingleSelectionActive.value||!p.firstSelectedItem.value)return;const{componentId:O,instancePath:we}=p.firstSelectedItem.value;if(T.key=="Delete"){if(!G(O))return;_e(O);return}if(T.key=="ArrowUp"&&j&&T.shiftKey){if(!K(O))return;qe(O,we);return}if(T.key=="ArrowUp"&&j){x(O);return}if(T.key=="ArrowDown"&&j){L(O);return}if(T.key=="v"&&j){if(!N(O))return;ne(O);return}if(T.key=="c"&&j){if(!D(O))return;$e(O);return}if(T.key=="x"&&j){if(!H(O))return;S(O);return}}function $(T){ie.value!=="preview"&&d(T)}function U(T){if(ie.value==="preview")return;p.setSelection(null);const j=f(T);if(!j)return;const{draggedType:oe,draggedId:O,parentId:we,position:Xe}=j;O?C(O,we,Xe):a(oe,we,Xe)}function Y(T){if(ie.value==="preview"||T.target.closest("[data-writer-unselectable]"))return;const oe=T.target.closest("[data-writer-id]");if(!oe)return;const O=oe.dataset.writerId,we=oe.dataset.writerInstancePath;p.isComponentIdSelected(O)&&p.selectionStatus.value!==ft.Multiple||(T.preventDefault(),T.stopPropagation(),p.handleSelectionFromEvent(T,O,we,"click"))}const Ze=T=>{if(ie.value==="preview")return;const oe=T.target.closest("[data-writer-id]").dataset.writerId,{type:O}=c.getComponentById(oe);p.selectionStatus.value===ft.Multiple&&(p.setSelection(oe,void 0,"click"),p.isSettingsBarCollapsed.value=!0),T.dataTransfer.setData(`application/json;writer=${O},${oe}`,"{}")};function Ge(T){p.setSelection(null),_(T)}return Ae(()=>{document.addEventListener("keydown",Te)}),(T,j)=>(v(),w("div",{class:"BuilderApp",tabindex:"-1",style:Ne(b(rn))},[r("div",{class:V(["mainGrid",{openPanels:b(p).openPanels.value.size>0}])},[E(Fn,{class:"builderHeader"}),ie.value!=="preview"?(v(),w("div",ms,[E(b(n))])):B("",!0),r("div",vs,[r("div",gs,[E(b(o),{class:V(["componentRenderer",{settingsOpen:b(p).isSingleSelectionActive}]),onDragover:$,onDragstart:Ze,onDragend:Ge,onDrop:U,onClickCapture:Y},null,8,["class"])]),b(p).isSingleSelectionActive?(v(),F(b(t),{key:Re.value??"noneSelected"})):B("",!0)]),E(is,{class:"panelSwitcher"})],2),ie.value!=="preview"?(v(),w(z,{key:0},[b(h)&&!b(m)?(v(),w(z,{key:0},[(v(),F(b(l),{key:b(u),class:"insertionOverlayTracker","is-off-bounds-allowed":!0,"instance-path":b(u),"match-size":!0},{default:I(()=>[E(b(i))]),_:1},8,["instance-path"])),(v(),F(b(l),{key:b(u),class:"insertionLabelTracker","instance-path":b(u),"vertical-offset-pixels":-48},{default:I(()=>[E(b(s),null,{default:I(()=>[A(P(b(c).getComponentDefinition(b(c).getComponentById(b(h)).type).name),1)]),_:1})]),_:1},8,["instance-path"]))],64)):B("",!0)],64)):B("",!0),j[0]||(j[0]=r("div",{id:"modal"},null,-1)),E(On,{id:"tooltip"}),E(ps)],4))}}),ys=M(hs,[["__scopeId","data-v-3f1c20fd"]]),bs=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"}));export{Cn as B,Ko as T,Fo as a,me as b,bs as c,Ro as u};
