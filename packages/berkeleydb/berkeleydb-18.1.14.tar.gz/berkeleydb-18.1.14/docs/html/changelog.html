<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Changelog &#8212; BerkeleyDB 18.1.14 documentation</title>
    <link rel="stylesheet" type="text/css" href="static/pygments.css?v=d1102ebc" />
    <link rel="stylesheet" type="text/css" href="static/basic.css?v=b08954a9" />
    <link rel="stylesheet" type="text/css" href="static/alabaster.css?v=27fed22d" />
    <script src="static/documentation_options.js?v=03b33202"></script>
    <script src="static/doctools.js?v=9bcbadda"></script>
    <script src="static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Changelog of legacy “bsddb3” project" href="changelog-bsddb3.html" />
    <link rel="prev" title="History" href="history.html" />
   
  <link rel="stylesheet" href="static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Link to this heading">¶</a></h1>
<section id="xxxx-xx-xx">
<h2>18.1.15 - XXXX-XX-XX<a class="headerlink" href="#xxxx-xx-xx" title="Link to this heading">¶</a></h2>
</section>
<section id="id1">
<h2>18.1.14 - 2025-03-23<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> We eliminate <code class="docutils literal notranslate"><span class="pre">dbobj.py</span></code>.
It was very outdated and it was only barely useful if you
wanted to create subclasses of <strong>berkeleydb</strong> classes.</p>
<p>My recommended approach would be to use delegation instead
of subclassing. It is quite trivial. Instead of subclassing
<code class="docutils literal notranslate"><span class="pre">DBEnv</span></code>, you can do something like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">My_DBEnv</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cobj</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">DBEnv</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cobj</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>You can do something similar for other <strong>berkeleydb</strong>
objects, for example, <code class="docutils literal notranslate"><span class="pre">DB</span></code>, even implementing a <em>mapping</em>
interface:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">DB</span><span class="p">(</span><span class="n">MutableMapping</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dbenv</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="c1"># give it the proper DBEnv C object that its expecting</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cobj</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">DB</span><span class="p">(</span><span class="o">*</span><span class="p">((</span><span class="n">dbenv</span><span class="o">.</span><span class="n">_cobj</span><span class="p">,)</span> <span class="o">+</span> <span class="n">args</span><span class="p">),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cobj</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="c1"># We need the following overrides because we are &quot;MutableMapping&quot;.</span>
    <span class="k">def</span> <span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_cobj</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cobj</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span>
    <span class="k">def</span> <span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cobj</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">def</span> <span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cobj</span><span class="p">[</span><span class="n">arg</span><span class="p">]</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cobj</span><span class="o">.</span><span class="fm">__iter__</span><span class="p">()</span>
</pre></div>
</div>
</div>
</li>
<li><p>Microsoft Windows support is back! Thanks to Brian Matthews
for pursuing this and for investing time and resources making
it possible.</p>
<p>I update the PyPI <em>Classifiers</em> for this project to from:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Operating</span> <span class="n">System</span> <span class="p">::</span> <span class="n">Unix</span>
</pre></div>
</div>
<p>to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Operating</span> <span class="n">System</span> <span class="p">::</span> <span class="n">Unix</span>
<span class="n">Operating</span> <span class="n">System</span> <span class="p">::</span> <span class="n">POSIX</span>
<span class="n">Operating</span> <span class="n">System</span> <span class="p">::</span> <span class="n">Microsoft</span> <span class="p">::</span> <span class="n">Windows</span>
</pre></div>
</div>
</li>
<li><p>Allow unicode and binary keys when using encryption.
Previously, only unicode keys were allowed. In both cases,
null bytes (<code class="docutils literal notranslate"><span class="pre">'\0'</span></code> or <code class="docutils literal notranslate"><span class="pre">'\x00'</span></code>) will raise an exception.</p></li>
<li><p>Correctly display (in the raised exception) the type of the
parameter when it is not accepted, beside the required type.
This solves a regression introduced in 18.1.9.</p></li>
<li><p>Delete stale and outdated entries in the TO DO file.</p></li>
<li><p>Solve some redefinitions in the dictionary returned by
<code class="docutils literal notranslate"><span class="pre">DBEnv.lock_stat()</span></code> and add more entries:</p>
<ul class="simple">
<li><p>Berkeley DB &gt;= 4.8: <code class="docutils literal notranslate"><span class="pre">locksteals</span></code>, <code class="docutils literal notranslate"><span class="pre">maxhlocks</span></code>,
<code class="docutils literal notranslate"><span class="pre">maxhobjects</span></code>, <code class="docutils literal notranslate"><span class="pre">maxlsteals</span></code>, <code class="docutils literal notranslate"><span class="pre">maxosteals</span></code>,
<code class="docutils literal notranslate"><span class="pre">objectsteals</span></code>, <code class="docutils literal notranslate"><span class="pre">part_max_nowait</span></code>, <code class="docutils literal notranslate"><span class="pre">part_max_wait</span></code>,
<code class="docutils literal notranslate"><span class="pre">part_nowait</span></code>, <code class="docutils literal notranslate"><span class="pre">part_wait</span></code>, <code class="docutils literal notranslate"><span class="pre">partitions</span></code>.</p></li>
<li><p>Berkeley DB &gt;= 5.3: <code class="docutils literal notranslate"><span class="pre">initlocks</span></code>, <code class="docutils literal notranslate"><span class="pre">initlockers</span></code>,
<code class="docutils literal notranslate"><span class="pre">initobjects</span></code>, <code class="docutils literal notranslate"><span class="pre">lockers</span></code>, <code class="docutils literal notranslate"><span class="pre">locks</span></code>, <code class="docutils literal notranslate"><span class="pre">objects</span></code>,
<code class="docutils literal notranslate"><span class="pre">tablesize</span></code>.</p></li>
<li><p>Berkeley DB &gt;= 6.2: <code class="docutils literal notranslate"><span class="pre">nlockers_hit</span></code>, <code class="docutils literal notranslate"><span class="pre">nlockers_reused</span></code>.</p></li>
</ul>
</li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.log_stat()</span></code> if we are using
Berkeley DB &gt;= 5.3: <code class="docutils literal notranslate"><span class="pre">fileid_init</span></code>, <code class="docutils literal notranslate"><span class="pre">maxnfileid</span></code>,
<code class="docutils literal notranslate"><span class="pre">nfileid</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nelem</span></code> value in <code class="docutils literal notranslate"><span class="pre">DB.stat()</span></code> for hash databases was
dropped some time ago. Update stale documentation.</p>
<p>That value is actually available via <code class="docutils literal notranslate"><span class="pre">DB.get_h_nelem()</span></code>.</p>
</li>
<li><p>Improve docs explaining the <code class="docutils literal notranslate"><span class="pre">end</span></code> value in the dictionary
returned by <code class="docutils literal notranslate"><span class="pre">DB.compact()</span></code> and documenting that
<code class="docutils literal notranslate"><span class="pre">empty_buckets</span></code> is not available when using Berkeley DB 4.8.</p></li>
<li><p>In several <em>stats</em> dictionaries, document that <code class="docutils literal notranslate"><span class="pre">ext_files</span></code>
value is only available from Berkeley DB 6.2.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.memp_stat()</span></code>: <code class="docutils literal notranslate"><span class="pre">pagesize</span></code>.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.memp_stat()</span></code> if we are using
Berkeley DB &gt;= 5.3: <code class="docutils literal notranslate"><span class="pre">regmax</span></code>, <code class="docutils literal notranslate"><span class="pre">hash_mutexes</span></code>,
<code class="docutils literal notranslate"><span class="pre">backup_spins</span></code>.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.memp_stat()</span></code> if we are using
Berkeley DB &gt;= 6.2: <code class="docutils literal notranslate"><span class="pre">mvcc_reused</span></code>.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.txn_stat()</span></code> if we are using
Berkeley DB &gt;= 5.3: <code class="docutils literal notranslate"><span class="pre">inittxns</span></code>.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.mutex_stat()</span></code> if we are using
Berkeley DB &gt;= 5.3: <code class="docutils literal notranslate"><span class="pre">mutex_init</span></code>, <code class="docutils literal notranslate"><span class="pre">mutex_max</span></code>, <code class="docutils literal notranslate"><span class="pre">regmax</span></code>.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.repmgr_stat()</span></code> if we are using
Berkeley DB &gt;= 5.3: <code class="docutils literal notranslate"><span class="pre">elect_threads</span></code>, <code class="docutils literal notranslate"><span class="pre">max_elect_threads</span></code>.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.repmgr_stat()</span></code> if we are using
Berkeley DB &gt;= 6.2: <code class="docutils literal notranslate"><span class="pre">incoming_msgs_dropped</span></code>,
<code class="docutils literal notranslate"><span class="pre">incoming_queue_bytes</span></code>, <code class="docutils literal notranslate"><span class="pre">incoming_queue_gbytes</span></code>,
<code class="docutils literal notranslate"><span class="pre">site_participants</span></code>, <code class="docutils literal notranslate"><span class="pre">site_total</span></code>, <code class="docutils literal notranslate"><span class="pre">site_views</span></code>,
<code class="docutils literal notranslate"><span class="pre">takeovers</span></code>, <code class="docutils literal notranslate"><span class="pre">write_ops_forwarded</span></code>,
<code class="docutils literal notranslate"><span class="pre">write_ops_received</span></code>.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.repmgr_stat()</span></code> if we are using
Berkeley DB &gt;= 18.1: <code class="docutils literal notranslate"><span class="pre">group_stable_log_file</span></code>,
<code class="docutils literal notranslate"><span class="pre">polling_method</span></code>.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.rep_stat()</span></code> if we are using
Berkeley DB &gt;= 5.3: <code class="docutils literal notranslate"><span class="pre">election_datagen</span></code>, <code class="docutils literal notranslate"><span class="pre">lease_chk</span></code>,
<code class="docutils literal notranslate"><span class="pre">lease_chk_misses</span></code>, <code class="docutils literal notranslate"><span class="pre">lease_chk_refresh</span></code>, <code class="docutils literal notranslate"><span class="pre">lease_sends</span></code>.</p></li>
<li><p>Add more entries to <code class="docutils literal notranslate"><span class="pre">DBEnv.rep_stat()</span></code> if we are using
Berkeley DB &gt;= 6.2: <code class="docutils literal notranslate"><span class="pre">ext_duplicated</span></code>, <code class="docutils literal notranslate"><span class="pre">ext_records</span></code>,
<code class="docutils literal notranslate"><span class="pre">ext_rereq</span></code>, <code class="docutils literal notranslate"><span class="pre">ext_update_rereq</span></code>, <code class="docutils literal notranslate"><span class="pre">view</span></code>.</p></li>
<li><p>In the different <em>stats</em> documentation, add notes about what
versions of Berkeley DB provide the different values.</p></li>
<li><p>Complete documentation about <em>berkeleydb</em> exceptions and what
Berkeley DB releases provide each one.</p></li>
<li><p>Document what functions are available when compiled against
each Berkeley DB release.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id2">
<h2>18.1.13 - 2025-01-22<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><div class="admonition note">
<p class="admonition-title">Note</p>
<p>Being able to compile the bindings on non x86/x86_64 Linux
systems (ARM, RISC-V, etc).</p>
<p>This improvement required to change the way compilation on
Linux worked. If you find any issue with this, please
report.</p>
</div>
</li>
<li><p>Compile the C module with extra static analysis and be more
strict.</p></li>
<li><p>Some functions have unused parameters that we would like to
preserve.</p></li>
<li><p>Different types in different python subinterpreters are tricky
under Py_LIMITED_API &lt; Python 3.10. We will delete the
workarounds when Python 3.10 be the minimal supported version.</p></li>
<li><p>Delete some unused parameters thru all the source code.</p></li>
<li><p>Be explicit and complete in the sentinel values.</p></li>
<li><p>Be explicit initializing (missing) docstrings.</p></li>
<li><p>Rewrite some function prototypes to avoid warning when being
strict and to avoid unneeded function castings.</p>
<ul class="simple">
<li><p>Functions METH_NOARGS require two parameters, although one
of them will be ignored.</p></li>
</ul>
</li>
<li><p>Be sure we don’t wrap an unsigned int operation, bypassing an
assertion.</p></li>
<li><p>Update copyright to 2025.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id3">
<h2>18.1.12 - 2024-12-15<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> <code class="docutils literal notranslate"><span class="pre">berkeleydb._db</span></code> is now
<code class="docutils literal notranslate"><span class="pre">berkeleydb.db</span></code>.</p>
<p>This breaking change should usually require a major and/or
minor number update. Since <code class="docutils literal notranslate"><span class="pre">berkeleydb</span></code> traditional
numbering is related to the higher Oracle Berkeley DB
supported, I would usually wait until Oracle releases a new
version to upgrade my own version and deprecate old Python
support at the same time. Given that Oracle has not
released a new Oracle Berkeley DB in almost five years, I
must break this practice for now.</p>
<p>The new name has been available for ages and the change is
trivial…</p>
</div>
</li>
<li><p>Solved <code class="docutils literal notranslate"><span class="pre">DBEnv.memp_stat()</span></code> crash when no database was opened
yet. Triaged and reported by Rishin Goswami.</p></li>
<li><p>Added a new <code class="docutils literal notranslate"><span class="pre">DBError</span></code> subclass exception:
<code class="docutils literal notranslate"><span class="pre">DBNotSupportedError</span></code>.</p></li>
<li><p>Add tests for environment and database encryption.</p></li>
<li><p>Document what you should know about your key when using
database encryption. Check the docs!</p></li>
<li><p>Python 3.14 added to the full test matrix.</p></li>
<li><p>Experimental Python 3.14 support. Tested under 3.14.0a2.</p></li>
<li><p>Export more error codes from Oracle Berkeley DB (which ones
depends of what Oracle Berkeley DB version you use):
DB_FOREIGN_CONFLICT, DB_LOG_BUFFER_FULL, DB_LOG_VERIFY_BAD,
DB_REP_HANDLE_DEAD, DB_REP_LOCKOUT, DB_REP_UNAVAIL,
DB_REP_WOULDROLLBACK, DB_SLICE_CORRUPT, DB_VERSION_MISMATCH,
DB_REP_INELECT, DB_SYSTEM_MEM_MISSING. Some of those are not
actually returned ever, but a generic Berkeley DB exception is
raised. The error codes are available for completion.</p>
<p>If you need some specific exception to be raised, let me know.</p>
</li>
<li><p>We export more values from Oracle Berkeley DB (which ones
depends of what Oracle Berkeley DB version you use):</p>
<ul class="simple">
<li><p>DB_LOCK_GET_TIMEOUT, DB_LOCK_PUT_READ, DB_LOCK_TIMEOUT,
DB_LOCK_TRADE.</p></li>
<li><p>DB_EID_MASTER.</p></li>
<li><p>DB_REP_WRITE_FORWARD_TIMEOUT.</p></li>
<li><p>DB_EVENT_REP_AUTOTAKEOVER, DB_EVENT_REP_INQUEUE_FULL,
DB_EVENT_REP_JOIN_FAILURE, DB_EVENT_REP_WOULD_ROLLBACK,
DB_EVENT_MUTEX_DIED, DB_EVENT_FAILCHK_PANIC.</p></li>
<li><p>DB_REPMGR_ISELECTABLE, DB_REPMGR_ISPEER,
DB_REPMGR_CONF_DISABLE_POLL, DB_REPMGR_CONF_ENABLE_EPOLL,
DB_REPMGR_CONF_FORWARD_WRITES,
DB_REPMGR_CONF_PREFMAS_CLIENT,
DB_REPMGR_CONF_PREFMAS_MASTER, DB_REPMGR_NEED_RESPONSE.</p></li>
<li><p>DB_MEM_DATABASE, DB_MEM_DATABASE_LENGTH,
DB_MEM_EXTFILE_DATABASE, DB_MEM_REP_SITE.</p></li>
<li><p>DB_LOG_EXT_FILE.</p></li>
<li><p>DB_SET_MUTEX_FAILCHK_TIMEOUT.</p></li>
<li><p>DB_SLICED.</p></li>
<li><p>DB_VERB_BACKUP, DB_VERB_REPMGR_SSL_ALL,
DB_VERB_REPMGR_SSL_CONN, DB_VERB_REPMGR_SSL_IO,
DB_VERB_SLICE.</p></li>
<li><p>DB_XA_CREATE.</p></li>
</ul>
</li>
<li><p>Oracle Berkeley DB&gt;=5.3: Beside <code class="docutils literal notranslate"><span class="pre">db.DB_VERSION_STRING</span></code> we
now have <code class="docutils literal notranslate"><span class="pre">db.DB_VERSION_FULL_STRING</span></code>.</p></li>
<li><p>Oracle Berkeley DB&gt;=6.2: Beside <code class="docutils literal notranslate"><span class="pre">db.DB_DBT_BLOB</span></code> we now have
<code class="docutils literal notranslate"><span class="pre">db.DB_DBT_EXT_FILE</span></code>.</p></li>
<li><p>Being able to test against an especific Oracle Berkeley DB
release.</p></li>
<li><p>Code cleanup:</p>
<ul class="simple">
<li><p>Remove unnecessary semicolons in Python code.</p></li>
<li><p>Remove unused imports.</p></li>
<li><p>Split multiple imports in a single line.</p></li>
<li><p>Split multiple statements in multiple lines.</p></li>
<li><p>Delete dead assignments.</p></li>
<li><p>Delete ancient code for <code class="docutils literal notranslate"><span class="pre">verbose</span></code> and <code class="docutils literal notranslate"><span class="pre">silent</span></code> in test
code. I never used it, and it is maintenance load.</p></li>
<li><p>Simplify some <code class="docutils literal notranslate"><span class="pre">assertTrue()</span></code> and <code class="docutils literal notranslate"><span class="pre">assertFalse()</span></code>.</p></li>
<li><p>Imports directly from <code class="docutils literal notranslate"><span class="pre">berkeleydb</span></code> instead of <code class="docutils literal notranslate"><span class="pre">test_all</span></code>.</p></li>
<li><p>Copyright and license texts should be in comments, not
docstrings.</p></li>
<li><p>Be more verbose and clear in the comparison test code.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">isinstance()</span></code> for type comparison.</p></li>
<li><p>Tight some tests.</p></li>
<li><p>Change some ambiguous variables.</p></li>
<li><p>Solve or silence <code class="docutils literal notranslate"><span class="pre">ruff</span></code> warnings.</p></li>
<li><p>Delete legacy <code class="docutils literal notranslate"><span class="pre">pychecker</span></code> support.</p></li>
<li><p>Delete legacy <code class="docutils literal notranslate"><span class="pre">PyUnit</span> <span class="pre">GUI</span></code> support.</p></li>
</ul>
</li>
</ul>
</div></blockquote>
</section>
<section id="id4">
<h2>18.1.11 - 2024-10-29<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> Drop support for Python 3.8.</p>
<p>This breaking change should usually require a major and/or
minor number update. Since <code class="docutils literal notranslate"><span class="pre">berkeleydb</span></code> traditional
numbering is related to the higher Oracle Berkeley DB
supported, I would usually wait until Oracle releases a new
version to upgrade my own version and deprecate old Python
support at the same time. Given that Oracle has not
released a new Oracle Berkeley DB in almost five years, I
must break this practice for now.</p>
<p>I am sorry if this update breaks your Python 3.8
environment. In that case, please pin your <code class="docutils literal notranslate"><span class="pre">berkeleydb</span></code>
installation to version 18.1.10, the last Python 3.8
compatible release.</p>
<p>Send me constructive feedback if appropriate.</p>
</div>
</li>
<li><p>Now that minimum Python supported is 3.9, all <code class="docutils literal notranslate"><span class="pre">bsddb.db</span></code>
objects support weakref in all supported Python versions.</p></li>
<li><p>Release 18.1.10 was failing under Python 2 because a charset
encoding error. Since this module can not be used under
Python 2 at all, we were not in a hurry to solve it and
provide a more useful error message.</p></li>
<li><p>Solve some file leaks in some tests in the wrong directory.</p></li>
<li><p>Python 3.13 is officially supported.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id5">
<h2>18.1.10 - 2024-06-24<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p>Since MS Windows is unsupported without community help, I
deleted some legacy code. It could be restored if there is
demand and some help to improve MS Windows support.</p></li>
<li><p>New URL for <a class="extlink-oracle reference external" href="https://docs.oracle.com/database/bdb181/html/index.html">Oracle documentation</a>.</p></li>
<li><p>Now we also use Python Stable ABI under Python 3.8 and 3.9.</p>
<p>Under Python 3.10 and up we can define types that users can
not instantiate as <code class="docutils literal notranslate"><span class="pre">Py_TPFLAGS_DISALLOW_INSTANTIATION</span></code>, but
that flag is not available under previous Python versions.</p>
<p>In Python 3.8 and 3.9 we used to do <code class="docutils literal notranslate"><span class="pre">type-&gt;tp_new</span> <span class="pre">=</span> <span class="pre">NULL;</span></code>
for that, but this approach is not available under Python
Stable ABI. That is the reason this module could use Python
Stable ABI only when compiled under Python 3.10 and superior.</p>
<p>In this release we define the slot <code class="docutils literal notranslate"><span class="pre">Py_tp_new</span></code> as <code class="docutils literal notranslate"><span class="pre">NULL</span></code>
in Python 3.8 and 3.9 to achieve the same effect, and that is
available under Python Stable ABI.</p>
</li>
<li><p>Since this module can now use Python Stable ABI under all
supported Python releases, that is exactly what we do. From
now on this module always uses Python Stable ABI.</p></li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> Change return value of
<code class="docutils literal notranslate"><span class="pre">berkeleydb.py_limited_api()</span></code>.</p>
<p>This function was introduced in 18.1.9 and it is used to
indicate if the module was using the Python Stable ABI or
not, and the version Python Stable ABI used.</p>
<p>Now that the module has been improved to use Python Stable
ABI always, the function returns a tuple of integers. First
tuple element tells us what Python Stable ABI version are
we supporting. Second element tells us what Python release
was this module compiled under, although it should work in
any more recent Python release.</p>
<p>Since this function was introduced in release 18.1.9, we
consider this breaking change a minor infraction affecting
most probably nobody.</p>
</div>
</li>
<li><p>Delete some unneeded ancient Python 2.x code.</p></li>
<li><p>Delete more unneeded code to check threading support since
Python 3.7 and up always guarantee threads.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id6">
<h2>18.1.9 - 2024-06-19<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> is deprecated, so migrate to
<code class="docutils literal notranslate"><span class="pre">packaging</span></code>. This is already provided by modern
<code class="docutils literal notranslate"><span class="pre">setuptools</span></code>. This change only affects you if you run the
test suite.</p></li>
<li><p>If compiled under Python 3.10 or higher, we use the Python
Stable ABI, as defined in PEP 384 and related PEPs. That is,
you can use the same compiled module with any Python release
if Python version &gt;= 3.10.</p>
<p>In order to achieve this, we have made these changes:</p>
<ul class="simple">
<li><p>Some fast Python API (not error checking) have been replaced
by somewhat slower functions (functions that do error
checking), because the former are not available in the
Stable ABI: <code class="docutils literal notranslate"><span class="pre">PyBytes_GET_SIZE()</span></code>, <code class="docutils literal notranslate"><span class="pre">PyBytes_AS_STRING()</span></code>,
<code class="docutils literal notranslate"><span class="pre">PyTuple_SET_ITEM()</span></code>.</p></li>
<li><p>We replaced <code class="docutils literal notranslate"><span class="pre">PyErr_Warn()</span></code> by <code class="docutils literal notranslate"><span class="pre">PyErr_WarnEx()</span></code> because
it is not available in the Stable ABI.</p></li>
<li><p>When an exception is raised because an incompatible type,
we need to write complicated code because
<code class="docutils literal notranslate"><span class="pre">Py_TYPE(keyobj)-&gt;tp_name</span></code> is not available in the Stable
ABI. Code generated for Python &lt; 3.11 is “ugly”, we will
clean it up when the minimum supported Python version is
3.11.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TYPE-&gt;tp_alloc</span></code> is not available under the Stable ABI. We
replace it with <code class="docutils literal notranslate"><span class="pre">PyType_GenericNew()</span></code>.</p></li>
<li><p>Internal types that should NOT be instanciated by the user
has <code class="docutils literal notranslate"><span class="pre">type-&gt;tp_new</span> <span class="pre">=</span> <span class="pre">NULL</span></code>. This can not be done under the
Stable ABI, so we use <code class="docutils literal notranslate"><span class="pre">Py_TPFLAGS_DISALLOW_INSTANTIATION</span></code>
flag. This is the reason we only create Stable ABI modules
under Python &gt;= 3.10, because that flag is defined in that
Python release.</p></li>
<li><p>The new function <code class="docutils literal notranslate"><span class="pre">berkeleydb.py_limited_api()</span></code> returns an
integer describing the minimum supported Stable ABI or
<code class="docutils literal notranslate"><span class="pre">None</span></code>. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the module is not compiled with
Stable ABI and can not be used with a different Python
version. When not <code class="docutils literal notranslate"><span class="pre">None</span></code>, the value of
<code class="docutils literal notranslate"><span class="pre">berkeleydb.py_limited_api()</span></code> can be easily interpreted
using something like <code class="docutils literal notranslate"><span class="pre">hex(berkeleydb.py_limited_api())</span></code>.</p></li>
</ul>
</li>
<li><p>Python 3.13 added to the full test matrix.</p></li>
<li><p>Experimental Python 3.13 support. Tested under 3.13.0b2.</p></li>
<li><p>This code can be compiled under MS Windows, but I am unable to
provide support for it and it is far from trivial. Because of
this and some complains about it, I change the <em>Classifiers</em>
for this project from</p>
<blockquote>
<div><p><strong>Operating System :: OS Independent</strong></p>
</div></blockquote>
<p>to</p>
<blockquote>
<div><p><strong>Operating System :: Unix</strong></p>
</div></blockquote>
<p>I would restore MS Windows support if there is some kind of
community support for it. I can not do it by myself alone.
Sorry about that.</p>
</li>
</ul>
</div></blockquote>
</section>
<section id="id7">
<h2>18.1.8 - 2023-10-05<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> Drop support for Python 3.7.</p>
<p>This breaking change should usually require a major and/or
minor number update. Since <code class="docutils literal notranslate"><span class="pre">berkeleydb</span></code> traditional
numbering is related to the higher Oracle Berkeley DB
supported, I would usually wait until Oracle releases a new
version to upgrade my own version and deprecate old Python
support at the same time. Given that Oracle has not
released a new Oracle Berkeley DB in almost five years, I
must break this practice for now.</p>
<p>I am sorry if this update breaks your Python 3.7
environment. In that case, please pin your <code class="docutils literal notranslate"><span class="pre">berkeleydb</span></code>
installation to version 18.1.6, the last Python 3.7
compatible release.</p>
<p>Send me constructive feedback if appropriate.</p>
</div>
</li>
<li><p>Progressing the implementation of PEP 489 – Multi-phase
extension module initialization:
<a class="reference external" href="https://peps.python.org/pep-0489/">https://peps.python.org/pep-0489/</a>.</p>
<ul class="simple">
<li><p>Types are now private per sub-interpreter, if you are
compiling under Python &gt;= 3.9.</p></li>
<li><p>Provide a per sub-interpreter capsule object.</p></li>
<li><p>Solve a tiny race condition when importing the module in
multiple sub-interpreters at the same time.</p></li>
</ul>
</li>
<li><p>Update the “api_version” value of the capsule object.</p></li>
<li><p>Solve a “deprecation warning” when using modern “setuptools”.</p></li>
<li><p>For testing, we require at least “setuptools” &gt;= 62.1.0
installed on all supported Python versions.</p></li>
<li><p>Python 3.12 is officially supported.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id8">
<h2>18.1.7 - 2023-10-05<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Yanked version.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id9">
<h2>18.1.6 - 2023-05-10<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p>Initial implementation of PEP 489 – Multi-phase extension
module initialization: <a class="reference external" href="https://peps.python.org/pep-0489/">https://peps.python.org/pep-0489/</a>.</p></li>
<li><p>Update “setuptools” built-time dependency to version
“&gt;=65.5.0”. A “pip” modern enough will automatically take care
of this.</p></li>
<li><p>We must be sure we are testing the correct library. Previously
we could be testing the installed library instead of
development code.</p></li>
<li><p>Python 3.12 added to the full test matrix.</p></li>
<li><p>Experimental Python 3.12 support. Tested under 3.12.0a7.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id10">
<h2>18.1.5 - 2022-01-21<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> Drop support for Python 3.6.</p>
<p>This breaking change should usually require a major and/or
minor number update. Since <code class="docutils literal notranslate"><span class="pre">berkeleydb</span></code> traditional
numbering is related to the higher Oracle Berkeley DB
supported, I would usually wait until Oracle releases a new
version to upgrade my own version and deprecate old Python
support at the same time. Given that Oracle has not
released a new Oracle Berkeley DB in almost four years, I
must break this practice for now.</p>
<p>I am sorry if this update breaks your Python 3.6
environment. In that case, please pin your <code class="docutils literal notranslate"><span class="pre">berkeleydb</span></code>
installation to version 18.1.4, the last Python 3.6
compatible release.</p>
<p>Send me constructive feedback if appropriate.</p>
</div>
</li>
<li><p>Python 3.10 support.</p></li>
<li><p>Testsuite works now in Python 3.11.0a4.</p></li>
<li><p>Python 3.11 added to the full test matrix.</p></li>
<li><p>Python 3.11 deprecates the ancient but undocumented method
<code class="docutils literal notranslate"><span class="pre">unittest.makeSuite()</span></code> and it will be deleted in Python
3.13. We migrate the tests to
<code class="docutils literal notranslate"><span class="pre">unittest.TestLoader.loadTestsFromTestCase()</span></code>.</p></li>
<li><p>Experimental Python 3.11 support. Tested in 3.11.0a4.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id11">
<h2>18.1.4 - 2021-05-19<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p>If your “pip” is modern enough, “setuptools” is automatically
added as a built-time dependency.</p>
<p>If not, you <strong>MUST</strong> install “setuptools” package first.</p>
</li>
</ul>
</div></blockquote>
</section>
<section id="id12">
<h2>18.1.3 - 2021-05-19<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p>Docs in <a class="reference external" href="https://docs.jcea.es/berkeleydb/">https://docs.jcea.es/berkeleydb/</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">publish</span></code> build and publish the documentation online.</p></li>
<li><p>Python 3.10 deprecated <code class="docutils literal notranslate"><span class="pre">distutils</span></code>. <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> is now an
installation dependency.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">dist</span></code> will generate the HTML documentation and will
include it in the released package. You can unpack the package
to read the docs.</p></li>
<li><p>Do not install tests anymore when doing <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span></code>,
although the tests are included in the package. You can unpack
the package to study the tests, maybe in order to learn about
how to use advanced Oracle Berkeley DB features.</p>
<p>This change had an unexpected ripple effect in all code. Hopefully for the
better.</p>
</li>
<li><p>Python 3.10 couldn’t find build directory.</p></li>
<li><p>Python 3.10.0a2 test suite compatibility.</p></li>
<li><p>Python 3.10 added to the full test matrix.</p></li>
<li><p>After Python 3.7, threads are always available. Take them for granted,
even in Python 3.6.</p></li>
<li><p>In the same direction, now some libraries are always available: pathlib,
warnings, queue, gc.</p></li>
<li><p>Support <code class="docutils literal notranslate"><span class="pre">DB.get_lk_exclusive()</span></code> and
<code class="docutils literal notranslate"><span class="pre">DB.set_lk_exclusive()</span></code> if you are linking against Oracle
Berkeley DB 5.3 or newer.</p></li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> The record number in the
tuple returned by <code class="docutils literal notranslate"><span class="pre">DB.consume()</span></code> is now a number instead
of a binary key.</p>
</div>
</li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> The record number in the
tuple returned by <code class="docutils literal notranslate"><span class="pre">DB.consume_wait()</span></code> is now a number
instead of a binary key.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.consume()</span></code> and <code class="docutils literal notranslate"><span class="pre">DB.consume_wait()</span></code> now can request
partial records.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.get()</span></code> and <code class="docutils literal notranslate"><span class="pre">DB.pget()</span></code> could misunderstand flags.</p></li>
<li><p>If you are using Oracle Berkeley DB 5.3 or newer, you have
these new flags: <code class="docutils literal notranslate"><span class="pre">DB_BACKUP_CLEAN</span></code>, <code class="docutils literal notranslate"><span class="pre">DB_BACKUP_FILES</span></code>,
<code class="docutils literal notranslate"><span class="pre">DB_BACKUP_NO_LOGS</span></code>, <code class="docutils literal notranslate"><span class="pre">DB_BACKUP_SINGLE_DIR</span></code> and
<code class="docutils literal notranslate"><span class="pre">DB_BACKUP_UPDATE</span></code>, <code class="docutils literal notranslate"><span class="pre">DB_BACKUP_WRITE_DIRECT</span></code>,
<code class="docutils literal notranslate"><span class="pre">DB_BACKUP_READ_COUNT</span></code>, <code class="docutils literal notranslate"><span class="pre">DB_BACKUP_READ_SLEEP</span></code>,
<code class="docutils literal notranslate"><span class="pre">DB_BACKUP_SIZE</span></code>.</p></li>
<li><p>If you are using Oracle Berkeley DB 18.1 or newer, you have these new
flags: <code class="docutils literal notranslate"><span class="pre">DB_BACKUP_DEEP_COPY</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DBEnv.backup()</span></code>, <code class="docutils literal notranslate"><span class="pre">DBEnv.dbbackup()</span></code>
<code class="docutils literal notranslate"><span class="pre">DB.get_backup_config()</span></code> and <code class="docutils literal notranslate"><span class="pre">DB.set_backup_config()</span></code>
available if you are using Oracle Berkeley DB 5.3 or newer.
These methods allow you to do hot backups without needing to
follow a careful procedure, and they can be incremental.</p></li>
<li><p>Changelog moved to Sphinx documentation.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id13">
<h2>18.1.2 - 2020-12-07<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p>Releases 18.1.0 and 18.1.1 were incomplete. Thanks to Mihai.i
for reporting.</p></li>
<li><p>Export exception <code class="docutils literal notranslate"><span class="pre">DBMetaChksumFail</span></code> (from error
<code class="docutils literal notranslate"><span class="pre">DB_META_CHKSUM_FAIL</span></code>) if running Oracle Berkeley DB version
6.2 or newer.</p></li>
<li><p>Support Heap access method if you are linking against Oracle Berkeley DB
5.3 or newer.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">DB.put()</span></code> can add new records or overwrite old ones in
Heap access method.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.append()</span></code> was extended to support Heap access method.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.cursor()</span></code> was extended to support Heap access method.</p></li>
<li><p>Implement, test and document <code class="docutils literal notranslate"><span class="pre">DB.get_heapsize()</span></code>,
<code class="docutils literal notranslate"><span class="pre">DB.set_heapsize()</span></code>, <code class="docutils literal notranslate"><span class="pre">DB.get_heap_regionsize()</span></code> and
<code class="docutils literal notranslate"><span class="pre">DB.set_heap_regionsize()</span></code>.</p></li>
<li><p>Export exception <code class="docutils literal notranslate"><span class="pre">DBHeapFull</span></code> (from error
<code class="docutils literal notranslate"><span class="pre">DB_HEAP_FULL</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.stats()</span></code> provides stats for Heap access method.</p></li>
</ul>
</li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> Add <code class="docutils literal notranslate"><span class="pre">dbtype</span></code> member in
<code class="docutils literal notranslate"><span class="pre">DBObject</span></code> object in the C API. Increase C API version.
This change has ripple effect in the code.</p>
</div>
</li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> <code class="docutils literal notranslate"><span class="pre">primaryDBType</span></code> member in
<code class="docutils literal notranslate"><span class="pre">DBObject</span></code> object in the C API is now type <code class="docutils literal notranslate"><span class="pre">DBTYPE</span></code>.
Increase C API version. This change has ripple effect in
the code.</p>
</div>
</li>
<li><p>Now <code class="docutils literal notranslate"><span class="pre">DB.get_type()</span></code> can be called anytime and it doesn’t
raise an exception if called before the database is open. If
the database type is not known, <code class="docutils literal notranslate"><span class="pre">DB_UNKNOWN</span></code> is returned.
This is a deviation from the Oracle Berkeley DB C API.</p></li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> <code class="docutils literal notranslate"><span class="pre">DB.type()</span></code> method is
dropped. It was never documented. Use <code class="docutils literal notranslate"><span class="pre">DB.get_type()</span></code>.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.stats()</span></code> returns new keys in the dictionary:</p>
<ul class="simple">
<li><p>Hash, Btree and Recno access methods: Added <code class="docutils literal notranslate"><span class="pre">metaflags</span></code>
(always) and <code class="docutils literal notranslate"><span class="pre">ext_files</span></code> (if linked against Oracle
Berkeley DB 6.2 or newer).</p></li>
<li><p>Queue access method: Added <code class="docutils literal notranslate"><span class="pre">metaflags</span></code> (always).</p></li>
</ul>
</li>
</ul>
</div></blockquote>
</section>
<section id="id14">
<h2>18.1.1 - 2020-12-01<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p>If you try to install this library in an unsupported Python
environment, instruct the user about how to install legacy
<code class="docutils literal notranslate"><span class="pre">bsddb3</span></code> library.</p></li>
<li><p>Expose <code class="docutils literal notranslate"><span class="pre">DBSite</span></code> object in the C API. Increase C API version.</p></li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> Ancient release 4.2.8 added
weakref support to all bsddb.db objects, but from now on
this feature requires at least Python 3.9 because I have
migrated from static types to heap types. Let me know if
this is a problem for you. I could, for example, keep the
old types in Python &lt; 3.9, if needed.</p>
<p>Details:</p>
<p>Py_tp_dictoffset / Py_tp_finalize are unsettable in stable API
<a class="reference external" href="https://bugs.python.org/issue38140">https://bugs.python.org/issue38140</a></p>
<p>bpo-38140: Make dict and weakref offsets opaque for C heap types (#16076)
<a class="reference external" href="https://github.com/python/cpython/commit/3368f3c6ae4140a0883e19350e672fd09c9db616">https://github.com/python/cpython/commit/3368f3c6ae4140a0883e19350e672fd09c9db616</a></p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">_iter_mixin</span></code> and <code class="docutils literal notranslate"><span class="pre">_DBWithCursor</span></code> classes have been
rewritten to avoid the need of getting a weak reference to
<code class="docutils literal notranslate"><span class="pre">DBCursor</span></code> objects, since now it is problematic if Python &lt;
3.9.</p></li>
<li><p>Wai Keen Woon and Nik Adam sent some weeks ago a patch to
solve a problem with <code class="docutils literal notranslate"><span class="pre">DB.verify()</span></code> always succeeding.
Refactoring in that area in 18.1.0 made that patch unneeded,
but I added the test case provided to the test suite.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DBEnv.cdsgroup_begin()</span></code> implemented.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DBTxn.set_priority()</span></code> and <code class="docutils literal notranslate"><span class="pre">DBTxn.get_priority()</span></code>
implemented. You need to link this library against Oracle
Berkeley DB &gt;= 5.3.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DBEnv.set_lk_max()</span></code> was deprecated and deleted long time
ago. Time to delete it from documentation too.</p></li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING - BREAKING CHANGE:</strong> <code class="docutils literal notranslate"><span class="pre">DB.compact()</span></code> used to
return a number, but now it returns a dictionary. If you
need access to the old return value, you can do
<code class="docutils literal notranslate"><span class="pre">DB.compact()['pages_truncated']</span></code>.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.compact()</span></code> has been supported <code class="docutils literal notranslate"><span class="pre">txn</span></code> parameter for a
long time, but it was not documented.</p></li>
<li><p>The dictionary returned by <code class="docutils literal notranslate"><span class="pre">DB.compact()</span></code> has an <code class="docutils literal notranslate"><span class="pre">end</span></code>
entry marking the database key/page number where the
compaction stopped. You could use it to do partial/incremental
database compaction.</p></li>
<li><p>Add an optional parameter to <code class="docutils literal notranslate"><span class="pre">DBEnv.log_flush()</span></code>.</p></li>
<li><p>You can override the directory where the tests are run with TMPDIR
environment variable. If that environment variable is not
defined, test will run in <code class="docutils literal notranslate"><span class="pre">/tmp/ram/</span></code> if exists and in
<code class="docutils literal notranslate"><span class="pre">/tmp</span></code> if <code class="docutils literal notranslate"><span class="pre">/tmp/ram/</span></code> doesn’t exists or it is not a
directory. The idea is that <code class="docutils literal notranslate"><span class="pre">/tmp/ram/</span></code> is a ramdisk and the
test will run faster.</p></li>
</ul>
</div></blockquote>
</section>
<section id="id15">
<h2>18.1.0 - 2020-11-12<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bsddb</span></code> name is reserved in PYPI, so we rename the project
to <code class="docutils literal notranslate"><span class="pre">berkeleydb</span></code>. This has been a long trip:
<a class="reference external" href="http://mailman.jcea.es/pipermail/pybsddb/2008-March/000019.html">http://mailman.jcea.es/pipermail/pybsddb/2008-March/000019.html</a></p></li>
</ul>
</div></blockquote>
</section>
<section id="pre">
<h2>18.1.0-pre<a class="headerlink" href="#pre" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p>Support Oracle Berkeley DB 18.1.x.</p></li>
<li><p>Drop support for Oracle Berkeley DB 4.7, 5.1 and 6.1.</p></li>
<li><p>Drop support for Python 2.6, 2.7, 3.3, 3.4 and 3.5.</p></li>
<li><p>The library name is migrated from <code class="docutils literal notranslate"><span class="pre">bsddb3</span></code> to <code class="docutils literal notranslate"><span class="pre">bsddb</span></code>. Reasons:</p>
<ul>
<li><p>In the old days, <code class="docutils literal notranslate"><span class="pre">bsddb</span></code> module was integrated with Python &lt; 3 . The
release rate of new Python interpreters was slow, so <code class="docutils literal notranslate"><span class="pre">bsddb</span></code> was
also distributed as an external package for faster deployment of
improvements and support of new Oracle Berkeley DB releases. In order to
be able to install a new version of this package without conflicting
with the internal python <code class="docutils literal notranslate"><span class="pre">bsddb</span></code>, a new package name was required.
At the time, the chosen name was <code class="docutils literal notranslate"><span class="pre">bsddb3</span></code> because it was the major
release version of the supported Oracle Berkeley DB library.</p>
<p>After Oracle released Berkeley DB major versions 4, 5, 6 and 18, <code class="docutils literal notranslate"><span class="pre">bsddb3</span></code>
name was retained for compatibility, although it didn’t make sense
anymore.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">bsddb3</span></code> seems to refer to the Python 3 version of <code class="docutils literal notranslate"><span class="pre">bsddb</span></code>. This
was never the case, and that was confusing. Even more now that
legacy <code class="docutils literal notranslate"><span class="pre">bsddb3</span></code> is the Python 2/3 codebase and the new <code class="docutils literal notranslate"><span class="pre">bsddb</span></code> is
Python 3 only.</p></li>
<li><p>Since from now on this library is Python 3 only, I would hate that
Python 2 users upgrading their Berkeley DB libraries would render
their installation unable to run. In order to avoid that, a new name
for the package is a good idea.</p></li>
<li><p>I decided to go back to <code class="docutils literal notranslate"><span class="pre">bsddb</span></code>, since Python 2.7 is/should be dead.</p></li>
<li><p>If you are running Python 3, please update your code to use
<code class="docutils literal notranslate"><span class="pre">bsddb</span></code> instead of <code class="docutils literal notranslate"><span class="pre">bsddb3</span></code>.</p>
<p>The old practice was to do:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">bsddb3</span> <span class="pre">as</span> <span class="pre">bsddb</span></code></p>
</div></blockquote>
<p>Now you can change that to:</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">bsddb</span></code></p>
</div></blockquote>
</li>
</ul>
</li>
<li><p>This library was usually know as <code class="docutils literal notranslate"><span class="pre">bsddb</span></code>, <code class="docutils literal notranslate"><span class="pre">bsddb3</span></code> or <code class="docutils literal notranslate"><span class="pre">pybsddb</span></code>.
From now on, it is <code class="docutils literal notranslate"><span class="pre">bsddb</span></code> everywhere.</p></li>
<li><p>Testsuite driver migrated to Python 3.</p></li>
<li><p>Since Oracle Berkeley DB 4.7 is not supported anymore,
ancient method <code class="docutils literal notranslate"><span class="pre">DBEnv.set_rpc_server()</span></code> is not available anymore.</p></li>
<li><p>If you try to install this package on Python 2,
an appropriate error is raised and directions are provided.</p></li>
<li><p>Remove dead code for unsupported Python releases.</p></li>
<li><p>Remove dead code for unsupported Oracle Berkeley DB releases.</p></li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING:</strong> Now <strong>ALL</strong> keys and values must be bytes (or
ints when appropriate). Previous releases did mostly
transparent encoding. This is not the case anymore. All
needed encoding must be explicit in your code, both when
reading and when writing to the database.</p>
</div>
</li>
<li><p>In previous releases, database cursors were iterable under Python 3,
but not under Python 2. For this release, database cursors are not
iterable anymore. This will be improved in a future release.</p></li>
<li><p>In previous releases, log cursors were iterable under Python 3,
but not under Python 2. For this release, log cursors are not
iterable anymore. This will be improved in a future release.</p></li>
<li><p>Support for <code class="docutils literal notranslate"><span class="pre">DB_REPMGR_CONF_DISABLE_SSL</span></code> flag in
<code class="docutils literal notranslate"><span class="pre">DB_ENV.rep_set_config()</span></code>.</p></li>
<li><div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>WARNING:</strong> In Oracle Berkeley DB 18.1 and up, Replication
Manager uses SSL by default.</p>
<p>This configuration is currently unsupported.</p>
<p>If you use Oracle Berkeley DB 18.1 and up and Replication
Manager, you <em>MUST</em> configure the DB environment to not use
SSL. You must do</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.rep_set_config(db.DB_REPMGR_CONF_DISABLE_SSL,</span> <span class="pre">1)</span></code></p>
</div></blockquote>
<p>in your code.</p>
<p>This limitation will be overcomed in a future release of this project.</p>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">open()</span></code> methods allow path-like objects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DBEnv.open()</span></code> accepts keyword arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DBEnv.open()</span></code> allows no homedir and a homedir of <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.set_re_source()</span></code> uses local filename encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.set_re_source()</span></code> accepts path-like objects if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.verify()</span></code> was doing nothing at all. Now actually do the job.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.verify()</span></code> accepts path-like objects for <code class="docutils literal notranslate"><span class="pre">filename</span></code> and <code class="docutils literal notranslate"><span class="pre">outfile</span></code> if
using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.upgrade()</span></code> accepts path-like objects if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.remove()</span></code> accepts path-like objects if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.remove()</span></code> could leak objects.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.rename()</span></code> accepts path-like objects if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.rename()</span></code> correctly invalidates the DB handle.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB.get_re_source()</span></code> returns unicode objects with the local
filename encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.fileid_reset()</span></code> accepts path-like objects if using Python 3.6 or
up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.log_file()</span></code> correctly encode the filename according to the
system FS encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.log_archive()</span></code> correctly encode the filenames according to the
system FS encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.lsn_reset()</span></code> accepts path-like objects if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.remove()</span></code> accepts path-like objects if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.remove()</span></code> used to leave the DBENV handle in an unstable state.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.dbrename()</span></code> accepts path-like objects for <code class="docutils literal notranslate"><span class="pre">filename</span></code> and <code class="docutils literal notranslate"><span class="pre">newname</span></code>
if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.dbremove()</span></code> accepts path-like objects if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.set_lg_dir()</span></code> uses local filename encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.set_lg_dir()</span></code> accepts path-like objects if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.get_lg_dir()</span></code> returns unicode objects with the local
filename encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.set_tmp_dir()</span></code> uses local filename encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.set_tmp_dir()</span></code> accepts path-like objects if using Python 3.6 or up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.get_tmp_dir()</span></code> returns unicode objects with the local
filename encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.set_data_dir()</span></code> uses local filename encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.set_data_dir()</span></code> accepts path-like objects if using Python 3.6 or
up.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.get_data_dirs()</span></code> returns a tuple of unicode objects encoded with
the local filename encoding.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.log_prinf()</span></code> requires a bytes object not containing ‘0’.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DB_ENV.lock_get()</span></code> name can not be None.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.set_re_pad()</span></code> param must be bytes or integer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.get_re_pad()</span></code> returns bytes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.set_re_delim()</span></code> param must be bytes or integer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DB_ENV.get_re_delim()</span></code> returns bytes.</p></li>
<li><p>In the C code we don’t need <code class="docutils literal notranslate"><span class="pre">statichere</span></code> neither <code class="docutils literal notranslate"><span class="pre">staticforward</span></code>
workarounds anymore.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">db.DB*</span></code> objects are created via the native classes, not via
factories anymore.</p></li>
<li><p>Drop support for <code class="docutils literal notranslate"><span class="pre">dbtables</span></code>. If you need it back, let me know.</p></li>
<li><p>In Python 3.9, <code class="docutils literal notranslate"><span class="pre">find_unused_port</span></code> has been moved to
<code class="docutils literal notranslate"><span class="pre">test.support.socket_helper</span></code>. Reported by Michał Górny.</p></li>
<li><p>If we use <code class="docutils literal notranslate"><span class="pre">set_get_returns_none()</span></code> in the environment,
the value could not be correctly inherited by the child
databases. Reported by Patrick Laimbock and modern GCC
warnings.</p></li>
<li><p>Do not leak test files and directories.</p></li>
</ul>
</div></blockquote>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">BerkeleyDB</a></h1>









<search id="searchbox" style="display: none" role="search">
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" placeholder="Search"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Oracle Berkeley DB 4.8, 5.3, 6.2 and 18.1 Python Extension Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="dbenv.html">DBEnv</a></li>
<li class="toctree-l1"><a class="reference internal" href="db.html">DB</a></li>
<li class="toctree-l1"><a class="reference internal" href="dbcursor.html">DBCursor</a></li>
<li class="toctree-l1"><a class="reference internal" href="dblogcursor.html">DBLogCursor</a></li>
<li class="toctree-l1"><a class="reference internal" href="dbtxn.html">DBTxn</a></li>
<li class="toctree-l1"><a class="reference internal" href="dblock.html">DBLock</a></li>
<li class="toctree-l1"><a class="reference internal" href="dbsequence.html">DBSequence</a></li>
<li class="toctree-l1"><a class="reference internal" href="dbsite.html">DBSite</a></li>
<li class="toctree-l1"><a class="reference internal" href="history.html">History</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#xxxx-xx-xx">18.1.15 - XXXX-XX-XX</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id1">18.1.14 - 2025-03-23</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">18.1.13 - 2025-01-22</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">18.1.12 - 2024-12-15</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">18.1.11 - 2024-10-29</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">18.1.10 - 2024-06-24</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">18.1.9 - 2024-06-19</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">18.1.8 - 2023-10-05</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">18.1.7 - 2023-10-05</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">18.1.6 - 2023-05-10</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id10">18.1.5 - 2022-01-21</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id11">18.1.4 - 2021-05-19</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id12">18.1.3 - 2021-05-19</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id13">18.1.2 - 2020-12-07</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id14">18.1.1 - 2020-12-01</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id15">18.1.0 - 2020-11-12</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pre">18.1.0-pre</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="changelog-bsddb3.html">Changelog of legacy “bsddb3” project</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">LICENSE</a></li>
<li class="toctree-l1"><a class="reference internal" href="donate.html">DONATE!</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="history.html" title="previous chapter">History</a></li>
      <li>Next: <a href="changelog-bsddb3.html" title="next chapter">Changelog of legacy “bsddb3” project</a></li>
  </ul></li>
</ul>
</div>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2008-2025 Jesús Cea Avión.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.2.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
    </div>

    

    
  </body>
</html>