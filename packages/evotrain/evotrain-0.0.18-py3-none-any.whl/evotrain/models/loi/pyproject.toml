[project]
name = "loi"
version = "1.0.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.11, <3.12"

dependencies = [
  "torch==2.5.1",
  "torchvision==0.20.1",
  "pyspark==3.5.3",
  "boto3==1.35.29",
  "cloudpickle==3.0.0",
  "dask>=2024.9.1",
  "dask-image==2024.5.3",
  "fiona>=1.10",
  "h5netcdf>=1.3.0",
  "joblib==1.4.2",
  "ipywidgets==8.1.5",
  "ipykernel==6.29.5",
  "loguru==0.7.2",
  "matplotlib==3.9.2",
  "numba==0.60.0",
  "numpy==1.26.4",
  "psutil==6.0.0",
  "rasterio>=1.4.0",
  "rio-cogeo==5.3.4",
  "rioxarray>=0.18",
  "scikit-image>=0.24.0",
  "scikit-learn==1.5.2",
  "scipy>=1.14.1",
  "shapely==2.0.6",
  "tqdm==4.66.5",
  "python-dotenv==1.0.1",
  "xarray==2025.1.1",
  "importlib-resources==6.5.2",
  "fastparquet==2024.11.0",
  "geopandas==1.0.1",
  "pandas==2.2.3",
  "pyproj==3.7.0",
  "panel==1.5.5",
  "tabulate==0.9.0",
  "catboost==1.2.7",
  "oauthlib==3.2.2",
  "requests_oauthlib==2.0.0",
  "sentinelhub==3.11.1",
  "rio_tiler==7.3.0",
  "watchdog==6.0.0; sys_platform!='win_ia64'",
  "smart-open[s3]>=7.1.0",
  "pytest>=8.3.4",
]

[dependency-groups]
dev = ["jupyterlab==4.2.5"]
lint = ["ruff>=0.9.0"]

[tool.hatch.build.targets.wheel]
packages = ["loi"]

[[tool.uv.index]]
name = "vito-artifactory"
url = "https://artifactory.vgt.vito.be/artifactory/api/pypi/python-packages/simple"
publish-url = "https://artifactory.vgt.vito.be/artifactory/api/pypi/python-packages-public/"

[[tool.uv.index]]
name = "pytorch-cpu"
url = "https://download.pytorch.org/whl/cpu"
explicit = true

[tool.uv.sources]
torch = [{ index = "pytorch-cpu" }]
torchvision = [{ index = "pytorch-cpu" }]
evotrain = [{ index = "vito-artifactory" }]
satio = [{ index = "vito-artifactory" }]
satio-pc = [{ index = "vito-artifactory" }]
mepsy = [{ index = "vito-artifactory" }]
loi = [{ index = "vito-artifactory" }]

[tool.pyright]
typeCheckingMode = "off"
ignore = ["*"]

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

#--default-index <DEFAULT_INDEX> env: UV_DEFAULT_INDEX=
# define credential env variables for artifactory
#export UV_INDEX_VITO_ARTIFACTORY_USERNAME=####
#export UV_INDEX_VITO_ARTIFACTORY_PASSWORD=####

[tool.pixi.project]
channels = ["conda-forge"]
platforms = ["linux-64"]

[host-dependencies]
uv = "*"

[pypi-options]
index-url = "https://artifactory.vgt.vito.be/artifactory/api/pypi/python-packages/simple"

[tool.pixi.pypi-dependencies]
evotrain = {version = "*", index = "https://artifactory.vgt.vito.be/artifactory/api/pypi/python-packages/simple"}
satio = {version = ">=2.0.1", index = "https://artifactory.vgt.vito.be/artifactory/api/pypi/python-packages/simple"}
satio-pc = {version = "*", index = "https://artifactory.vgt.vito.be/artifactory/api/pypi/python-packages/simple"}
mepsy = {version = "*", index = "https://artifactory.vgt.vito.be/artifactory/api/pypi/python-packages/simple"}
loi = {version = "*", index = "https://artifactory.vgt.vito.be/artifactory/api/pypi/python-packages/simple"}

[tool.pixi.dependencies]
pytest = ">=8.3.4,<9"

[feature.gpu]
system-requirements = { cuda = "12.*" }

[feature.gpu.dependencies]
pytorch-gpu = "*"

[feature.gpu.pypi-dependencies]
torch = { version = ">=2.5.1", index = "https://download.pytorch.org/whl/cu124" }
torchvision = { version = ">=0.20.1", index = "https://download.pytorch.org/whl/cu124" }

[feature.cpu.dependencies]
pytorch-cpu = "*"

[feature.cpu.pypi-dependencies]
torch = { version = ">=2.5.1", index = "https://download.pytorch.org/whl/cpu" }
torchvision = { version = ">=0.20.1", index = "https://download.pytorch.org/whl/cpu" }

[feature.test.tasks]
test = "pytest"

[environments]
gpu = { features = ["gpu"] }
default = { features = ["cpu"] }
test = { features = ["test"]}
