'''
<div class="sv-form-container">
						Please provide details of your residency below. Mandatory fields are marked with an asterisk (*).<br><br>
						<div class="sv-form-horizontal">
							<div class="sv-form-group" id="country-of-birth">
								<label for="IPQ_APONCOB" class="sv-col-md-3 sv-control-label">Which country were you born in? *</label>
								<div class="sv-col-md-4">
									<select id="IPQ_APONCOB" name="IPQ_APONCOB" class="" style="display: none;">
										<option value="">-- Select --</option>
										<option value="7201">Afghanistan</option><option value="2408">Aland Islands</option><option value="3201">Albania</option><option value="4101">Algeria</option><option value="3101">Andorra</option><option value="9201">Angola</option><option value="8401">Anguilla</option><option value="8402">Antigua and Barbuda</option><option value="8201">Argentina</option><option value="7202">Armenia</option><option value="8403">Aruba</option><option value="1100">Australia</option><option value="2301">Austria</option><option value="7203">Azerbaijan</option><option value="8404">Bahamas</option><option value="4201">Bahrain</option><option value="7101">Bangladesh</option><option value="8405">Barbados</option><option value="3301">Belarus</option><option value="2302">Belgium</option><option value="8301">Belize</option><option value="9101">Benin</option><option value="8101">Bermuda</option><option value="7102">Bhutan</option><option value="8202">Bolivia, Plurinational State of</option><option value="8433">Bonaire, Sint Eustatius and Saba</option><option value="3202">Bosnia and Herzegovina</option><option value="9202">Botswana</option><option value="8203">Brazil</option><option value="5201">Brunei Darussalam</option><option value="3203">Bulgaria</option><option value="9102">Burkina Faso</option><option value="9203">Burundi</option><option value="5102">Cambodia</option><option value="9103">Cameroon</option><option value="8102">Canada</option><option value="9104">Cape Verde</option><option value="8406">Cayman Islands</option><option value="9105">Central African Republic</option><option value="9106">Chad</option><option value="2101">Channel Islands</option><option value="8204">Chile</option><option value="6101">China (Excludes SARS and Taiwan)</option><option value="8205">Colombia</option><option value="9204">Comoros</option><option value="9108">Congo, Democratic Republic of</option><option value="9107">Congo, Republic of</option><option value="1501">Cook Islands</option><option value="8302">Costa Rica</option><option value="9111">Cote d'lvoire</option><option value="3204">Croatia</option><option value="8407">Cuba</option><option value="8434">Curacao</option><option value="3205">Cyprus</option><option value="3302">Czech Republic (Czechia)</option><option value="2401">Denmark</option><option value="9205">Djibouti</option><option value="8408">Dominica</option><option value="8411">Dominican Republic</option><option value="8206">Ecuador</option><option value="4102">Egypt</option><option value="8303">El Salvador</option><option value="2102">England</option><option value="9112">Equatorial Guinea</option><option value="9206">Eritrea</option><option value="3303">Estonia</option><option value="9226">Eswatini</option><option value="9207">Ethiopia</option><option value="8207">Falkland Islands</option><option value="2402">Faroe Islands</option><option value="1502">Fiji</option><option value="2403">Finland</option><option value="2303">France</option><option value="8208">French Guiana</option><option value="1503">French Polynesia</option><option value="9113">Gabon</option><option value="9114">Gambia</option><option value="4202">Gaza Strip and West Bank</option><option value="7204">Georgia</option><option value="2304">Germany</option><option value="9115">Ghana</option><option value="3102">Gibraltar</option><option value="3207">Greece</option><option value="2404">Greenland</option><option value="8412">Grenada</option><option value="8413">Guadeloupe</option><option value="1401">Guam</option><option value="8304">Guatemala</option><option value="2107">Guernsey</option><option value="9116">Guinea</option><option value="9117">Guinea-Bissau</option><option value="8211">Guyana</option><option value="8414">Haiti</option><option value="8305">Honduras</option><option value="6102">Hong Kong (SAR of China)</option><option value="3304">Hungary</option><option value="2405">Iceland</option><option value="7103">India</option><option value="5202">Indonesia</option><option value="4203">Iran</option><option value="4204">Iraq</option><option value="2201">Ireland</option><option value="2103">Isle of Man</option><option value="4205">Israel</option><option value="3104">Italy</option><option value="8415">Jamaica</option><option value="6201">Japan</option><option value="2108">Jersey</option><option value="4206">Jordan</option><option value="7205">Kazakhstan</option><option value="9208">Kenya</option><option value="1402">Kiribati</option><option value="6202">Korea, Democratic People's Republic of (North)</option><option value="6203">Korea, Republic of (South)</option><option value="3216">Kosovo</option><option value="4207">Kuwait</option><option value="7206">Kyrgyzstan</option><option value="5103">Laos</option><option value="3305">Latvia</option><option value="4208">Lebanon</option><option value="9211">Lesotho</option><option value="9118">Liberia</option><option value="4103">Libya</option><option value="2305">Liechtenstein</option><option value="3306">Lithuania</option><option value="2306">Luxembourg</option><option value="6103">Macau (SAR of China)</option><option value="9212">Madagascar</option><option value="9213">Malawi</option><option value="5203">Malaysia</option><option value="7104">Maldives</option><option value="9121">Mali</option><option value="3105">Malta</option><option value="1406-A">Mariana Islands</option><option value="1403">Marshall Islands</option><option value="8416">Martinique</option><option value="9122">Mauritania</option><option value="9214">Mauritius</option><option value="9215">Mayotte</option><option value="8306">Mexico</option><option value="1404">Micronesia, Federated States of</option><option value="3208">Moldova</option><option value="2307">Monaco</option><option value="6104">Mongolia</option><option value="3214">Montenegro</option><option value="8417">Montserrat</option><option value="4104">Morocco</option><option value="9216">Mozambique</option><option value="5101">Myanmar</option><option value="9217">Namibia</option><option value="1405">Nauru</option><option value="7105">Nepal</option><option value="2308">Netherlands</option><option value="1301">New Caledonia</option><option value="1201">New Zealand</option><option value="8307">Nicaragua</option><option value="9123">Niger</option><option value="9124">Nigeria</option><option value="1504">Niue</option><option value="1102">Norfolk Island</option><option value="3206">North Macedonia</option><option value="2104">Northern Ireland</option><option value="1406">Northern Mariana Islands</option><option value="2406">Norway</option><option value="4211">Oman</option><option value="7106">Pakistan</option><option value="1407">Palau</option><option value="4202-A">Palestine</option><option value="8308">Panama</option><option value="1302">Papua New Guinea</option><option value="8212">Paraguay</option><option value="8213">Peru</option><option value="5204">Philippines</option><option value="1513">Pitcairn Islands</option><option value="3307">Poland</option><option value="3106">Portugal</option><option value="8421">Puerto Rico</option><option value="4212">Qatar</option><option value="9218">Reunion</option><option value="3211">Romania</option><option value="3308">Russian Federation</option><option value="9221">Rwanda</option><option value="1505">Samoa</option><option value="1506">Samoa, American</option><option value="3107">San Marino</option><option value="9125">Sao Tome and Principe</option><option value="4213">Saudi Arabia</option><option value="2105">Scotland</option><option value="9126">Senegal</option><option value="3215">Serbia</option><option value="9223">Seychelles</option><option value="9127">Sierra Leone</option><option value="5205">Singapore</option><option value="8435">Sint Maarten (Dutch part)</option><option value="3311">Slovakia</option><option value="3212">Slovenia</option><option value="1303">Solomon Islands</option><option value="9224">Somalia</option><option value="9225">South Africa</option><option value="4111">South Sudan</option><option value="3108">Spain</option><option value="7107">Sri Lanka</option><option value="8431">St Barthelemy</option><option value="9222">St Helena</option><option value="8422">St Kitts and Nevis</option><option value="8423">St Lucia</option><option value="8432">St Martin (French part)</option><option value="8103">St Pierre and Miquelon</option><option value="8424">St Vincent and the Grenadines</option><option value="4105">Sudan</option><option value="8214">Suriname</option><option value="2407">Sweden</option><option value="2311">Switzerland</option><option value="4214">Syria</option><option value="6105">Taiwan</option><option value="7207">Tajikistan</option><option value="9227">Tanzania</option><option value="5104">Thailand</option><option value="5206">Timor-Leste</option><option value="9128">Togo</option><option value="1507">Tokelau</option><option value="1508">Tonga</option><option value="8425">Trinidad and Tobago</option><option value="4106">Tunisia</option><option value="7208">Turkmenistan</option><option value="8426">Turks and Caicos Islands</option><option value="1511">Tuvalu</option><option value="4215">Türkiye</option><option value="9228">Uganda</option><option value="3312">Ukraine</option><option value="4216">United Arab Emirates</option><option value="8104">United States of America</option><option value="8215">Uruguay</option><option value="7211">Uzbekistan</option><option value="1304">Vanuatu</option><option value="8216">Venezuela, Bolivarian Republic of</option><option value="5105">Vietnam</option><option value="8427">Virgin Islands, British</option><option value="8428">Virgin Islands, United States</option><option value="2106">Wales</option><option value="1512">Wallis and Futuna</option><option value="4107">Western Sahara</option><option value="4217">Yemen</option><option value="9231">Zambia</option><option value="9232">Zimbabwe</option>
									</select><div class="chosen-container chosen-container-single" title="" id="IPQ_APONCOB_chosen" tabindex="-1" style="width: 100%;"><a class="chosen-single">
  <span id="IPQ_APONCOB_chosenspan">-- Select --</span>
  <div><b></b></div>
</a>
<div class="chosen-drop">
  <div class="chosen-search">
    <input class="chosen-search-input" type="text" autocomplete="off" title="-- Select --" aria-owns="IPQ_APONCOB_ul" tabindex="0" aria-autocomplete="list" aria-label="Which country were you born in? * search">
  </div>
  <ul class="chosen-results" role="listbox" tabindex="-1" aria-expanded="false" id="IPQ_APONCOB_ul" aria-busy="true" aria-label="Which country were you born in? * options"></ul>
</div></div>
									<script>
										// Set the initial value of IPQ_APONCOB
										$("#IPQ_APONCOB").val("");
										sits_chosen_widget("#IPQ_APONCOB",{});
										$('#IPQ_APONCOB').change(toggle_date_of_arrival);
									</script>
								</div>
							</div>
							<div class="sv-form-group" id="citizenship-or-residency-status">
								<label for="IPQ_APONLNID" class="sv-col-md-3 sv-control-label">What is your citizenship/residency status? *</label>
								<div class="sv-col-md-4">
									<select id="IPQ_APONLNID" name="IPQ_APONLNID" class="" style="display: none;">
										<option value="">-- Select --</option>
										<option value="1">Australian citizen</option>
										<option value="2">New Zealand citizen</option>
										<option value="3">Australian permanent resident</option>
										<option value="8">Permanent Humanitarian Visa</option>
										<option value="P">Pacific Engagement Visa</option>
										<option value="4">Student visa or other temporary visa</option>
										<option value="5">Other (non resident)</option>
									</select><div class="chosen-container chosen-container-single" title="" id="IPQ_APONLNID_chosen" tabindex="-1" style="width: 100%;"><a class="chosen-single">
  <span id="IPQ_APONLNID_chosenspan">-- Select --</span>
  <div><b></b></div>
</a>
<div class="chosen-drop">
  <div class="chosen-search">
    <input class="chosen-search-input" type="text" autocomplete="off" title="-- Select --" aria-owns="IPQ_APONLNID_ul" tabindex="0" aria-autocomplete="list" aria-label="What is your citizenship/residency status? * search">
  </div>
  <ul class="chosen-results" role="listbox" tabindex="-1" aria-expanded="false" id="IPQ_APONLNID_ul" aria-busy="true" aria-label="What is your citizenship/residency status? * options"></ul>
</div></div>
									<script>
										// Set the initial value of IPQ_APONLNID
										$("#IPQ_APONLNID").val("");
										sits_chosen_widget("#IPQ_APONLNID",{});
										$('#IPQ_APONLNID').change(check_IPQ_APONLNID);
									</script>
								</div>
							</div>
							<div class="sv-form-group" id="date-of-arrival-in-australia" style="display: none;">
								<label for="IPQ_APONEND" class="sv-col-md-3 sv-control-label">Date of first arrival in Australia (dd/mm/yyyy) *</label>
								<div class="sv-col-md-4">
									<div class="sv-input-group">
										<input name="IPQ_APONEND" id="IPQ_APONEND" class="sv-form-control hasDatepicker" type="text" maxlength="35" value="">
										<span class="sv-input-group-addon"><img class="ui-datepicker-trigger" src="../images/si_calendar.gif" alt="..." title="..." role="button" tabindex="0"></span>
									</div>
									<small>An estimate of the day and month of arrival in Australia is acceptable. Please ensure that the year is correct.</small>
								</div>
							</div>
							<div class="sv-form-group" id="country-of-citizenship" style="display: none;">
								<label for="IPQ_APONCOD" class="sv-col-md-3 sv-control-label">Country of citizenship/nationality *</label>
								<div class="sv-col-md-4">
									<select id="IPQ_APONCOD" name="IPQ_APONCOD" class="" style="display: none;">
										<option value="">-- Select --</option>
										<option value="7201">Afghanistan</option><option value="3201">Albania</option><option value="4101">Algeria</option><option value="3101">Andorra</option><option value="9201">Angola</option><option value="8401">Anguilla</option><option value="8402">Antigua and Barbuda</option><option value="8201">Argentina</option><option value="7202">Armenia</option><option value="1100">Australia</option><option value="2301">Austria</option><option value="7203">Azerbaijan</option><option value="8404">Bahamas</option><option value="4201">Bahrain</option><option value="7101">Bangladesh</option><option value="8405">Barbados</option><option value="3301">Belarus</option><option value="2302">Belgium</option><option value="8301">Belize</option><option value="9101">Benin</option><option value="8101">Bermuda</option><option value="7102">Bhutan</option><option value="8202">Bolivia, Plurinational State of</option><option value="3202">Bosnia and Herzegovina</option><option value="9202">Botswana</option><option value="8203">Brazil</option><option value="5201">Brunei Darussalam</option><option value="3203">Bulgaria</option><option value="9102">Burkina Faso</option><option value="9203">Burundi</option><option value="5102">Cambodia</option><option value="9103">Cameroon</option><option value="8102">Canada</option><option value="9104">Cape Verde</option><option value="8406">Cayman Islands</option><option value="9105">Central African Republic</option><option value="9106">Chad</option><option value="2101">Channel Islands</option><option value="8204">Chile</option><option value="6101">China (Excludes SARS and Taiwan)</option><option value="8205">Colombia</option><option value="9204">Comoros</option><option value="9108">Congo, Democratic Republic of</option><option value="9107">Congo, Republic of</option><option value="8302">Costa Rica</option><option value="9111">Cote d'lvoire</option><option value="3204">Croatia</option><option value="8407">Cuba</option><option value="3205">Cyprus</option><option value="3302">Czech Republic (Czechia)</option><option value="2401">Denmark</option><option value="9205">Djibouti</option><option value="8408">Dominica</option><option value="8411">Dominican Republic</option><option value="8206">Ecuador</option><option value="4102">Egypt</option><option value="8303">El Salvador</option><option value="2102">England</option><option value="9112">Equatorial Guinea</option><option value="9206">Eritrea</option><option value="3303">Estonia</option><option value="9226">Eswatini</option><option value="9207">Ethiopia</option><option value="8207">Falkland Islands</option><option value="2402">Faroe Islands</option><option value="1502">Fiji</option><option value="2403">Finland</option><option value="2303">France</option><option value="9113">Gabon</option><option value="9114">Gambia</option><option value="4202">Gaza Strip and West Bank</option><option value="7204">Georgia</option><option value="2304">Germany</option><option value="9115">Ghana</option><option value="3102">Gibraltar</option><option value="3207">Greece</option><option value="2404">Greenland</option><option value="8412">Grenada</option><option value="1401">Guam</option><option value="8304">Guatemala</option><option value="2107">Guernsey</option><option value="9116">Guinea</option><option value="9117">Guinea-Bissau</option><option value="8211">Guyana</option><option value="8414">Haiti</option><option value="8305">Honduras</option><option value="6102">Hong Kong (SAR of China)</option><option value="3304">Hungary</option><option value="2405">Iceland</option><option value="7103">India</option><option value="5202">Indonesia</option><option value="4203">Iran</option><option value="4204">Iraq</option><option value="2201">Ireland</option><option value="2103">Isle of Man</option><option value="4205">Israel</option><option value="3104">Italy</option><option value="8415">Jamaica</option><option value="6201">Japan</option><option value="2108">Jersey</option><option value="4206">Jordan</option><option value="7205">Kazakhstan</option><option value="9208">Kenya</option><option value="1402">Kiribati</option><option value="6202">Korea, Democratic People's Republic of (North)</option><option value="6203">Korea, Republic of (South)</option><option value="3216">Kosovo</option><option value="4207">Kuwait</option><option value="7206">Kyrgyzstan</option><option value="5103">Laos</option><option value="3305">Latvia</option><option value="4208">Lebanon</option><option value="9211">Lesotho</option><option value="9118">Liberia</option><option value="4103">Libya</option><option value="2305">Liechtenstein</option><option value="3306">Lithuania</option><option value="2306">Luxembourg</option><option value="6103">Macau (SAR of China)</option><option value="9212">Madagascar</option><option value="9213">Malawi</option><option value="5203">Malaysia</option><option value="7104">Maldives</option><option value="9121">Mali</option><option value="3105">Malta</option><option value="1406-A">Mariana Islands</option><option value="1403">Marshall Islands</option><option value="9122">Mauritania</option><option value="9214">Mauritius</option><option value="8306">Mexico</option><option value="1404">Micronesia, Federated States of</option><option value="3208">Moldova</option><option value="2307">Monaco</option><option value="6104">Mongolia</option><option value="3214">Montenegro</option><option value="8417">Montserrat</option><option value="4104">Morocco</option><option value="9216">Mozambique</option><option value="5101">Myanmar</option><option value="9217">Namibia</option><option value="1405">Nauru</option><option value="7105">Nepal</option><option value="2308">Netherlands</option><option value="1201">New Zealand</option><option value="8307">Nicaragua</option><option value="9123">Niger</option><option value="9124">Nigeria</option><option value="3206">North Macedonia</option><option value="2104">Northern Ireland</option><option value="1406">Northern Mariana Islands</option><option value="2406">Norway</option><option value="4211">Oman</option><option value="7106">Pakistan</option><option value="1407">Palau</option><option value="4202-A">Palestine</option><option value="8308">Panama</option><option value="1302">Papua New Guinea</option><option value="8212">Paraguay</option><option value="8213">Peru</option><option value="5204">Philippines</option><option value="1513">Pitcairn Islands</option><option value="3307">Poland</option><option value="3106">Portugal</option><option value="4212">Qatar</option><option value="3211">Romania</option><option value="3308">Russian Federation</option><option value="9221">Rwanda</option><option value="1505">Samoa</option><option value="3107">San Marino</option><option value="9125">Sao Tome and Principe</option><option value="4213">Saudi Arabia</option><option value="2105">Scotland</option><option value="9126">Senegal</option><option value="3215">Serbia</option><option value="9223">Seychelles</option><option value="9127">Sierra Leone</option><option value="5205">Singapore</option><option value="3311">Slovakia</option><option value="3212">Slovenia</option><option value="1303">Solomon Islands</option><option value="9224">Somalia</option><option value="9225">South Africa</option><option value="4111">South Sudan</option><option value="3108">Spain</option><option value="7107">Sri Lanka</option><option value="8431">St Barthelemy</option><option value="9222">St Helena</option><option value="8422">St Kitts and Nevis</option><option value="8423">St Lucia</option><option value="8432">St Martin (French part)</option><option value="8424">St Vincent and the Grenadines</option><option value="4105">Sudan</option><option value="8214">Suriname</option><option value="2407">Sweden</option><option value="2311">Switzerland</option><option value="4214">Syria</option><option value="6105">Taiwan</option><option value="7207">Tajikistan</option><option value="9227">Tanzania</option><option value="5104">Thailand</option><option value="5206">Timor-Leste</option><option value="9128">Togo</option><option value="1508">Tonga</option><option value="8425">Trinidad and Tobago</option><option value="4106">Tunisia</option><option value="7208">Turkmenistan</option><option value="8426">Turks and Caicos Islands</option><option value="1511">Tuvalu</option><option value="4215">Türkiye</option><option value="9228">Uganda</option><option value="3312">Ukraine</option><option value="4216">United Arab Emirates</option><option value="8104">United States of America</option><option value="8215">Uruguay</option><option value="7211">Uzbekistan</option><option value="1304">Vanuatu</option><option value="8216">Venezuela, Bolivarian Republic of</option><option value="5105">Vietnam</option><option value="2106">Wales</option><option value="4107">Western Sahara</option><option value="4217">Yemen</option><option value="9231">Zambia</option><option value="9232">Zimbabwe</option>
									</select><div class="chosen-container chosen-container-single" title="" id="IPQ_APONCOD_chosen" tabindex="-1" style="width: 100%;"><a class="chosen-single">
  <span id="IPQ_APONCOD_chosenspan">-- Select --</span>
  <div><b></b></div>
</a>
<div class="chosen-drop">
  <div class="chosen-search">
    <input class="chosen-search-input" type="text" autocomplete="off" title="-- Select --" aria-owns="IPQ_APONCOD_ul" tabindex="0" aria-autocomplete="list" aria-label="Country of citizenship/nationality * search">
  </div>
  <ul class="chosen-results" role="listbox" tabindex="-1" aria-expanded="false" id="IPQ_APONCOD_ul" aria-busy="true" aria-label="Country of citizenship/nationality * options"></ul>
</div></div>
									<small>Your country of citizenship is also described as your nationality, and is usually the country in which you were born.</small>
									<script>
										// Set the initial value of IPQ_APONCOD
										$("#IPQ_APONCOD").val("");
										sits_chosen_widget("#IPQ_APONCOD",{});
									</script>
								</div>
							</div>
							<div class="sv-form-group" id="visa-type" style="display: none;">
								<label for="dummy_visa_type" class="sv-col-md-3 sv-control-label">Visa type *</label>
								<div class="sv-col-md-4">
									<select id="dummy_visa_type" name="dummy_visa_type" class="" style="display: none;">
										<option value="">-- Select --</option>
										<option value="D">Student</option><option value="E">Bridging</option><option value="F">Business</option><option value="G">Partner visa</option><option value="H">Tourist</option>
									</select><div class="chosen-container chosen-container-single" title="" id="dummy_visa_type_chosen" tabindex="-1" style="width: 100%;"><a class="chosen-single">
  <span id="dummy_visa_type_chosenspan">-- Select --</span>
  <div><b></b></div>
</a>
<div class="chosen-drop">
  <div class="chosen-search">
    <input class="chosen-search-input" type="text" autocomplete="off" title="-- Select --" aria-owns="dummy_visa_type_ul" tabindex="0" aria-autocomplete="list" aria-label="Visa type * search">
  </div>
  <ul class="chosen-results" role="listbox" tabindex="-1" aria-expanded="false" id="dummy_visa_type_ul" aria-busy="true" aria-label="Visa type * options"></ul>
</div></div>
									<input id="IPQ_APONAVS" name="IPQ_APONAVS" type="hidden" value="">
									<script>
										// Set the initial value of dummy_visa_type
										$("#dummy_visa_type").val("");
										$("#IPQ_APONAVS").val("");
										sits_chosen_widget("#dummy_visa_type",{});
										$('#dummy_visa_type').change(update_IPQ_APONAVS);
									</script>
								</div>
							</div>
							<div class="sv-form-group" id="visa-start-date" style="display: none;">
								<label for="IPQ_APONVSD" class="sv-col-md-3 sv-control-label">Visa start date *</label>
								<div class="sv-col-md-4">
									<div class="sv-input-group">
										<input name="IPQ_APONVSD" id="IPQ_APONVSD" class="sv-form-control hasDatepicker" type="text" value="">
										<span class="sv-input-group-addon"><img class="ui-datepicker-trigger" src="../images/si_calendar.gif" alt="..." title="..." role="button" tabindex="0"></span>
									</div>
								</div>
							</div>
							<div class="sv-form-group">
								<label for="IPQ_APONETH1" class="sv-col-md-3 sv-control-label">Are you of Australian Aboriginal or Torres Strait Islander origin? *</label>
								<div class="sv-col-md-4">
									<select id="IPQ_APONETH1" name="IPQ_APONETH1" class="" style="display: none;">
										<option value="">-- Select --</option>
										<option value="2">Neither Australian Aboriginal nor Torres Strait Islander</option><option value="3">Of Australian Aboriginal origin</option><option value="4">Of Torres Strait Islander origin</option><option value="5">Of both Australian Aboriginal and Torres Strait Islander origin</option>
									</select><div class="chosen-container chosen-container-single" title="" id="IPQ_APONETH1_chosen" tabindex="-1" style="width: 100%;"><a class="chosen-single">
  <span id="IPQ_APONETH1_chosenspan">-- Select --</span>
  <div><b></b></div>
</a>
<div class="chosen-drop">
  <div class="chosen-search">
    <input class="chosen-search-input" type="text" autocomplete="off" title="-- Select --" aria-owns="IPQ_APONETH1_ul" tabindex="0" aria-autocomplete="list" aria-label="Are you of Australian Aboriginal or Torres Strait Islander origin? * search">
  </div>
  <ul class="chosen-results" role="listbox" tabindex="-1" aria-expanded="false" id="IPQ_APONETH1_ul" aria-busy="true" aria-label="Are you of Australian Aboriginal or Torres Strait Islander origin? * options"></ul>
</div></div>
									<script>
										// Set the initial value of IPQ_APONETH1
										$("#IPQ_APONETH1").val("");
										sits_chosen_widget("#IPQ_APONETH1",{});
									</script>
								</div>
							</div>
							<div class="sv-form-group">
								<label for="IPQ_APONSSL" class="sv-col-md-3 sv-control-label">Please select the language you speak at home *</label>
								<div class="sv-col-md-4">
									<select id="IPQ_APONSSL" name="IPQ_APONSSL" class="" style="display: none;">
										<option value="">-- Select --</option>
										<option value="6513">Acehnese</option><option value="9201">Acholi</option><option value="9299">African Languages, NEC</option><option value="1403">Afrikaans</option><option value="9203">Akan</option><option value="3901">Albanian</option><option value="9101">American Languages</option><option value="9214">Amharic</option><option value="9241">Anuak</option><option value="4202">Arabic</option><option value="4901">Armenian</option><option value="3903">Aromunian (Macedo-Romanian)</option><option value="5213">Assamese</option><option value="4206">Assyrian Neo-Aramaic</option><option value="9701">Auslan</option><option value="8000">Australian Indigenous Languages</option><option value="4302">Azeri</option><option value="6514">Balinese</option><option value="4104">Balochi</option><option value="9242">Bari</option><option value="2901">Basque</option><option value="9243">Bassa</option><option value="3401">Belorussian</option><option value="9215">Bemba</option><option value="5201">Bengali</option><option value="6515">Bikol</option><option value="6501">Bisaya</option><option value="9402">Bislama</option><option value="3501">Bosnian</option><option value="3502">Bulgarian</option><option value="6101">Burmese</option><option value="6199">Burmese and Related Languages, NEC</option><option value="7101">Cantonese</option><option value="2301">Catalan</option><option value="6502">Cebuano</option><option value="1199">Celtic, NEC</option><option value="4207">Chaldean Neo-Aramaic</option><option value="6102">Chin Haka</option><option value="7199">Chinese, NEC</option><option value="3503">Croatian</option><option value="3601">Czech</option><option value="3604">Czechoslovakian, so described</option><option value="9244">Dan (Gio-Dan)</option><option value="1501">Danish</option><option value="4105">Dari</option><option value="5214">Dhivehi</option><option value="9216">Dinka</option><option value="5199">Dravidian, NEC</option><option value="1401">Dutch</option><option value="1201">English</option><option value="1601">Estonian</option><option value="9217">Ewe</option><option value="9301">Fijian</option><option value="5217">Fijian Hindustani</option><option value="6512">Filipino</option><option value="1602">Finnish</option><option value="1699">Finnish and Related Languages, NEC</option><option value="2101">French</option><option value="1402">Frisian</option><option value="9245">Fulfulde</option><option value="9218">Ga</option><option value="1101">Gaelic (Scotland)</option><option value="4902">Georgian</option><option value="1301">German</option><option value="9302">Gilbertese</option><option value="2201">Greek</option><option value="5202">Gujarati</option><option value="7102">Hakka</option><option value="9221">Harari</option><option value="9222">Hausa</option><option value="9403">Hawaiian English</option><option value="4107">Hazaraghi</option><option value="4204">Hebrew</option><option value="5203">Hindi</option><option value="6201">Hmong</option><option value="6299">Hmong-Mien, NEC</option><option value="3301">Hungarian</option><option value="6516">Iban</option><option value="2399">Iberian Romance, NEC</option><option value="1502">Icelandic</option><option value="9223">Igbo</option><option value="6503">Ilokano</option><option value="6517">Ilonggo (Hiligaynon)</option><option value="5299">Indo-Aryan, NEC</option><option value="6504">Indonesian</option><option value="9601">Invented Languages</option><option value="4199">Iranic, NEC</option><option value="1102">Irish</option><option value="2401">Italian</option><option value="7201">Japanese</option><option value="6518">Javanese</option><option value="5101">Kannada</option><option value="6103">Karen</option><option value="5215">Kashmiri</option><option value="6301">Khmer</option><option value="9224">Kikuyu</option><option value="9246">Kinyarwanda (Rwanda)</option><option value="9247">Kirundi (Rundi)</option><option value="9502">Kiwai</option><option value="5204">Konkani</option><option value="7301">Korean</option><option value="9248">Kpelle</option><option value="9251">Krahn</option><option value="9225">Krio</option><option value="4101">Kurdish</option><option value="6401">Lao</option><option value="2902">Latin</option><option value="3101">Latvian</option><option value="1302">Letzeburgish</option><option value="9252">Liberian (Liberian English)</option><option value="3102">Lithuanian</option><option value="9253">Loma (Lorma)</option><option value="9226">Luganda</option><option value="9254">Lumun (Kuku Lumun)</option><option value="9227">Luo</option><option value="3504">Macedonian</option><option value="9255">Madi</option><option value="9702">Makaton</option><option value="6505">Malay</option><option value="5102">Malayalam</option><option value="2501">Maltese</option><option value="4208">Mandaean (Mandaic)</option><option value="7104">Mandarin</option><option value="9256">Mandinka</option><option value="9257">Mann</option><option value="9303">Maori (Cook Island)</option><option value="9304">Maori (New Zealand)</option><option value="5205">Marathi</option><option value="9205">Mauritian Creole</option><option value="4299">Middle Eastern Semitic Languages, NEC</option><option value="7107">Min Nan</option><option value="6303">Mon</option><option value="6399">Mon-Khmer,  NEC</option><option value="7902">Mongolian</option><option value="9503">Motu (HiriMotu)</option><option value="9306">Nauruan</option><option value="9228">Ndebele</option><option value="5206">Nepali</option><option value="9307">Niue</option><option value="1503">Norwegian</option><option value="9231">Nuer</option><option value="9232">Nyanja (Chichewa)</option><option value="9499">Oceanic Pidgins and Creoles, NEC</option><option value="5216">Oriya</option><option value="9206">Oromo</option><option value="7999">Other Eastern Asian Languages, NEC</option><option value="3999">Other Eastern European Languages, NEC</option><option value="6999">Other Southeast Asian Languages</option><option value="5999">Other Southern Asian Languages</option><option value="2999">Other Southern European Languages, NEC</option><option value="4999">Other Southwest and Central Asian Languages, NEC</option><option value="9399">Pacific Austronesian Languages, NEC</option><option value="6521">Pampangan</option><option value="9599">Papua New Guinea Languages, NEC</option><option value="4102">Pashto</option><option value="4106">Persian (excluding Dari)</option><option value="9404">Pitcairnese</option><option value="3602">Polish</option><option value="2302">Portuguese</option><option value="5207">Punjabi</option><option value="6104">Rohingya</option><option value="3904">Romanian</option><option value="3905">Romany</option><option value="9312">Rotuman</option><option value="3402">Russian</option><option value="9308">Samoan</option><option value="1599">Scandinavian, NEC</option><option value="3505">Serbian</option><option value="3507">Serbo-Croatian/Yugoslavian, so described</option><option value="9238">Seychelles Creole</option><option value="9233">Shilluk</option><option value="9207">Shona</option><option value="9799">Sign Languages, NEC</option><option value="5208">Sindhi</option><option value="5211">Sinhalese</option><option value="3603">Slovak</option><option value="3506">Slovene</option><option value="9405">Solomon Islands Pijin</option><option value="9208">Somali</option><option value="6599">Southeast Asian Austronesian Languages, NEC</option><option value="2303">Spanish</option><option value="9211">Swahili</option><option value="1504">Swedish</option><option value="6511">Tagalog</option><option value="6499">Tai,  NEC</option><option value="5103">Tamil</option><option value="4303">Tatar</option><option value="5104">Telugu</option><option value="6507">Tetum</option><option value="6402">Thai</option><option value="9261">Themne</option><option value="7901">Tibetan</option><option value="9234">Tigre</option><option value="9235">Tigrinya</option><option value="6508">Timorese</option><option value="9504">Tok Pisin (Neomelanesian)</option><option value="9313">Tokelauan</option><option value="9311">Tongan</option><option value="9236">Tswana</option><option value="5105">Tulu</option><option value="4399">Turkic, NEC</option><option value="4301">Turkish</option><option value="4304">Turkmen</option><option value="9314">Tuvaluan</option><option value="3403">Ukrainian</option><option value="5212">Urdu</option><option value="4305">Uygur</option><option value="4306">Uzbek</option><option value="6302">Vietnamese</option><option value="1103">Welsh</option><option value="7106">Wu</option><option value="9237">Xhosa</option><option value="9315">Yapese</option><option value="1303">Yiddish</option><option value="9212">Yoruba</option><option value="9213">Zulu</option>
									</select><div class="chosen-container chosen-container-single" title="" id="IPQ_APONSSL_chosen" tabindex="-1" style="width: 100%;"><a class="chosen-single">
  <span id="IPQ_APONSSL_chosenspan">-- Select --</span>
  <div><b></b></div>
</a>
<div class="chosen-drop">
  <div class="chosen-search">
    <input class="chosen-search-input" type="text" autocomplete="off" title="-- Select --" aria-owns="IPQ_APONSSL_ul" tabindex="0" aria-autocomplete="list" aria-label="Please select the language you speak at home * search">
  </div>
  <ul class="chosen-results" role="listbox" tabindex="-1" aria-expanded="false" id="IPQ_APONSSL_ul" aria-busy="true" aria-label="Please select the language you speak at home * options"></ul>
</div></div>
				<script>
					// Set the initial value of IPQ_APONSSL
					$("#IPQ_APONSSL").val("");
					sits_chosen_widget("#IPQ_APONSSL",{});
				</script>
			</div>
		</div>
	</div>
</div>'
'''



import re
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
from forms.utils.form_utils import set_value_by_id, select_option_by_id, check_button_by_id, is_element_visible

class PersonalInfoResidency:
    def __init__(self, driver, data):
        self.driver = driver
        self.data = data

    def run(self):
        students = self.data
        driver = self.driver
        personal_info = students[-1][0]
        
        # Country of birth (required)
        birth_country = personal_info.get('birth_country', '')
        if not birth_country:
            # Default to the regular country if birth country isn't specified
            birth_country = personal_info.get('Country', 'China (Excludes SARS and Taiwan)')
        select_option_by_id(driver, "IPQ_APONCOB", birth_country)
        
        # Citizenship/residency status (required)
        residency_status = personal_info.get('residency_status', '')
        if not residency_status:
            # Default to student visa for international applications
            residency_status = 'Student visa or other temporary visa'
        select_option_by_id(driver, "IPQ_APONLNID", residency_status)
        
        # Wait for conditional fields based on residency status selection
        WebDriverWait(driver, 10).until(
            EC.presence_of_element_located((By.ID, "country-of-citizenship"))
        )
        
        # Handle fields that may appear conditionally
        # First arrival date (if visible)
        if is_element_visible(driver, "date-of-arrival-in-australia"):
            arrival_date = personal_info.get('australia_arrival_date', '01/01/2020')
            set_value_by_id(driver, "IPQ_APONEND", arrival_date)
        
        # Country of citizenship (if visible)
        if is_element_visible(driver, "country-of-citizenship"):
            citizenship = personal_info.get('citizenship_country', '')
            if not citizenship:
                citizenship = personal_info.get('Country', 'China (Excludes SARS and Taiwan)')
            select_option_by_id(driver, "IPQ_APONCOD", citizenship)
        
        # Visa type (if visible)
        if is_element_visible(driver, "visa-type"):
            visa_type = personal_info.get('visa_type', 'Student')
            select_option_by_id(driver, "dummy_visa_type", visa_type)
            
            # Visa start date (if visible)
            if is_element_visible(driver, "visa-start-date"):
                visa_start = personal_info.get('visa_start_date', '01/01/2020')
                set_value_by_id(driver, "IPQ_APONVSD", visa_start)
        
        # Aboriginal/Torres Strait Islander origin (required)
        indigenous_status = personal_info.get('indigenous_status', 'Neither Australian Aboriginal nor Torres Strait Islander')
        select_option_by_id(driver, "IPQ_APONETH1", indigenous_status)
        
        # Language spoken at home (required)
        home_language = personal_info.get('home_language', '')
        if not home_language:
            # Try to infer from country
            country = personal_info.get('Country', '').lower()
            if 'china' in country:
                home_language = 'Mandarin'
            elif 'korea' in country:
                home_language = 'Korean'
            elif 'japan' in country:
                home_language = 'Japanese'
            elif 'india' in country:
                home_language = 'Hindi'
            else:
                home_language = 'English'
        select_option_by_id(driver, "IPQ_APONSSL", home_language)
    
    # Methods removed as they're now imported from form_utils.py
