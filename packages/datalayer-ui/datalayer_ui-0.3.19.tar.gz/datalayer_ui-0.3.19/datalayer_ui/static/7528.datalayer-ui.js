"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[7528],{57528:(e,t,s)=>{s.d(t,{VU:()=>we});var n=s(85101),o=s(86141);const c=String.fromCharCode,a=(String.fromCodePoint,c(65535),/^\s*/g),r=/([A-Z])/g,i=(e,t)=>(e=>e.replace(a,""))(e.replace(r,(e=>`${t}${(e=>e.toLowerCase())(e)}`))),l="undefined"!=typeof TextEncoder?new TextEncoder:null,d=l?e=>l.encode(e):e=>{const t=unescape(encodeURIComponent(e)),s=t.length,n=new Uint8Array(s);for(let e=0;e<s;e++)n[e]=t.codePointAt(e);return n};let h="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});h&&1===h.decode(new Uint8Array).length&&(h=null);let u=new class{constructor(){this.map=new Map}setItem(e,t){this.map.set(e,t)}getItem(e){return this.map.get(e)}},f=!0;try{"undefined"!=typeof localStorage&&localStorage&&(u=localStorage,f=!1)}catch(e){}const p=u;var g=s(45700),w=s(24821);const b=void 0!==w&&w.release&&/node|io\.js/.test(w.release.name)&&"[object process]"===Object.prototype.toString.call(void 0!==w?w:0),m="undefined"!=typeof window&&"undefined"!=typeof document&&!b;let y;"undefined"!=typeof navigator&&/Mac/.test(navigator.platform);const v=[],I=e=>(()=>{if(void 0===y)if(b){y=n.Ue();const e=w.argv;let t=null;for(let s=0;s<e.length;s++){const n=e[s];"-"===n[0]?(null!==t&&y.set(t,""),t=n):null!==t?(y.set(t,n),t=null):v.push(n)}null!==t&&y.set(t,"")}else"object"==typeof location?(y=n.Ue(),(location.search||"?").slice(1).split("&").forEach((e=>{if(0!==e.length){const[t,s]=e.split("=");y.set(`--${i(t,"-")}`,s),y.set(`-${i(t,"-")}`,s)}}))):y=n.Ue();return y})().has(e),U=e=>{return void 0===(t=b?w.env[e.toUpperCase().replaceAll("-","_")]:p.getItem(e))?null:t;var t},_=e=>I("--"+e)||null!==U(e),C=(_("production"),b&&g.gB(w.env.FORCE_COLOR,["true","1","2"])||!I("--no-colors")&&!_("no-color")&&(!b||w.stdout.isTTY)&&(!b||I("--color")||null!==U("COLORTERM")||(U("TERM")||"").includes("color")),e=>new Uint8Array(e)),S=m?e=>{let t="";for(let s=0;s<e.byteLength;s++)t+=c(e[s]);return btoa(t)}:e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),k=m?e=>{const t=atob(e),s=C(t.length);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);return s}:e=>{const t=Buffer.from(e,"base64");return s=t.buffer,n=t.byteOffset,o=t.byteLength,new Uint8Array(s,n,o);var s,n,o},L=new Map,A="undefined"==typeof BroadcastChannel?class{constructor(e){var t;this.room=e,this.onmessage=null,this._onChange=t=>t.key===e&&null!==this.onmessage&&this.onmessage({data:k(t.newValue||"")}),t=this._onChange,f||addEventListener("storage",t)}postMessage(e){p.setItem(this.room,S(new Uint8Array(e)))}close(){var e;e=this._onChange,f||removeEventListener("storage",e)}}:BroadcastChannel,E=e=>n.Yu(L,e,(()=>{const t=o.Ue(),s=new A(e);return s.onmessage=e=>t.forEach((t=>t(e.data,"broadcastchannel"))),{bc:s,subs:t}})),R=(e,t,s=null)=>{const n=E(e);n.bc.postMessage(t),n.subs.forEach((e=>e(t,s)))};var B=s(57515),D=s(30433);const M=127;class H{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const T=()=>new H,N=e=>{let t=e.cpos;for(let s=0;s<e.bufs.length;s++)t+=e.bufs[s].length;return t},O=e=>{const t=new Uint8Array(N(e));let s=0;for(let n=0;n<e.bufs.length;n++){const o=e.bufs[n];t.set(o,s),s+=o.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),s),t},x=(e,t)=>{const s=e.cbuf.length;e.cpos===s&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(2*s),e.cpos=0),e.cbuf[e.cpos++]=t},G=(e,t)=>{for(;t>M;)x(e,128|M&t),t=D.GW(t/128);x(e,M&t)},P=new Uint8Array(3e4),$=P.length/3,Z=l&&l.encodeInto?(e,t)=>{if(t.length<$){const s=l.encodeInto(t,P).written||0;G(e,s);for(let t=0;t<s;t++)x(e,P[t])}else V(e,d(t))}:(e,t)=>{const s=unescape(encodeURIComponent(t)),n=s.length;G(e,n);for(let t=0;t<n;t++)x(e,s.codePointAt(t))},V=(e,t)=>{G(e,t.byteLength),((e,t)=>{const s=e.cbuf.length,n=e.cpos,o=D.VV(s-n,t.length),c=t.length-o;e.cbuf.set(t.subarray(0,o),n),e.cpos+=o,c>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(D.Fp(2*s,c)),e.cbuf.set(t.subarray(o)),e.cpos=c)})(e,t)};new DataView(new ArrayBuffer(4));const W=Number.MAX_SAFE_INTEGER,j=(Number.MIN_SAFE_INTEGER,Number.isInteger,Number.isNaN,Number.parseInt,e=>new Error(e)),F=j("Unexpected end of array"),J=j("Integer out of Range");class Y{constructor(e){this.arr=e,this.pos=0}}const z=e=>new Y(e),Q=e=>((e,t)=>{const s=new Uint8Array(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,s})(e,q(e)),X=e=>e.arr[e.pos++],q=e=>{let t=0,s=1;const n=e.arr.length;for(;e.pos<n;){const n=e.arr[e.pos++];if(t+=(n&M)*s,s*=128,n<128)return t;if(t>W)throw J}throw F},K=h?e=>h.decode(Q(e)):e=>{let t=q(e);if(0===t)return"";{let s=String.fromCodePoint(X(e));if(--t<100)for(;t--;)s+=String.fromCodePoint(X(e));else for(;t>0;){const n=t<1e4?t:1e4,o=e.arr.subarray(e.pos,e.pos+n);e.pos+=n,s+=String.fromCodePoint.apply(null,o),t-=n}return decodeURIComponent(escape(s))}};var ee=s(78364);const te=(e,t)=>{G(e,0);const s=ee.gJ(t);V(e,s)},se=(e,t,s)=>{G(e,1),V(e,ee.D$(t,s))},ne=(e,t,s)=>{try{ee.NG(t,Q(e),s)}catch(e){console.error("Caught error while handling a Yjs update",e)}},oe=ne;var ce=s(65556);class ae extends ce.y{constructor(e){super(),this.doc=e,this.clientID=e.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval((()=>{const e=B.ZG();null!==this.getLocalState()&&15e3<=e-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const t=[];this.meta.forEach(((s,n)=>{n!==this.clientID&&3e4<=e-s.lastUpdated&&this.states.has(n)&&t.push(n)})),t.length>0&&re(this,t,"timeout")}),D.GW(3e3)),e.on("destroy",(()=>{this.destroy()})),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(e){const t=this.clientID,s=this.meta.get(t),n=void 0===s?0:s.clock+1,o=this.states.get(t);null===e?this.states.delete(t):this.states.set(t,e),this.meta.set(t,{clock:n,lastUpdated:B.ZG()});const c=[],a=[],r=[],i=[];null===e?i.push(t):null==o?null!=e&&c.push(t):(a.push(t),g.Hi(o,e)||r.push(t)),(c.length>0||r.length>0||i.length>0)&&this.emit("change",[{added:c,updated:r,removed:i},"local"]),this.emit("update",[{added:c,updated:a,removed:i},"local"])}setLocalStateField(e,t){const s=this.getLocalState();null!==s&&this.setLocalState({...s,[e]:t})}getStates(){return this.states}}const re=(e,t,s)=>{const n=[];for(let s=0;s<t.length;s++){const o=t[s];if(e.states.has(o)){if(e.states.delete(o),o===e.clientID){const t=e.meta.get(o);e.meta.set(o,{clock:t.clock+1,lastUpdated:B.ZG()})}n.push(o)}}n.length>0&&(e.emit("change",[{added:[],updated:[],removed:n},s]),e.emit("update",[{added:[],updated:[],removed:n},s]))},ie=(e,t,s=e.states)=>{const n=t.length,o=T();G(o,n);for(let c=0;c<n;c++){const n=t[c],a=s.get(n)||null,r=e.meta.get(n).clock;G(o,n),G(o,r),Z(o,JSON.stringify(a))}return O(o)};var le=s(81863),de=s(24821);const he=[];he[0]=(e,t,s,n,o)=>{G(e,0);const c=((e,t,s,n)=>{const o=q(e);switch(o){case 0:((e,t,s)=>{se(t,s,Q(e))})(e,t,s);break;case 1:ne(e,s,n);break;case 2:oe(e,s,n);break;default:throw new Error("Unknown message type")}return o})(t,e,s.doc,s);n&&1===c&&!s.synced&&(s.synced=!0)},he[3]=(e,t,s,n,o)=>{G(e,1),V(e,ie(s.awareness,Array.from(s.awareness.getStates().keys())))},he[1]=(e,t,s,n,o)=>{((e,t,s)=>{const n=z(t),o=B.ZG(),c=[],a=[],r=[],i=[],l=q(n);for(let t=0;t<l;t++){const t=q(n);let s=q(n);const l=JSON.parse(K(n)),d=e.meta.get(t),h=e.states.get(t),u=void 0===d?0:d.clock;(u<s||u===s&&null===l&&e.states.has(t))&&(null===l?t===e.clientID&&null!=e.getLocalState()?s++:e.states.delete(t):e.states.set(t,l),e.meta.set(t,{clock:s,lastUpdated:o}),void 0===d&&null!==l?c.push(t):void 0!==d&&null===l?i.push(t):null!==l&&(g.Hi(l,h)||r.push(t),a.push(t)))}(c.length>0||r.length>0||i.length>0)&&e.emit("change",[{added:c,updated:r,removed:i},s]),(c.length>0||a.length>0||i.length>0)&&e.emit("update",[{added:c,updated:a,removed:i},s])})(s.awareness,Q(t),s)},he[2]=(e,t,s,n,o)=>{((e,t,s)=>{0===q(e)&&s(0,K(e))})(t,s.doc,((e,t)=>ue(s,t)))};const ue=(e,t)=>console.warn(`Permission denied to access ${e.url}.\n${t}`),fe=(e,t,s)=>{const n=z(t),o=T(),c=q(n),a=e.messageHandlers[c];return a?a(o,n,e,s,c):console.error("Unable to compute message"),o},pe=e=>{if(e.shouldConnect&&null===e.ws){const t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=s=>{e.wsLastMessageReceived=B.ZG();const n=fe(e,new Uint8Array(s.data),!0);N(n)>1&&t.send(O(n))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=t=>{e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,re(e.awareness,Array.from(e.awareness.getStates().keys()).filter((t=>t!==e.doc.clientID)),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(pe,D.VV(100*D.sQ(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e)},t.onopen=()=>{e.wsLastMessageReceived=B.ZG(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const s=T();if(G(s,0),te(s,e.doc),t.send(O(s)),null!==e.awareness.getLocalState()){const s=T();G(s,1),V(s,ie(e.awareness,[e.doc.clientID])),t.send(O(s))}},e.emit("status",[{status:"connecting"}])}},ge=(e,t)=>{e.wsconnected&&e.ws.send(t),e.bcconnected&&R(e.bcChannel,t,e)};class we extends ce.y{constructor(e,t,s,{connect:n=!0,awareness:o=new ae(s),params:c={},WebSocketPolyfill:a=WebSocket,resyncInterval:r=-1,maxBackoffTime:i=2500,disableBc:l=!1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);const d=(e=>le.UI(e,((e,t)=>`${encodeURIComponent(t)}=${encodeURIComponent(e)}`)).join("&"))(c);this.maxBackoffTime=i,this.bcChannel=e+"/"+t,this.url=e+"/"+t+(0===d.length?"":"?"+d),this.roomname=t,this.doc=s,this._WS=a,this.awareness=o,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=l,this.wsUnsuccessfulReconnects=0,this.messageHandlers=he.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=n,this._resyncInterval=0,r>0&&(this._resyncInterval=setInterval((()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const e=T();G(e,0),te(e,s),this.ws.send(O(e))}}),r)),this._bcSubscriber=(e,t)=>{if(t!==this){const t=fe(this,new Uint8Array(e),!1);N(t)>1&&R(this.bcChannel,O(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){const t=T();G(t,0),((e,t)=>{G(e,2),V(e,t)})(t,e),ge(this,O(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:e,updated:t,removed:s},n)=>{const c=e.concat(t).concat(s),a=T();G(a,1),V(a,ie(o,c)),ge(this,O(a))},this._unloadHandler=()=>{re(this.awareness,[s.clientID],"window unload")},"undefined"!=typeof window?window.addEventListener("unload",this._unloadHandler):void 0!==de&&de.on("exit",this._unloadHandler),o.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval((()=>{this.wsconnected&&3e4<B.ZG()-this.wsLastMessageReceived&&this.ws.close()}),3e3),n&&this.connect()}get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),"undefined"!=typeof window?window.removeEventListener("unload",this._unloadHandler):void 0!==de&&de.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;var e,t;this.bcconnected||(e=this.bcChannel,t=this._bcSubscriber,E(e).subs.add(t),this.bcconnected=!0);const s=T();G(s,0),te(s,this.doc),R(this.bcChannel,O(s),this);const n=T();G(n,0),se(n,this.doc),R(this.bcChannel,O(n),this);const o=T();G(o,3),R(this.bcChannel,O(o),this);const c=T();G(c,1),V(c,ie(this.awareness,[this.doc.clientID])),R(this.bcChannel,O(c),this)}disconnectBc(){const e=T();G(e,1),V(e,ie(this.awareness,[this.doc.clientID],new Map)),ge(this,O(e)),this.bcconnected&&(((e,t)=>{const s=E(e);s.subs.delete(t)&&0===s.subs.size&&(s.bc.close(),L.delete(e))})(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(pe(this),this.connectBc())}}}}]);