"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[7546],{68064:(e,t,s)=>{s.r(t),s.d(t,{ExerciseEdit:()=>O,default:()=>D});var i=s(16909),r=s(97663),n=s(88625),a=s(15358),o=s(82176),l=s(34166),d=s(23363),u=s(68110),c=s(44860),h=s(79424),p=s(88567),m=s(76411),g=s(56143),x=s(17154),j=s(43275),f=s(98403),b=s(52925),w=s(63613),Z=s(85730),y=s(45741),v=s(68495),_=s(35928),k=s(1213),C=s(19459),S=s(31319),E=s(47011);const O=()=>{const{accountHandle:e,spaceHandle:t,exerciseId:s}=(0,r.UO)();if(!s)return(0,E.jsx)(E.Fragment,{});const O=(0,Z.a)(),{kernelManager:D,defaultKernel:T}=(0,f.W$)(),P=(0,C.qX)(),W=((0,S.Ae)(),(0,b.gQ)()),z=P.layout().organization,M=P.layout().space,V=(0,i.useMemo)((()=>T),[D]),{cloneExercise:I,getExercise:R,getSpaceDatasets:$,refreshExercise:L,refreshSpaceDatasets:N,updateExercise:A}=(0,y.Y)(),[q,B]=(0,i.useState)($()),J=W.outputs?.get("exercise-pre")?.input,U=W.outputs?.get("exercise-solution")?.input,F=W.outputs?.get("exercise-question")?.input,H=W.outputs?.get("exercise-test")?.input,K=(0,n.N)(),[Q,Y]=(0,i.useState)(!1),X=(0,v.s)(),{enqueueToast:G}=(0,_.p)(),[ee,te]=(0,i.useState)();(0,i.useEffect)((()=>{L(s).then((e=>{if(e.success){const e=R(s);e?(te(e),P.layout().setItem(e),ie((t=>({...t,name:e.name,description:e.description,help:e.help})))):X("/")}}))}),[s]),(0,i.useEffect)((()=>{M&&N(M,z).then((e=>{e.success&&B($())}))}),[M]);const[se,ie]=(0,i.useState)({name:"",description:"",help:'Use the assignment operator "=" to create the variable "x".'}),[re,ne]=(0,i.useState)({name:!1,description:!1,help:!0});(0,i.useEffect)((()=>{ne({...re,name:se.name.length>2,description:se.description.length>2})}),[se]);const ae=(0,i.useCallback)((async e=>{K({title:"Are you sure?",content:"Please confirm you want to clone this exercise in your private library."}).then((e=>{e&&I(s).then((e=>{e.success&&(G(e.message,{variant:"success"}),P.layout().triggerItemsRefresh(),X(`/${O?.handle}/library/exercises`))}))}))}),[K,ee]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(a.m,{children:(0,E.jsxs)(o.Z,{display:"flex",children:[(0,E.jsx)(o.Z,{flex:1,children:(0,E.jsx)(l.Z,{sx:{fontSize:3},children:"Exercise editor"})}),(0,E.jsx)(o.Z,{children:(0,E.jsxs)(d.Z,{children:[(0,E.jsx)(u.r,{variant:"default",size:"small",onClick:()=>X(`/${e}/${t}/exercises/${ee?.id}/take`),children:"Take this exercise"}),M&&(0,E.jsx)(u.r,{variant:"default",size:"small",leadingVisual:j.jcu,onClick:ae,children:"Clone"})]})})]})}),ee&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)(o.Z,{children:[(0,E.jsxs)(o.Z,{sx:{label:{marginTop:2}},children:[(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(c.Z.Label,{children:"Name"}),(0,E.jsx)(h.Z,{block:!0,value:se.name,onChange:e=>{ie((t=>({...t,name:e.target.value})))}}),!re.name&&(0,E.jsx)(c.Z.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(c.Z.Label,{children:"Description"}),(0,E.jsx)(p.ZP,{block:!0,value:se.description,onChange:e=>{ie((t=>({...t,description:e.target.value})))}}),!re.description&&(0,E.jsx)(c.Z.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,E.jsxs)(o.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",sx:{gap:3},children:[(0,E.jsxs)(o.Z,{children:[(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(c.Z.Label,{children:"Preliminary code"}),(0,E.jsx)(c.Z.Caption,{children:"This is the preliminary code that will be run before the exercise is taken."})]}),(0,E.jsx)(w.r,{showEditor:!0,autoRun:!0,kernel:V,code:ee.codePre,id:"exercise-pre"})]}),(0,E.jsxs)(o.Z,{children:[(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(c.Z.Label,{children:"Datasets"}),(0,E.jsx)(c.Z.Caption,{children:"Select the datasets to be used in the prelimary code."})]}),(0,E.jsx)(m.S,{showDividers:!0,role:"listbox","aria-label":"Select assignees",children:q.map((e=>(0,E.jsxs)(m.S.Item,{role:"option",onClick:t=>{t.preventDefault(),W.setDataset("exercise-pre",e)},children:[(0,E.jsx)(m.S.LeadingVisual,{children:(0,E.jsx)(j.VHe,{})}),e.name,(0,E.jsxs)(m.S.Description,{children:[e.mimeType," ",(0,k.A)(e.description)]})]},e.id)))})]})]}),(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(c.Z.Label,{children:"Solution Code"}),(0,E.jsx)(c.Z.Caption,{children:"This is the expected solution code. The student will never see this content."})]}),(0,E.jsx)(w.r,{showEditor:!0,autoRun:!0,kernel:V,id:"exercise-solution",code:ee.codeSolution}),(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(c.Z.Label,{children:"Question code"}),(0,E.jsx)(c.Z.Caption,{children:"This the question code that will be shown to the student."})]}),(0,E.jsx)(w.r,{showEditor:!0,autoRun:!1,kernel:V,id:"exercise-question",code:ee.codeQuestion}),(0,E.jsx)(o.Z,{children:(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(c.Z.Label,{children:"Help for the student"}),(0,E.jsx)(c.Z.Caption,{children:"This a help that will be shown to the student if he asks for it."}),(0,E.jsx)(p.ZP,{block:!0,value:se.help,onChange:e=>{ie((t=>({...t,help:e.target.value})))}}),!re.help&&(0,E.jsx)(c.Z.Validation,{variant:"error",children:"Hint must have more than 2 characters"})]})}),(0,E.jsxs)(c.Z,{children:[(0,E.jsx)(c.Z.Label,{children:"Test the Solution code"}),(0,E.jsxs)(c.Z.Caption,{children:["Write the test code that will be run on the student's code during the exercise. Please refer to the ",(0,E.jsx)(g.Z,{href:"https://nbgrader.readthedocs.io/en/latest/user_guide/autograding_resources.html",target:"_blank",children:"nbgrader"})," documentation."]})]}),(0,E.jsx)(w.r,{showEditor:!0,autoRun:!1,disableRun:!0,kernel:V,id:"exercise-test",code:ee.codeTest})]}),(0,E.jsx)(x.Z,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:'Validate you tests with this button. It will run the "Preliminary code", then will run the "Test code" on the "Solution code". When a student will take the exercise, the "Test code" will be run on the "Student code".'}),(0,E.jsx)(u.r,{variant:"danger",leadingVisual:j.Zi2,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),W.setExecuteRequest("exercise-test",`\nsetup_state(stu_code = """${ee.codePre}\n${F}""", sol_code = """${ee.codePre}\n${U}""")\n${H}\n`)},children:"Test"}),(0,E.jsx)(x.Z,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"Once you are confident with your test, you can create the exercise. Don't worry, you can still update it before making it public."}),(0,E.jsx)(u.r,{variant:"primary",disabled:!re.name||!re.description,sx:{marginTop:2},onClick:async()=>{A({id:ee?.id,name:se.name,description:se.description,help:se.help,codePre:J??"",codeSolution:U??"",codeQuestion:F??"",codeTest:H??""}).then((e=>{e.success&&(G("The exercise is successfully updated.",{variant:"success"}),P.layout().triggerItemsRefresh())}))},children:"Update exercise"})]}),(0,E.jsxs)(o.Z,{children:[(0,E.jsx)(l.Z,{as:"h2",sx:{fontSize:4,fontWeight:"normal",color:"danger.fg",mb:2},children:"Danger zone"}),(0,E.jsxs)(o.Z,{sx:{border:"1px solid",borderColor:"danger.emphasis",borderRadius:2,p:3,display:"flex",alignItems:"center",justifyContent:"space-between",gap:3},children:[(0,E.jsxs)(o.Z,{sx:{display:"grid",gap:1},children:[(0,E.jsx)(x.Z,{sx:{fontSize:1,fontWeight:"bold",color:"danger.fg"},children:"Delete exercise"}),(0,E.jsx)(x.Z,{sx:{fontSize:1,color:"fg.muted"},children:"Are you sure you don't want to just upgrade your account?"})]}),(0,E.jsx)(u.r,{variant:"danger",onClick:e=>Y(!0),disabled:!0,children:"Delete exercise"})]})]})]})]})},D=O},42159:(e,t,s)=>{s.r(t),s.d(t,{OutputModel:()=>h,OutputView:()=>p});var i=s(9494),r=s(97003),n=s(65093),a=s(76640),o=s(96133),l=s.n(o),d=s(47692),u=s.n(d),c=s(96809);u()(c.Z,{insert:"head",singleton:!1}),c.Z.locals;class h extends i.Ms{defaults(){return Object.assign(Object.assign({},super.defaults()),{msg_id:"",outputs:[]})}initialize(e,t){super.initialize(e,t),this._outputs=new n.n({trusted:!0}),this.listenTo(this,"change:outputs",this.setOutputs),this.setOutputs()}get outputs(){return this._outputs}clear_output(e=!1){this._outputs.clear(e)}setOutputs(e,t,s){s&&s.newMessage||(this.clear_output(),this._outputs.fromJSON(JSON.parse(JSON.stringify(this.get("outputs")))))}}class p extends i.KK{_createElement(e){return this.luminoWidget=new r.JupyterLuminoPanelWidget({view:this}),this.luminoWidget.node}_setElement(e){if(this.el||e!==this.luminoWidget.node)throw new Error("Cannot reset the DOM element.");this.el=this.luminoWidget.node,this.$el=l()(this.luminoWidget.node)}render(){super.render(),this._outputView=new a.FJ({rendermime:this.model.widget_manager.renderMime,model:this.model.outputs}),this.luminoWidget.insertWidget(0,this._outputView),this.luminoWidget.addClass("jupyter-widgets"),this.luminoWidget.addClass("widget-output"),this.update()}remove(){return this._outputView.dispose(),super.remove()}}},9494:(e,t,s)=>{s.d(t,{u:()=>r,Ms:()=>n,KK:()=>a});var i=s(97003);const r="1.0.0";class n extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:"OutputModel",_view_name:"OutputView",_model_module:"@jupyter-widgets/output",_view_module:"@jupyter-widgets/output",_model_module_version:r,_view_module_version:r})}}class a extends i.DOMWidgetView{}},69527:(e,t,s)=>{s.d(t,{k:()=>m});var i=s(16909),r=s(46830),n=s(74228),a=s(10866),o=s(17780);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)({}).hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},l.apply(null,arguments)}const d=(0,r.F4)(["from{mask-position:200%;}to{mask-position:0%;}"]),u=r.ZP.span.withConfig({displayName:"ProgressBar__Item",componentId:"sc-1jz8j7n-0"})(["width:",";background-color:",";@media (prefers-reduced-motion:no-preference){&[data-animated='true']{mask-image:linear-gradient(75deg,#000 30%,rgba(0,0,0,0.65) 80%);mask-size:200%;animation:",";animation-duration:1s;animation-iteration-count:infinite;}}",";"],(e=>e.progress?`${e.progress}%`:0),(0,a.U2)("colors.success.emphasis"),d,o.Z);u.displayName="ProgressBar.Item";const c={small:"5px",large:"10px",default:"8px"},h=r.ZP.span.withConfig({displayName:"ProgressBar__ProgressContainer",componentId:"sc-1jz8j7n-1"})(["display:",";overflow:hidden;background-color:",";border-radius:",";height:",";"," ",";"],(e=>e.inline?"inline-flex":"flex"),(0,a.U2)("colors.border.default"),(0,a.U2)("radii.1"),(e=>c[e.barSize||"default"]),n.width,o.Z),p=(0,i.forwardRef)((({animated:e,progress:t,bg:s="success.emphasis",barSize:r="default",children:n,...a},o)=>{if(n&&t)throw new Error("You should pass `progress` or children, not both.");const d="string"==typeof t?parseInt(t,10):t,c={"aria-valuenow":d?Math.round(d):void 0,"aria-valuemin":0,"aria-valuemax":100,"aria-busy":!!d&&100!==d};return i.createElement(h,l({ref:o,role:"progressbar",barSize:r},c,a),null!=n?n:i.createElement(u,{"data-animated":e,progress:t,sx:{backgroundColor:s}}))}));p.displayName="ProgressBar";const m=Object.assign(p,{Item:u})},96809:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(41145),r=s.n(i),n=s(12410),a=s.n(n)()(r());a.push([e.id,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\n\n/* <DEPRECATED> */\n.jupyter-widgets.widget-output .jp-OutputArea-prompt, /* <DEPRECATED> */\n.jupyter-widgets.jupyter-widget-output .jp-OutputArea-prompt {\n  display: none;\n}\n",""]);const o=a}}]);