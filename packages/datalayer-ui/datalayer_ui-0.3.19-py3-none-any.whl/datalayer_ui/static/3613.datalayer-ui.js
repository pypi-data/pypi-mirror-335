"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[3613],{63613:(e,t,r)=>{r.d(t,{r:()=>x});var s=r(47011),i=r(70994),n=r(16909),o=r(94910),a=r(98403),_=r(82628),c=r(69527);const l=()=>{const[e,t]=(0,n.useState)(0);return(0,n.useEffect)((()=>{const e=setInterval((()=>{t((e=>{let t=e+1;return t>100&&(t=0),t}))}),100);return()=>clearInterval(e)}),[]),(0,s.jsx)(c.k,{progress:e,barSize:"small"})};var d=r(9521),u=r(55113),p=r(51582),h=r(34441);const m={small:16,medium:32,large:64};function g({title:e,titleId:t,size:r,colored:s,...i},o){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:r?"string"==typeof r?m[r]:r:"16px",ref:o,"aria-labelledby":t},i),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fill:s?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",fillRule:"evenodd",d:"M18.364 3.058a.75.75 0 01.75.75V8.05a.75.75 0 01-.75.75h-4.243a.75.75 0 010-1.5h2.36a7.251 7.251 0 102.523 3.822.75.75 0 111.45-.387 8.75 8.75 0 11-2.84-4.447v-2.48a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const w=n.forwardRef(g),y=e=>{const{kernel:t,outputAdapter:r}=e;return(0,s.jsxs)(d.P,{children:[(0,s.jsx)(d.P.Anchor,{children:(0,s.jsx)(u.h,{"aria-labelledby":"",icon:h.Ui8,variant:"invisible"})}),(0,s.jsx)(d.P.Overlay,{children:(0,s.jsxs)(p.S,{children:[t&&(0,s.jsxs)(p.S.Item,{onSelect:e=>{t.interrupt()},children:[(0,s.jsx)(p.S.LeadingVisual,{children:(0,s.jsx)(h.wNq,{})}),"Interrupt kernel"]}),t&&(0,s.jsxs)(p.S.Item,{onSelect:e=>{t.restart()},children:[(0,s.jsx)(p.S.LeadingVisual,{children:(0,s.jsx)(w,{})}),"Restart kernel"]}),r&&(0,s.jsxs)(p.S.Item,{variant:"danger",onSelect:e=>{r.clear()},children:[(0,s.jsx)(p.S.LeadingVisual,{children:(0,s.jsx)(h.vib,{})}),"Clear outputs"]})]})})]})};var E=r(72909);const f=e=>{const{output:t}=e;let r,i,n;switch(t.output_type){case"error":r=t.traceback.join("\n");break;case"stream":{const e=t.text;r="string"==typeof e?e:"boolean"==typeof e?e?"true":"false":Array.isArray(e)?e.join("\n"):e?.toString();break}case"display_data":{const e=t.data;if(e){const t=e["image/png"];t&&(n=t)}break}case"execute_result":{const e=t.data;if(e){const t=e["text/plain"];t&&(r="string"==typeof t?t:Array.isArray(t)?t.join("\n"):t.toString());const s=e["text/html"];s&&(i="string"==typeof s?s:s.join("\n"))}break}}return(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsx)("pre",{style:{color:"black",backgroundColor:"white"},children:r}),i&&(0,s.jsx)("div",{children:(0,s.jsx)("div",{dangerouslySetInnerHTML:{__html:i}})}),n&&(0,s.jsx)("div",{children:(0,s.jsx)("img",{src:`data:image/png;base64,${n}`})})]})};var j=r(52925);const x=e=>{const{defaultKernel:t}=(0,a.W$)(),r=(0,j.gQ)(),{adapter:c,autoRun:d,clearTrigger:u,code:p,executeTrigger:h,kernel:m,lumino:g,model:w,outputs:x,receipt:b,showControl:O,showEditor:P,showKernelProgressBar:C=!0,suppressCodeExecutionErrors:v=!1,onExecutionPhaseChanged:M,id:A}=e,k=m??t,[R,D]=(0,n.useState)(A),[T,I]=(0,n.useState)("unknown"),[L,W]=(0,n.useState)(x),[$,S]=(0,n.useState)();(0,n.useEffect)((()=>{R||D((0,_.ZI)())}),[]),(0,n.useEffect)((()=>{const e=(e,t)=>{W(e.toJSON()),R&&r.setModel(R,e)},t=(e,t)=>{b&&"add"===t.type&&t.newValues.map((e=>{if(e&&e.data){const t=e.data["text/html"];t&&t.indexOf(b)>-1&&r.setGradeSuccess(A,!0)}}))};if(R&&k){const s=c??new E.r(R,k,L??[],w,v);S(s),r.setAdapter(R,s),w&&r.setModel(R,w),p&&r.setInput(R,p),s.outputArea.model.changed.connect(e),b&&s.outputArea.model.changed.connect(t)}return()=>{$&&($.outputArea.model.changed.disconnect(e),$.outputArea.model.changed.disconnect(t))}}),[R,k]),(0,n.useEffect)((()=>{$&&d&&$.execute(p,M)}),[$]),(0,n.useEffect)((()=>{if(k)return k.ready.then((()=>{I(k.connection.status),k.connection.statusChanged.connect(((e,t)=>{I(t)}))})),()=>{}}),[k]);const F=r.getExecuteRequest(A);return(0,n.useEffect)((()=>{$&&F&&F===R&&$.execute(p,M)}),[F,$]),(0,n.useEffect)((()=>{$&&h>0&&$.execute(p,M)}),[h]),(0,n.useEffect)((()=>{$&&u>0&&$.clear()}),[u,$]),(0,s.jsxs)(s.Fragment,{children:[P&&$&&R&&(0,s.jsx)(i.Z,{sx:{"& .cm-editor":{borderRadius:"5px"}}}),$&&(0,s.jsxs)(i.Z,{display:"flex",children:[(0,s.jsx)(i.Z,{flexGrow:1,children:"idle"!==T&&C&&(0,s.jsx)(l,{})}),O&&(0,s.jsx)(i.Z,{style:{marginTop:"-13px"},children:(0,s.jsx)(y,{kernel:k,outputAdapter:$})})]}),L&&(0,s.jsx)(i.Z,{sx:{"& .jp-OutputArea":{fontSize:"10px"},"& .jp-OutputPrompt":{},"& .jp-OutputArea-prompt":{display:"none"},"& pre":{fontSize:"12px",wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"}},children:g?$&&(0,s.jsx)(o.Y,{children:$.outputArea}):L&&(0,s.jsx)(s.Fragment,{children:L.map((e=>(0,s.jsx)(f,{output:e})))})})]})};x.defaultProps={autoRun:!1,clearTrigger:0,disableRun:!1,executeTrigger:0,showControl:!0,lumino:!0,outputs:[{output_type:"execute_result",data:{"text/html":["<p>Type code in the cell and Shift+Enter to execute.</p>"]},execution_count:0,metadata:{}}],notifyOnComplete:!1,toolbarPosition:"up"}},72909:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>OutputAdapter});var _jupyterlab_javascript_extension__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(68311),_jupyterlab_json_extension__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81392),_jupyterlab_outputarea__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(65093),_jupyterlab_outputarea__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(76640),_jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(37371),_jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4632),_jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(35348),_jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(80601),_jupyter_ipywidgets_libembed_amd__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(11982),_OutputExecutor__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(38465);class OutputAdapter{_id;_kernel;_renderers;_outputArea;_rendermime;_iPyWidgetsManager;_suppressCodeExecutionErrors;constructor(id,kernel,outputs,outputAreaModel,suppressCodeExecutionErrors=!1){this._id=id,this._kernel=kernel,this._suppressCodeExecutionErrors=suppressCodeExecutionErrors,this._renderers=_jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__.Nf.filter((e=>"text/javascript"!==e.mimeTypes[0])),this._renderers.push(_jupyterlab_json_extension__WEBPACK_IMPORTED_MODULE_1__.rendererFactory),this._renderers.push(_jupyterlab_javascript_extension__WEBPACK_IMPORTED_MODULE_2__.rendererFactory),this._rendermime=new _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_3__.D({initialFactories:this._renderers}),this._iPyWidgetsManager=new _jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_4__.U({loader:_jupyter_ipywidgets_libembed_amd__WEBPACK_IMPORTED_MODULE_5__.V}),this._rendermime.addFactory({safe:!1,mimeTypes:[_jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_6__.w],createRenderer:e=>new _jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_6__.Z(e,this._iPyWidgetsManager)},0);const model=outputAreaModel??new _jupyterlab_outputarea__WEBPACK_IMPORTED_MODULE_7__.n({trusted:!0,values:outputs});if(this._outputArea=new _jupyterlab_outputarea__WEBPACK_IMPORTED_MODULE_8__.FJ({model,rendermime:this._rendermime}),outputs&&outputs[0]){const data=outputs[0].data;if(data){const isPlotly=data["application/vnd.plotly.v1+json"];if(isPlotly){let script=this._outputArea.node.children[0].children[1].children[0].children[1].innerHTML;script=script.replaceAll("\n,","\n"),eval(script)}}}this.initKernel()}async execute(e,t){if(this._kernel){this.clear();const r={},s=(0,_OutputExecutor__WEBPACK_IMPORTED_MODULE_9__.h)(this._id,e,this._outputArea,this._kernel,r,this._suppressCodeExecutionErrors,t);await s}}interrupt(){this._kernel&&this._kernel.interrupt()}clear(){this._outputArea.model.clear()}get kernel(){return this._kernel}set kernel(e){this._kernel=e,this.initKernel()}get outputArea(){return this._outputArea}initKernel(){this._kernel&&this._iPyWidgetsManager.registerWithKernel(this._kernel.connection)}}var __WEBPACK_DEFAULT_EXPORT__=OutputAdapter},38465:(e,t,r)=>{async function s(e,t,r,s,i,n=!1,o){let a=!0;i&&Array.isArray(i.tags)&&-1!==i.tags.indexOf("raises-exception")&&(a=!1);const _=s.execute(t,{model:r.model,stopOnError:a,suppressCodeExecutionErrors:n,onExecutionPhaseChanged:o}).future;return r._onIOPub=_.onIOPub,r._onExecuteReply=_.onReply,r.future=_,_?.done}r.d(t,{h:()=>s})},35348:(e,t,r)=>{r.d(t,{U:()=>y});var s=r(54362),i=r(65643),n=r(62257),o=r(11982),a=r(57912),_=r(22005),c=r(43118),l=r(87585),d=r(4632),u=r(37371),p=r(80601),h=r(35129),m=r(97003),g=r(42159);class w extends l.$p{_viewList;constructor(e){super(),this.loader=e?.loader,this.renderMime=new d.D({initialFactories:u.Nf}),this.renderMime.addFactory({safe:!1,mimeTypes:[p.w],createRenderer:e=>new p.Z(e,this)},0),this._viewList=new Set,window.addEventListener("resize",(()=>{this._viewList.forEach((e=>{c.pB.postMessage(e.luminoWidget,s.$L.ResizeMessage.UnknownSize)}))}))}async display_view(e,t){let r;try{r=await e}catch(t){const s=`Could not create a view for ${e}`;console.error(s);const i=new(m.createErrorWidgetModel(t,s));r=new m.ErrorWidgetView({model:i}),r.render()}s.$L.attach(r.luminoWidget,t),this._viewList.add(r),r.once("remove",(()=>{this._viewList.delete(r)}))}_get_comm_info(){return Promise.resolve({})}_create_comm(e,t,r,s,i){return Promise.resolve({on_close:()=>{},on_msg:()=>{},close:()=>{}})}loadClass(e,t,r){return new Promise(((e,s)=>{"@jupyter-widgets/base"===t?e(m):"@jupyter-widgets/controls"===t?e(h):"@jupyter-widgets/output"===t?e(g):void 0!==this.loader?e(this.loader(t,r)):s(`Could not load module ${t}@${r}`)})).then((s=>s[e]?s[e]:Promise.reject(`Class ${e} not found in module ${t}@${r}`)))}renderMime;loader}class y extends w{_kernelConnection;_commRegistration;_onError;_registry;constructor(e){super(e);const t=document.createElement("script"),s=document.createElement("script");s.setAttribute("data-jupyter-widgets-cdn-only","true"),document.body.appendChild(s),t.src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js",document.body.appendChild(t),t.onload=()=>{window.define("@jupyter-widgets/base",m),window.define("@jupyter-widgets/controls",h),this._registry=new a.A,this.register=this.register.bind(this),this.registerWithKernel=this.registerWithKernel.bind(this),this._getRegistry=this._getRegistry.bind(this),this._handleCommOpen=this._handleCommOpen.bind(this),this.register({name:"@jupyter-widgets/base",version:m.JUPYTER_WIDGETS_VERSION,exports:()=>Promise.resolve().then(r.bind(r,97003))}),this.register({name:"@jupyter-widgets/controls",version:h.JUPYTER_CONTROLS_VERSION,exports:()=>Promise.resolve().then(r.bind(r,35129))})}}async _loadFromNotebook(e){const t=e.getMetadata("widgets");if(t&&t[_.r]){let e=t[_.r];e=this.filterExistingModelState(e),await this.set_state(e)}}registerWithKernel(e){this._kernelConnection=e,this._commRegistration&&this._commRegistration.dispose(),e&&e.registerCommTarget(this.comm_target_name,this._handleCommOpen)}async _handleCommOpen(e,t){const r=new i.I.services.Comm(e);await this.handle_comm_open(r,t)}_getRegistry(){return this._registry}get onError(){return this._onError}display_view(e,t){return Promise.resolve(e).then((e=>{s.$L.attach(e.luminoWidget,t),e.on("remove",(()=>{console.log("The IPyWidgets view is removed",e)}))}))}async loadClass(e,t,r){"@jupyter-widgets/base"!==t&&"@jupyter-widgets/controls"!==t||!(0,n.valid)(r)||(r=`^${r}`);let s=this._getRegistry().getAllVersions(t);const i=2===r.split(".").length?r+".0":r;if(!s){const e=await(0,o.V)(t,i),r={name:t,version:i.replaceAll("^",""),exports:{...e}};if(this.register(r),s=this._getRegistry().getAllVersions(t),!s)throw new Error(`No version of module ${t} is registered`)}const a=this._getRegistry().get(t,i);if(!a){const e=Object.keys(s);throw new Error(`Module ${t}, version ${i} is not registered, however,         ${e.join(",")} ${e.length>1?"are":"is"}`)}let _;_="function"==typeof a?await a():await a;const c=_[e];if(!c)throw new Error(`Class ${e} not found in module ${t}`);return c}callbacks(e){const t=super.callbacks(e);return Object.assign({},t,{iopub:{output:e=>this._onError.emit(e)}})}_create_comm(e,t,r,s,n){const o=this._kernelConnection?.createComm(e,t);return(r||s)&&o?.open(r,s),Promise.resolve(new i.I.services.Comm(o))}_get_comm_info(){return this._kernelConnection.requestCommInfo({target_name:this.comm_target_name}).then((e=>e.content.comms))}register(e){this._getRegistry().set(e.name,e.version,e.exports)}}},80601:(e,t,r)=>{r.d(t,{Z:()=>n,w:()=>i});var s=r(54362);const i="application/vnd.jupyter.widget-view+json";class n extends s.$L{constructor(e,t){super(),this.mimeType=e.mimeType,this._manager=t}async renderModel(e){const t=e.data[this.mimeType];if(!this._manager.has_model(t.model_id))return this.node.textContent="Error creating widget: could not find model",void this.addClass("jupyter-widgets");try{const e=await this._manager.get_model(t.model_id),r=await this._manager.create_view(e);s.$L.attach(r.luminoWidget,this.node)}catch(e){console.log("Error displaying widget"),console.log(e),this.node.textContent="Error displaying widget",this.addClass("jupyter-widgets")}}mimeType;_manager}},11982:(e,t,r)=>{r.d(t,{V:()=>a});let s="https://cdn.jsdelivr.net/npm/",i=!0;const n=document.getElementsByTagName("script");Array.prototype.forEach.call(n,(e=>{s=e.getAttribute("data-jupyter-widgets-cdn")||s,i=i&&Boolean(e.getAttribute("data-jupyter-widgets-cdn-only"))}));const o=function(e){return new Promise(((t,r)=>{const s=window.requirejs;void 0===s?r("Requirejs is needed, please ensure it is loaded on the page."):s(e,t,r)}))};function a(e,t){const r=window.requirejs;if(void 0===r)throw new Error("Requirejs is needed, please ensure it is loaded on the page.");function n(){const i={paths:{}};return i.paths[e]=function(e,t){let r=e,i="index",n=e.indexOf("/");return-1!=n&&"@"==e[0]&&(n=e.indexOf("/",n+1)),-1!=n&&(i=e.substr(n+1),r=e.substr(0,n)),"@widgetti/jupyter-react"===r&&(t=t.replace("0.4.2","0.4.1")),`${s}${r}@${t}/dist/${i}`}(e,t),r.config(i),o([`${e}`])}return i?(console.log(`Loading from ${s} for ${e}@${t}`),n()):o([`${e}`]).catch((i=>{const o=i.requireModules&&i.requireModules[0];if(o)return r.undef(o),console.log(`Falling back to ${s} for ${e}@${t}`),n()}))}},22005:(e,t,r)=>{r.d(t,{r:()=>s});const s="application/vnd.jupyter.widget-state+json"},57912:(e,t,r)=>{r.d(t,{A:()=>i});var s=r(62257);class i{set(e,t,r){e in this._cache||(this._cache[e]=Object.create(null)),t in this._cache[e]?console.warn(`Version ${t} of key ${e} already registered.`):this._cache[e][t]=r}get(e,t){if(e in this._cache){const r=this._cache[e],i=(0,s.maxSatisfying)(Object.keys(r),t);if(null!==i)return r[i]}}getAllVersions(e){if(e in this._cache)return this._cache[e]}_cache=Object.create(null)}}}]);