"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[4003],{34003:(e,s,t)=>{t.r(s),t.d(s,{CourseTakeLesson:()=>C,default:()=>Z});var n=t(16909),l=t(97663),a=t(15358),r=t(82176),o=t(34166),c=t(17154),i=t(36061),d=t(68110),u=t(97666),h=t(55484),m=t(46523),x=t(85741),f=t(85730),j=t(45741),p=t(68495),g=t(35928),y=t(19459),k=t(47011);const C=()=>{const e=(0,n.useMemo)((()=>[new h.l]),[]),{accountHandle:s,spaceHandle:t,courseId:C,lessonId:Z}=(0,l.UO)();if(!Z)return(0,k.jsx)(k.Fragment,{});const v=(0,f.a)(),b=(0,y.qX)(),L=(0,m.qL)(),{confirmCourseItemCompletion:I,getLesson:S,getStudent:w,refreshLesson:F,refreshStudent:_}=(0,j.Y)(),[q,z]=(0,n.useState)("lesson"),[B,H]=(0,n.useState)(S(Z)),[M,T]=(0,n.useState)(!1),[$,E]=(0,n.useState)(!1),P=(0,p.s)(),{enqueueToast:D}=(0,g.p)(),O=(e,s)=>{s.preventDefault(),b.layout().resetRightPortal(),z(e)};return(0,n.useEffect)((()=>(b.layout().showBackdrop(),F(Z).then((e=>{if(b.layout().hideBackdrop(),e.success){const e=S(Z);e?(H(e),b.layout().setItem(e)):P("/")}})).finally((()=>{b.layout().hideBackdrop()})),()=>{H(void 0),L.reset(),b.layout().setItem(void 0)})),[Z]),(0,n.useEffect)((()=>(_(C,v?.id).then((e=>{if(e.success){const e=w(C,v?.id),s=e?.studentItems?.get(Z);s&&T(s.completed)}})),()=>{H(void 0),L.reset(),b.layout().setItem(void 0)})),[Z]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(a.m,{children:(0,k.jsxs)(r.Z,{display:"flex",children:[(0,k.jsx)(r.Z,{flex:1,children:(0,k.jsx)(o.Z,{sx:{fontSize:3},children:"Course lesson"})}),(0,k.jsxs)(r.Z,{children:[(0,k.jsx)(c.Z,{children:"Completed"}),(0,k.jsx)(i.Z,{onClick:()=>{E(!0),I(C,"lesson",Z,!M).then((e=>{e.success&&(D(e.message,{variant:"success"}),T(!M))})).finally((()=>{E(!1)}))},checked:M,size:"small",loading:$,"aria-labelledby":"switchLabel"})]}),(0,k.jsx)(r.Z,{ml:3,children:(0,k.jsx)(d.r,{variant:"default",size:"small",onClick:()=>P(`/${s}/${t}/course/${C}/progress`),children:"My course progress"})})]})}),B&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(u.Z,{sx:{mt:3,mb:3},children:[(0,k.jsx)(u.Z.Link,{href:"",selected:"lesson"===q,onClick:e=>O("lesson",e),children:"Lesson"}),(0,k.jsx)(u.Z.Link,{href:"",selected:"comments"===q,onClick:e=>O("comments",e),children:"Comments"})]}),"lesson"===q&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(r.Z,{children:B.nbformat&&(0,k.jsx)(x.a,{id:Z,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",readonly:!1,cellMetadataPanel:!1,nbformat:B.nbformat,extensions:e})})}),"comments"===q&&(0,k.jsx)(r.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,k.jsx)(r.Z,{})})]})]})},Z=C}}]);