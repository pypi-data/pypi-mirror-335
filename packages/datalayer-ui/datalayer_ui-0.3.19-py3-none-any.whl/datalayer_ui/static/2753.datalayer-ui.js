"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[2753],{12476:(e,t,s)=>{s.r(t),s.d(t,{ExerciseNew:()=>S,default:()=>O});var i=s(16909),n=s(15358),r=s(82176),a=s(44860),o=s(79424),d=s(88567),l=s(76411),u=s(56143),c=s(17154),p=s(68110),h=s(43275),m=s(98403),g=s(52925),x=s(63613),j=s(92884);function b(e){const t=j(e);if(0===t)return e;const s=new RegExp(`^[ \\t]{${t}}`,"gm");return e.replace(s,"")}var f=s(1213),w=s(85730),v=s(68495),Z=s(35928),_=s(45741),y=s(7852),C=s(19459),k=s(31319),E=s(47011);const S=()=>{const e=(0,w.a)(),t=(0,C.qX)(),s=(0,k.Ae)(),j=(0,g.gQ)(),S=(0,v.s)(),{enqueueToast:O}=(0,Z.p)(),{kernelManager:T,defaultKernel:D}=(0,m.W$)(),P=t.layout().leftSidebarVariant,W=t.layout().organization,M=t.layout().space,$=(0,i.useMemo)((()=>D),[T]),{getSpaceDatasets:z,refreshSpaceDatasets:V}=(0,_.Y)(),[I,L]=(0,i.useState)(z()),N=j.outputs?.get("exercise-pre")?.input,R=j.outputs?.get("exercise-solution")?.input,q=j.outputs?.get("exercise-question")?.input,A=j.outputs?.get("exercise-test")?.input,[B,J]=(0,i.useState)({name:void 0,description:void 0,help:'Use the assignment operator "=" to create the variable "x".'}),[K,U]=(0,i.useState)({name:void 0,description:void 0,help:!0});(0,i.useEffect)((()=>{M&&V(M,W).then((e=>{e.success&&L(z())}))}),[M]),(0,i.useEffect)((()=>{U({...K,name:void 0===B.name?void 0:B.name.length>2,description:void 0===B.description?void 0:B.description.length>2,help:void 0===B.help?void 0:B.help.length>2})}),[B]);const{isLoading:F,isSuccess:H,uploadAndSubmit:Q,progress:Y}=(0,y.W)(`${s.configuration.spacerRunUrl}/api/spacer/v1/exercises`);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(n.m,{children:(0,E.jsx)(n.m.TitleArea,{variant:"large",children:(0,E.jsx)(n.m.Title,{children:"New Exercise"})})}),(0,E.jsxs)(r.Z,{children:[(0,E.jsxs)(r.Z,{sx:{label:{marginTop:2},"label + span":{marginBottom:2}},children:[(0,E.jsxs)(a.Z,{children:[(0,E.jsx)(a.Z.Label,{children:"Name"}),(0,E.jsx)(a.Z.Caption,{children:"Name of the exercise."}),(0,E.jsx)(o.Z,{block:!0,value:B.name,onChange:e=>{J((t=>({...t,name:e.target.value})))}}),!1===K.name&&(0,E.jsx)(a.Z.Validation,{variant:"error",children:"Name must have more than 2 characters."})]}),(0,E.jsxs)(a.Z,{children:[(0,E.jsx)(a.Z.Label,{children:"Description"}),(0,E.jsx)(a.Z.Caption,{children:"Description of the exercise."}),(0,E.jsx)(d.ZP,{block:!0,value:B.description,onChange:e=>{J((t=>({...t,description:e.target.value})))}}),!1===K.description&&(0,E.jsx)(a.Z.Validation,{variant:"error",children:"Description must have more than 2 characters."})]}),(0,E.jsxs)(r.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",sx:{gap:3},children:[(0,E.jsxs)(r.Z,{children:[(0,E.jsxs)(a.Z,{children:[(0,E.jsx)(a.Z.Label,{children:"Preliminary code"}),(0,E.jsx)(a.Z.Caption,{children:"This is the preliminary code that will be run before the exercise is taken."})]}),(0,E.jsx)(x.r,{showEditor:!0,autoRun:!0,kernel:$,code:"# Insert your preliminary code here.",id:"exercise-pre"})]}),(0,E.jsxs)(r.Z,{children:[(0,E.jsxs)(a.Z,{children:[(0,E.jsx)(a.Z.Label,{children:"Datasets"}),(0,E.jsx)(a.Z.Caption,{children:"Select the datasets to be used in the prelimary code."})]}),(0,E.jsx)(l.S,{showDividers:!0,role:"listbox","aria-label":"Select assignees",children:I.map((e=>(0,E.jsxs)(l.S.Item,{role:"option",onClick:t=>{t.preventDefault(),j.setDataset("exercise-pre",e)},children:[(0,E.jsx)(l.S.LeadingVisual,{children:(0,E.jsx)(h.VHe,{})}),e.name,(0,E.jsxs)(l.S.Description,{children:[e.mimeType," ",(0,f.A)(e.description)]})]},e.id)))})]})]}),(0,E.jsxs)(a.Z,{children:[(0,E.jsx)(a.Z.Label,{children:"Solution Code"}),(0,E.jsx)(a.Z.Caption,{children:"This is the expected solution code. The student will never see this content."})]}),(0,E.jsx)(x.r,{showEditor:!0,autoRun:!0,kernel:$,id:"exercise-solution",code:"# Create a variable x, equals to 3.\nx = 3\n\n# Print x.\nprint(x)"}),(0,E.jsxs)(a.Z,{children:[(0,E.jsx)(a.Z.Label,{children:"Question code"}),(0,E.jsx)(a.Z.Caption,{children:"This the question code that will be shown to the student."})]}),(0,E.jsx)(x.r,{showEditor:!0,autoRun:!1,kernel:$,id:"exercise-question",code:b("# Create a variable x, equals to 3.\n...\n\n# Print x.\n...\n").trim()}),(0,E.jsx)(r.Z,{children:(0,E.jsxs)(a.Z,{children:[(0,E.jsx)(a.Z.Label,{children:"Help for the student"}),(0,E.jsx)(a.Z.Caption,{children:"This a help that will be shown to the student if he asks for it."}),(0,E.jsx)(d.ZP,{block:!0,value:B.help,onChange:e=>{J((t=>({...t,help:e.target.value})))}}),!1===K.help&&(0,E.jsx)(a.Z.Validation,{variant:"error",children:"Help must have more than 2 characters"})]})}),(0,E.jsxs)(a.Z,{children:[(0,E.jsx)(a.Z.Label,{children:"Test the Solution code"}),(0,E.jsxs)(a.Z.Caption,{children:["Write the test code that will be run on the student's code during the exercise. Please refer to the ",(0,E.jsx)(u.Z,{href:"https://nbgrader.readthedocs.io/en/latest/user_guide/autograding_resources.html",target:"_blank",children:"nbgrader"})," documentation."]})]}),(0,E.jsx)(x.r,{showEditor:!0,autoRun:!1,disableRun:!0,kernel:$,id:"exercise-test",code:'Ex().check_object("x")\nEx().check_object("x").has_equal_value()\nEx().has_output("3")\nprint(\'Congratulations. You have successfully passed this exercise.\')'})]}),(0,E.jsx)(c.Z,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:'Validate you tests with this button. It will run the "Preliminary code", then will run the "Test code" on the "Solution code". When a student will take the exercise, the "Test code" will be run on the "Student code".'}),(0,E.jsx)(p.r,{variant:"danger",leadingVisual:h.Zi2,sx:{marginTop:2,marginBottom:2},onClick:e=>{e.preventDefault(),j.setExecuteRequest("exercise-test",`\nsetup_state(stu_code = """${N}\n${R}""", sol_code = """${N}\n${R}""")\n${A}\n`)},children:"Test"}),(0,E.jsx)(c.Z,{as:"p",color:"fg.onEmphasis",bg:"neutral.emphasis",p:2,children:"Once you are confident with your test, you can create the exercise. Don't worry, you can still update it before making it public."}),(0,E.jsx)(p.r,{variant:"primary",disabled:F||!K.name||!K.description,sx:{marginTop:2},onClick:async()=>{const s=new FormData;s.append("name",B.name),s.append("description",B.description),s.append("help",B.help),s.append("codePre",N??""),s.append("codeSolution",R??""),s.append("codeQuestion",q??""),s.append("codeTest",A??""),s.append("accountType","organization-space"===P?"organization":"user"),s.append("accountId","organization-space"===P?W?.id:e?.id),s.append("spaceId",M?.id),Q(s).then((s=>{s.success&&(O("The exercise has been created.",{variant:"success"}),"organization"===P||"organization-space"===P?(S(`/${W?.handle}/${M?.handle}/exercises/${s.exercise.uid}`),t.layout().triggerItemsRefresh()):S(`/${e?.handle}/${M?.handle}/exercises`))}))},children:"Create an exercise"})]})]})},O=S},42159:(e,t,s)=>{s.r(t),s.d(t,{OutputModel:()=>p,OutputView:()=>h});var i=s(9494),n=s(97003),r=s(65093),a=s(76640),o=s(96133),d=s.n(o),l=s(47692),u=s.n(l),c=s(96809);u()(c.Z,{insert:"head",singleton:!1}),c.Z.locals;class p extends i.Ms{defaults(){return Object.assign(Object.assign({},super.defaults()),{msg_id:"",outputs:[]})}initialize(e,t){super.initialize(e,t),this._outputs=new r.n({trusted:!0}),this.listenTo(this,"change:outputs",this.setOutputs),this.setOutputs()}get outputs(){return this._outputs}clear_output(e=!1){this._outputs.clear(e)}setOutputs(e,t,s){s&&s.newMessage||(this.clear_output(),this._outputs.fromJSON(JSON.parse(JSON.stringify(this.get("outputs")))))}}class h extends i.KK{_createElement(e){return this.luminoWidget=new n.JupyterLuminoPanelWidget({view:this}),this.luminoWidget.node}_setElement(e){if(this.el||e!==this.luminoWidget.node)throw new Error("Cannot reset the DOM element.");this.el=this.luminoWidget.node,this.$el=d()(this.luminoWidget.node)}render(){super.render(),this._outputView=new a.FJ({rendermime:this.model.widget_manager.renderMime,model:this.model.outputs}),this.luminoWidget.insertWidget(0,this._outputView),this.luminoWidget.addClass("jupyter-widgets"),this.luminoWidget.addClass("widget-output"),this.update()}remove(){return this._outputView.dispose(),super.remove()}}},9494:(e,t,s)=>{s.d(t,{u:()=>n,Ms:()=>r,KK:()=>a});var i=s(97003);const n="1.0.0";class r extends i.DOMWidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:"OutputModel",_view_name:"OutputView",_model_module:"@jupyter-widgets/output",_view_module:"@jupyter-widgets/output",_model_module_version:n,_view_module_version:n})}}class a extends i.DOMWidgetView{}},92884:e=>{e.exports=e=>{const t=e.match(/^[ \t]*(?=\S)/gm);return t?t.reduce(((e,t)=>Math.min(e,t.length)),1/0):0}},69527:(e,t,s)=>{s.d(t,{k:()=>m});var i=s(16909),n=s(46830),r=s(74228),a=s(10866),o=s(17780);function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)({}).hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},d.apply(null,arguments)}const l=(0,n.F4)(["from{mask-position:200%;}to{mask-position:0%;}"]),u=n.ZP.span.withConfig({displayName:"ProgressBar__Item",componentId:"sc-1jz8j7n-0"})(["width:",";background-color:",";@media (prefers-reduced-motion:no-preference){&[data-animated='true']{mask-image:linear-gradient(75deg,#000 30%,rgba(0,0,0,0.65) 80%);mask-size:200%;animation:",";animation-duration:1s;animation-iteration-count:infinite;}}",";"],(e=>e.progress?`${e.progress}%`:0),(0,a.U2)("colors.success.emphasis"),l,o.Z);u.displayName="ProgressBar.Item";const c={small:"5px",large:"10px",default:"8px"},p=n.ZP.span.withConfig({displayName:"ProgressBar__ProgressContainer",componentId:"sc-1jz8j7n-1"})(["display:",";overflow:hidden;background-color:",";border-radius:",";height:",";"," ",";"],(e=>e.inline?"inline-flex":"flex"),(0,a.U2)("colors.border.default"),(0,a.U2)("radii.1"),(e=>c[e.barSize||"default"]),r.width,o.Z),h=(0,i.forwardRef)((({animated:e,progress:t,bg:s="success.emphasis",barSize:n="default",children:r,...a},o)=>{if(r&&t)throw new Error("You should pass `progress` or children, not both.");const l="string"==typeof t?parseInt(t,10):t,c={"aria-valuenow":l?Math.round(l):void 0,"aria-valuemin":0,"aria-valuemax":100,"aria-busy":!!l&&100!==l};return i.createElement(p,d({ref:o,role:"progressbar",barSize:n},c,a),null!=r?r:i.createElement(u,{"data-animated":e,progress:t,sx:{backgroundColor:s}}))}));h.displayName="ProgressBar";const m=Object.assign(h,{Item:u})},96809:(e,t,s)=>{s.d(t,{Z:()=>o});var i=s(41145),n=s.n(i),r=s(12410),a=s.n(r)()(n());a.push([e.id,"/*-----------------------------------------------------------------------------\n| Copyright (c) Jupyter Development Team.\n| Distributed under the terms of the Modified BSD License.\n|----------------------------------------------------------------------------*/\n\n/* <DEPRECATED> */\n.jupyter-widgets.widget-output .jp-OutputArea-prompt, /* <DEPRECATED> */\n.jupyter-widgets.jupyter-widget-output .jp-OutputArea-prompt {\n  display: none;\n}\n",""]);const o=a}}]);