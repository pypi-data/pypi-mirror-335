"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[5838],{55838:(e,s,t)=>{t.r(s),t.d(s,{CourseTakeAssignment:()=>S,default:()=>I});var n=t(16909),l=t(46744),a=t(97663),r=t(15358),i=t(82176),d=t(34166),o=t(68110),c=t(43275),u=t(55484),h=t(53969),m=t(46523),x=t(85741),g=t(19459),j=t(77086),f=t(85730),y=t(45741),p=t(68495),Z=t(17154),k=t(47011);const v=e=>{const{studentItem:s}=e;return s&&s?.nbgrades?(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(i.Z,{children:(0,k.jsx)(d.Z,{sx:{fontSize:1},children:"Grades"})}),(0,k.jsx)(i.Z,{mt:3,children:s?.nbgrades.map((e=>(0,k.jsx)(i.Z,{children:(0,k.jsxs)(Z.Z,{style:{fontSize:"small"},children:[e.grade_id_s,": ",e.score_f]})})))}),(0,k.jsx)(i.Z,{mt:3,children:(0,k.jsx)(d.Z,{sx:{fontSize:1},children:"Total"})}),(0,k.jsxs)(i.Z,{mt:3,children:[s?.nbgradesTotalScore," / ",s?.nbgradesTotalPoints]})]}):(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(i.Z,{children:(0,k.jsx)(d.Z,{sx:{fontSize:1},children:"Grades"})}),(0,k.jsx)(i.Z,{mt:3,children:"Please grade your assignment."})]})},b=e=>{const{notebookId:s}=e,{grade:t}=(0,j.lt)(),n=m.MY.getState().selectNotebook(s);return(0,k.jsxs)(i.Z,{display:"flex",children:[(0,k.jsx)(i.Z,{children:(0,k.jsx)(o.r,{variant:"invisible",size:"small",leadingVisual:c.Mfv,onClick:()=>t(new Date),children:"Grade"})}),"busy"!==n?.kernelStatus&&(0,k.jsx)(i.Z,{children:(0,k.jsx)(o.r,{variant:"invisible",size:"small",leadingVisual:c.o1U,onClick:e=>m.MY.getState().runAll(s),children:"Run all"})}),"busy"===n?.kernelStatus&&(0,k.jsx)(i.Z,{children:(0,k.jsx)(o.r,{variant:"danger",size:"small",leadingVisual:c.wNq,onClick:e=>m.MY.getState().interrupt(s),children:"Interrupt"})})]})},S=()=>{const e=(0,n.useMemo)((()=>[new u.l({factory:h.l})]),[]),{accountHandle:s,spaceHandle:t,courseId:Z,assignmentId:S}=(0,a.UO)();if(!Z||!S)return(0,k.jsx)(k.Fragment,{});const I=(0,f.a)(),z=(0,g.qX)(),{gradeRequest:C}=(0,j.lt)(),B=(0,m.qL)(),F=`${S}-student`,{getAssignmentForStudent:w,gradeAssignmentForStudent:M,refreshAssignmentForStudent:_,resetAssignmentForStudent:A}=(0,y.Y)(),R=B.selectNotebookModel(F),[T]=(0,n.useState)("assignment"),P=(0,p.s)(),[V,q]=(0,n.useState)(w(S)),[N,U]=(0,n.useState)(),Y=e=>{U(e);const s=(0,l.createPortal)((0,k.jsx)(v,{studentItem:e}),document.getElementById("right-panel-id"));z.layout().setRightPortal({portal:s,pinned:!1})};return(0,n.useEffect)((()=>(z.layout().showBackdrop(),_(Z,I,S).then((e=>{if(e.success){const e=w(S);e?(q(e),Y(e?.studentItem),z.layout().setItem(e)):P("/")}})).finally((()=>{z.layout().hideBackdrop()})),()=>{q(void 0),B.reset(),z.layout().setItem(void 0)})),[S]),(0,n.useEffect)((()=>{C&&R&&(z.layout().showBackdrop("We are grading your assignment. This may take some time..."),M(Z,I,S,R?.model).then((e=>{if(e.success){const e=w(S);Y(e?.studentItem),e?z.layout().setItem(e):P("/")}})).finally((()=>{z.layout().hideBackdrop()})))}),[C]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(r.m,{children:(0,k.jsxs)(i.Z,{display:"flex",children:[(0,k.jsx)(i.Z,{flex:1,children:(0,k.jsx)(d.Z,{sx:{fontSize:3},children:"Course assignment"})}),(0,k.jsx)(b,{notebookId:F}),(0,k.jsx)(i.Z,{children:(0,k.jsx)(o.r,{variant:"invisible",size:"small",leadingVisual:c.eJg,onClick:e=>{e.preventDefault(),z.layout().showBackdrop("Resetting your assignment..."),A(Z,I,S).then((e=>{if(z.layout().hideBackdrop(),e.success){const e=w(S);e?(q(e),Y(e?.studentItem),z.layout().setItem(e)):P("/")}})).finally((()=>{z.layout().hideBackdrop()}))},children:"Reset"})}),(0,k.jsx)(i.Z,{ml:3,children:(0,k.jsx)(o.r,{variant:"default",size:"small",onClick:()=>P(`/${s}/${t}/course/${Z}/progress`),children:"My course progress"})})]})}),V&&(0,k.jsxs)(k.Fragment,{children:["assignment"===T&&V&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(i.Z,{children:(0,k.jsx)(x.a,{id:F,height:"calc(100vh - 240px)",maxHeight:"calc(100vh - 240px)",cellMetadataPanel:!1,nbformat:V.nbformat,extensions:e})})}),"notes"===T&&(0,k.jsx)(i.Z,{display:"grid",gridTemplateColumns:"1fr 1fr",children:(0,k.jsx)(i.Z,{})})]})]})},I=S},53969:(e,s,t)=>{t.d(s,{l:()=>o});var n=t(47011),l=t(34441),a=t(70994),r=t(81158),i=t(45205),d=t(23577);function o(e){const{commands:s}=e;return(0,n.jsx)(a.Z,{className:d.UI,sx:{"& p":{marginBottom:"0 !important"}},children:(0,n.jsx)(r.r,{trailingVisual:l.o1U,size:"small",variant:"invisible",onClick:e=>{e.preventDefault(),s.execute(i.zl.run).catch((e=>{console.error("Failed to run cell.",e)}))},children:"Run"})})}}}]);