import{c as Te}from"../chunks/qqT9E5ug.js";import{c as Ae,a as i,t as d,s as k}from"../chunks/BQSWrPvQ.js";import{p as G,f as ee,w as Me,a as H,e as Ge,j as l,o as V,q as X,c as s,l as me,s as c,r as t,t as g}from"../chunks/BlPzMKBp.js";import{d as He,r as Ie,a as pe,b as Oe,c as ue,i as ae,s as ze}from"../chunks/BZbDFF1N.js";import{d as Ce,b as te,u as Ee,B as Fe,s as fe,e as Y,o as se,f as le,p as re,q as _e,g as Le,a as je}from"../chunks/DE1eCaeQ.js";import{f as he,S as ge,a as Z,T as Be,A as We}from"../chunks/jQPdR6t7.js";import{r as be}from"../chunks/BJiwio4j.js";import{g as qe}from"../chunks/pKKESLv8.js";import{S as De,a as Je}from"../chunks/2uHotzhW.js";import{S as Re}from"../chunks/Bk6sjZbM.js";import"../chunks/DXG5MlPL.js";function Ke(r){const e=new Map;return r.forEach(a=>{var v;const o=(v=a.annotation_label)==null?void 0:v.annotation_label_name;o&&e.set(o,(e.get(o)||0)+1)}),e}function Qe(r,e){G(e,!0);let a=Ie(e,["$$slots","$$events","$$legacy"]);Ce(r,He({name:"move-left"},()=>a,{iconNode:[["path",{d:"M6 8L2 12L6 16"}],["path",{d:"M2 12H22"}]],children:(v,N)=>{var n=Ae(),P=ee(n);te(P,()=>e.children??Me),i(v,n)},$$slots:{default:!0}})),H()}var Ue=d('<div class="h-full w-full overflow-hidden"><div class="sample relative h-full w-full"><div class="absolute right-4 top-2 z-10"><!></div> <!> <!></div></div>'),Ve=d("<div> </div>"),Xe=d('<div class="flex gap-1"></div>'),Ye=d('<div class="flex items-center justify-between gap-2 rounded-sm bg-card px-5 py-2"><div class="text-sm"> </div> <div class="text-sm"> </div></div>'),Ze=d('<div class="flex flex-col gap-2"></div>'),ea=d('<span class="text-sm"> </span> <span class="break-all text-sm"> </span>',1),aa=d('<div class="grid grid-cols-[6rem_1fr] gap-y-3 text-diffuse-foreground"></div>'),ta=d('<div class="flex-none"><div class="mb-2.5 text-lg font-semibold">Sample details</div> <!></div> <div class="flex h-full min-h-0 flex-col space-y-2 overflow-y-auto dark:[color-scheme:dark]"><!> <!> <!></div>',1),sa=d('<div class="flex h-full w-full flex-col space-y-4"><div class="flex w-full items-center space-x-4"><!> <h2 class="text-xl font-semibold tracking-tight"> </h2></div> <!> <div class="flex min-h-0 flex-1 gap-4"><div class="flex-1"><!></div> <div class="relative w-[375px]"><!></div></div></div>');function la(r,e){G(e,!0);const[a,o]=ze(),v=()=>ue(B,"$lastGridType",a),N=()=>ue(f,"$selectedSampleIds",a);let n=V(null);const P=e.sample.tags,I=Ke(e.sample.annotations),{lastGridType:B,selectedSampleIds:f,toggleSampleSelection:W}=Ee();let O=V(800),$=V(600);Ge(()=>{if(!l(n))return;const _=new ResizeObserver(()=>{l(n)&&(X(O,pe(l(n).clientWidth)),X($,pe(l(n).clientHeight)))});return _.observe(l(n)),()=>_.disconnect()});const q=[{label:"Height:",value:he(e.sample.height)+"px"},{label:"Width:",value:he(e.sample.width)+"px"},{label:"Filename:",value:e.sample.file_name},{label:"Filepath:",value:e.sample.file_path_abs}];var D=sa(),J=s(D),oe=s(J);const we=me(()=>v()==="samples"?be.toSamples(e.sample.dataset_id):be.toAnnotations(e.sample.dataset_id));Fe(oe,{variant:"outline",get href(){return l(we)},children:(_,ce)=>{Qe(_,{})},$$slots:{default:!0}});var ie=c(oe,2),ye=s(ie);t(ie),t(J);var ne=c(J,2);ge(ne,{class:"mb-4 bg-border-hard"});var de=c(ne,2),R=s(de),Ne=s(R);xe(Ne,{className:"h-full",children:(_,ce)=>{Se(_,{className:"h-full",children:(K,$e)=>{var b=Ue(),x=s(b),T=s(x),z=s(T);const C=me(()=>N().has(e.sample.sample_id));Re(z,{onSelect:()=>W(e.sample.sample_id),get isSelected(){return l(C)}}),t(T);var E=c(T,2);De(E,{get sample(){return e.sample},class:"rounded-none"});var F=c(E,2);Je(F,{get sample(){return e.sample},renderOptions:{showLabels:!0},get containerWidth(){return l(O)},get containerHeight(){return l($)}}),t(x),t(b),Oe(b,Q=>X(n,Q),()=>l(n)),g(()=>fe(x,`--sample-width: ${l(O)??""}px; --sample-height: ${l($)??""}px;`)),i(K,b)},$$slots:{default:!0}})},$$slots:{default:!0}}),t(R);var ve=c(R,2),Pe=s(ve);xe(Pe,{className:"h-full",children:(_,ce)=>{Se(_,{className:"h-full flex flex-col",children:(K,$e)=>{var b=ta(),x=ee(b),T=c(s(x),2);ge(T,{class:"mb-4 bg-border-hard"}),t(x);var z=c(x,2),C=s(z);{var E=u=>{Z(u,{title:"Tags",icon:Be,children:(L,A)=>{var m=Xe();Y(m,21,()=>P,_e,(S,w)=>{var p=Ve(),h=s(p,!0);t(p),g(y=>{re(p,1,y),k(h,l(w).name)},[()=>se(le("inline rounded-lg bg-card px-2 py-2 text-xs"))]),i(S,p)}),t(m),i(L,m)}})};ae(C,u=>{P.length>0&&u(E)})}var F=c(C,2);{var Q=u=>{Z(u,{title:"Annotations",children:(L,A)=>{var m=Ze();Y(m,21,()=>I,_e,(S,w)=>{var p=Ye(),h=s(p),y=s(h,!0);t(h);var M=c(h,2),j=s(M);t(M),t(p),g(U=>{k(y,l(w)[0]),fe(M,`color: ${U??""};`),k(j,`(${l(w)[1]??""})`)},[()=>qe(l(w)[0]).color]),i(S,p)}),t(m),i(L,m)}})};ae(F,u=>{I.size>0&&u(Q)})}var ke=c(F,2);Z(ke,{title:"Metadata",children:(u,L)=>{var A=aa();Y(A,21,()=>q,({label:m,value:S})=>m,(m,S)=>{let w=()=>l(S).label,p=()=>l(S).value;var h=ea(),y=ee(h),M=s(y,!0);t(y);var j=c(y,2),U=s(j,!0);t(j),g(()=>{k(M,w()),k(U,p())}),i(m,h)}),t(A),i(u,A)}}),t(z),i(K,b)},$$slots:{default:!0}})},$$slots:{default:!0}}),t(ve),t(de),t(D),g(()=>k(ye,`Filename: "${e.sample.file_name??""}"`)),i(r,D),H(),o()}var ra=d("<div><!></div>");function xe(r,e){G(e,!0);var a=ra(),o=s(a);te(o,()=>e.children),t(a),g(v=>re(a,1,v),[()=>se(le("rounded-lg border border-gray-800 bg-black",e.className))]),i(r,a),H()}var oa=d("<div><!></div>");function Se(r,e){G(e,!0);var a=oa(),o=s(a);te(o,()=>e.children),t(a),g(v=>re(a,1,v),[()=>se(le("p-4",e.className))]),i(r,a),H()}const ia=async({sample_id:r})=>{const e={data:void 0,error:void 0};try{const a=await Te.GET("/api/samples/{sample_id}",{params:{path:{sample_id:r}}});if(a.error)throw new Error(JSON.stringify(a.error,null,2));if(!a.data)throw new Error("No data");e.data=a.data}catch(a){e.error="Error loading sample: "+String(a)}return e},na=async({params:r})=>{const{sample_id:e}=r,{data:a,error:o}=await ia({sample_id:e});return{sample:a,error:o}},wa=Object.freeze(Object.defineProperty({__proto__:null,load:na},Symbol.toStringTag,{value:"Module"}));var da=d("<a>Go home</a>"),va=d('<div class="flex h-full w-full space-x-4 px-4 pb-4"><div class="h-full w-full space-y-6 rounded-[1vw] bg-card p-4"><!></div></div>');function ya(r,e){G(e,!0);const a=Le(),[o,v]=a;var N=va(),n=s(N),P=s(n);{var I=f=>{la(f,{get sample(){return e.data.sample}})},B=f=>{We(f,{title:"Sample not found",children:(W,O)=>{var $=da();g(q=>je($,"href",q),[()=>o("/",void 0)]),i(W,$)}})};ae(P,f=>{e.data.sample?f(I):f(B,!1)})}t(n),t(N),i(r,N),H()}export{ya as component,wa as universal};
