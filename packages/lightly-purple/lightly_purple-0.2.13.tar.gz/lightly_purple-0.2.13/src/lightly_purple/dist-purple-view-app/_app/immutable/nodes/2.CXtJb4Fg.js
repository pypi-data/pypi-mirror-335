var Ys=Object.defineProperty;var Je=i=>{throw TypeError(i)};var Xs=(i,t,e)=>t in i?Ys(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var z=(i,t,e)=>Xs(i,typeof t!="symbol"?t+"":t,e),Re=(i,t,e)=>t.has(i)||Je("Cannot "+e);var p=(i,t,e)=>(Re(i,t,"read from private field"),e?e.call(i):t.get(i)),T=(i,t,e)=>t.has(i)?Je("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),It=(i,t,e,s)=>(Re(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e),E=(i,t,e)=>(Re(i,t,"access private method"),e);import{c as Ft}from"../chunks/qqT9E5ug.js";import{I as Ie,j as o,q as W,p as D,f as S,a as R,l as m,c as y,w as et,r as _,t as K,h as Zt,o as Pt,a9 as Us,aD as Qe,a4 as qt,n as Gs,s as w,aH as ot,aG as Ot,aF as Ws,e as qs}from"../chunks/BlPzMKBp.js";import{c as I,a as g,t as k,o as At,d as Mt,s as rt}from"../chunks/BQSWrPvQ.js";import{p as P,i as gt,r as Y,a as ut,s as Qt,c as lt,e as j,d as at,b as ee}from"../chunks/BZbDFF1N.js";import{G as Oe,h as Se,H as js,j as B,b as q,c as $t,m as Pe,r as Hs,l as Fe,t as Ae,A as $e,y as ds,J as cs,F as us,K as hs,L as fs,M as vs,N as ps,O as gs,Q as ms,R as bs,T as _s,n as Ze,e as Te,C as Be,s as Js,a as xs,f as nt,U as Qs,V as Zs,W as tr,X as er,Y as sr,Z as ts,_ as rr,$ as es,d as Bt,u as ys,B as Nt,a0 as ar,q as nr,a1 as ir,a2 as or}from"../chunks/DE1eCaeQ.js";import{o as ws,i as lr,g as dr,L as Ke,D as cr,a as ur}from"../chunks/CRMG2oVn.js";import{a as ke,T as hr,f as zt,A as fr,S as Ss}from"../chunks/jQPdR6t7.js";import{S as vr,s as pr,h as ss,n as Ps,a as As,i as gr,b as mr,u as $s,l as br}from"../chunks/Dfop2hpa.js";import{g as rs}from"../chunks/pKKESLv8.js";import"../chunks/DXG5MlPL.js";import{r as Ne}from"../chunks/BJiwio4j.js";import{p as _r}from"../chunks/eu_k7KgQ.js";var xr=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],yr=["difference","intersection","symmetricDifference","union"],as=!1,Lt,it,yt,re,Ts;const ae=class ae extends Set{constructor(e){super();T(this,re);T(this,Lt,new Map);T(this,it,Ie(0));T(this,yt,Ie(0));if(e){for(var s of e)super.add(s);p(this,yt).v=super.size}as||E(this,re,Ts).call(this)}has(e){var s=super.has(e),r=p(this,Lt),a=r.get(e);if(a===void 0){if(!s)return o(p(this,it)),!1;a=Ie(!0),r.set(e,a)}return o(a),s}add(e){return super.has(e)||(super.add(e),W(p(this,yt),super.size),Oe(p(this,it))),this}delete(e){var s=super.delete(e),r=p(this,Lt),a=r.get(e);return a!==void 0&&(r.delete(e),W(a,!1)),s&&(W(p(this,yt),super.size),Oe(p(this,it))),s}clear(){if(super.size!==0){super.clear();var e=p(this,Lt);for(var s of e.values())W(s,!1);e.clear(),W(p(this,yt),0),Oe(p(this,it))}}keys(){return this.values()}values(){return o(p(this,it)),super.values()}entries(){return o(p(this,it)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return o(p(this,yt))}};Lt=new WeakMap,it=new WeakMap,yt=new WeakMap,re=new WeakSet,Ts=function(){as=!0;var e=ae.prototype,s=Set.prototype;for(const r of xr)e[r]=function(...a){return o(p(this,it)),s[r].apply(this,a)};for(const r of yr)e[r]=function(...a){o(p(this,it));var n=s[r].apply(this,a);return new ae(n)}};let ze=ae;var wr=k("<div><!></div>");function Sr(i,t){D(t,!0);let e=P(t,"id",19,Se),s=P(t,"ref",15,null),r=Y(t,["$$slots","$$events","$$legacy","id","children","child","ref"]);const a=js({id:B.with(()=>e()),ref:B.with(()=>s(),l=>s(l))}),n=m(()=>Pe(r,a.props));var d=I(),u=S(d);{var c=l=>{var f=I(),v=S(f);q(v,()=>t.child,()=>({props:o(n)})),g(l,f)},h=l=>{var f=wr();let v;var b=y(f);q(b,()=>t.children??et),_(f),K(()=>v=$t(f,v,{...o(n)})),g(l,f)};gt(u,l=>{t.child?l(c):l(h,!1)})}g(i,d),R()}function Pr(i,t,e){const s={position:"absolute"};return i==="lr"?(s.left=`${t}%`,s.right=`${e}%`):i==="rl"?(s.right=`${t}%`,s.left=`${e}%`):i==="bt"?(s.bottom=`${t}%`,s.top=`${e}%`):(s.top=`${t}%`,s.bottom=`${e}%`),s}function ks(i,t){const e={position:"absolute"};return i==="lr"?(e.left=`${t}%`,e.translate="-50% 0"):i==="rl"?(e.right=`${t}%`,e.translate="50% 0"):i==="bt"?(e.bottom=`${t}%`,e.translate="0 50%"):(e.top=`${t}%`,e.translate="0 -50%"),e}function Cs(i,t,e){const s={position:"absolute"};return i==="lr"?(s.left=`${t}%`,s.translate=`${e}% 0`):i==="rl"?(s.right=`${t}%`,s.translate=`${-e}% 0`):i==="bt"?(s.bottom=`${t}%`,s.translate=`0 ${-e}%`):(s.top=`${t}%`,s.translate=`0 ${e}%`),s}function Et(i,t,e,s){const r=(i-(Number.isNaN(t)?0:t))%s;let a=Math.abs(r)*2>=s?i+Math.sign(r)*(s-Math.abs(r)):i-r;Number.isNaN(t)?!Number.isNaN(e)&&a>e&&(a=Math.floor(e/s)*s):a<t?a=t:!Number.isNaN(e)&&a>e&&(a=t+Math.floor((e-t)/s)*s);const n=s.toString(),d=n.indexOf("."),u=d>=0?n.length-d:0;if(u>0){const c=10**u;a=Math.round(a*c)/c}return a}const Ar="data-slider-root",se="data-slider-thumb",$r="data-slider-range",Ms="data-slider-tick";var jt,ne,ie,oe;class Vs{constructor(t){z(this,"opts");T(this,jt,Pt(!1));T(this,ne,m(()=>this.opts.orientation.current==="horizontal"?this.opts.dir.current==="rtl"?"rl":"lr":this.opts.dir.current==="rtl"?"tb":"bt"));T(this,ie,m(()=>{if(!this.opts.disabled.current)return this.opts.orientation.current==="horizontal"?"pan-y":"pan-x"}));z(this,"getAllThumbs",()=>{const t=this.opts.ref.current;return t?Array.from(t.querySelectorAll(`[${se}]`)):[]});T(this,oe,m(()=>({id:this.opts.id.current,"data-orientation":$e(this.opts.orientation.current),"data-disabled":Ae(this.opts.disabled.current),style:{touchAction:o(p(this,ie))},[Ar]:""})));this.opts=t,Fe(t)}get isActive(){return o(p(this,jt))}set isActive(t){W(p(this,jt),ut(t))}get direction(){return o(p(this,ne))}get props(){return o(p(this,oe))}}jt=new WeakMap,ne=new WeakMap,ie=new WeakMap,oe=new WeakMap;var le,de,ce,ue,he;class Tr extends Vs{constructor(e){super(e);z(this,"opts");z(this,"isMulti",!1);z(this,"updateValue",e=>{this.opts.value.current=Et(e,this.opts.min.current,this.opts.max.current,this.opts.step.current)});z(this,"handlePointerMove",e=>{if(!this.isActive||this.opts.disabled.current)return;e.preventDefault(),e.stopPropagation();const s=this.opts.ref.current,r=this.getAllThumbs()[0];if(!s||!r)return;r.focus();const{left:a,right:n,top:d,bottom:u}=s.getBoundingClientRect();this.direction==="lr"?this.applyPosition({clientXY:e.clientX,start:a,end:n}):this.direction==="rl"?this.applyPosition({clientXY:e.clientX,start:n,end:a}):this.direction==="bt"?this.applyPosition({clientXY:e.clientY,start:u,end:d}):this.direction==="tb"&&this.applyPosition({clientXY:e.clientY,start:d,end:u})});z(this,"handlePointerDown",e=>{if(e.button!==0||this.opts.disabled.current)return;const s=this.opts.ref.current,r=this.getAllThumbs()[0];if(!r||!s)return;const a=e.target;!cs(a)||!s.contains(a)||(e.preventDefault(),r.focus(),this.isActive=!0,this.handlePointerMove(e))});z(this,"handlePointerUp",()=>{this.opts.disabled.current||(this.isActive&&this.opts.onValueCommit.current(Zt(()=>this.opts.value.current)),this.isActive=!1)});z(this,"getPositionFromValue",e=>{const s=this.opts.min.current,r=this.opts.max.current;return(e-s)/(r-s)*100});T(this,le,m(()=>{const e=this.opts.value.current;return Array.from({length:1},()=>{const s=e,r=this.getPositionFromValue(s??0),a=ks(this.direction,r);return{role:"slider","aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":s,"aria-disabled":hs(this.opts.disabled.current),"aria-orientation":us(this.opts.orientation.current),"data-value":s,tabindex:this.opts.disabled.current?-1:0,style:a,[se]:""}})}));T(this,de,m(()=>this.thumbsPropsArr.map((e,s)=>s)));T(this,ce,m(()=>{const e=this.opts.max.current,s=this.opts.min.current,r=this.opts.step.current,a=e-s;let n=Math.ceil(a/r);a%r==0&&n++;const d=this.opts.value.current;return Array.from({length:n},(u,c)=>{const h=c*(r/a)*100,l=c===0,f=c===n-1,v=l?0:f?-100:-50,b=Cs(this.direction,h,v),x=s+c*r,A=x<=d;return{"data-disabled":Ae(this.opts.disabled.current),"data-orientation":$e(this.opts.orientation.current),"data-bounded":A?"":void 0,"data-value":x,style:b,[Ms]:""}})}));T(this,ue,m(()=>this.ticksPropsArr.map((e,s)=>s)));T(this,he,m(()=>({ticks:this.ticksRenderArr,thumbs:this.thumbsRenderArr})));this.opts=e,ws(()=>fs(At(document,"pointerdown",this.handlePointerDown),At(document,"pointerup",this.handlePointerUp),At(document,"pointermove",this.handlePointerMove),At(document,"pointerleave",this.handlePointerUp))),ds([()=>this.opts.step.current,()=>this.opts.min.current,()=>this.opts.max.current,()=>this.opts.value.current],([s,r,a,n])=>{const d=c=>Et(c,r,a,s)===c,u=c=>Et(c,r,a,s);d(n)||(this.opts.value.current=u(n))})}applyPosition({clientXY:e,start:s,end:r}){const a=this.opts.min.current,n=this.opts.max.current,u=(e-s)/(r-s)*(n-a)+a;if(u<a)this.updateValue(a);else if(u>n)this.updateValue(n);else{const c=this.opts.step.current,h=Math.floor((u-a)/c),l=a+h*c+c/2,f=a+(h+1)*c+c/2,v=u>=l&&u<f?(h+1)*c+a:h*c+a;v<=n&&this.updateValue(v)}}get thumbsPropsArr(){return o(p(this,le))}get thumbsRenderArr(){return o(p(this,de))}get ticksPropsArr(){return o(p(this,ce))}get ticksRenderArr(){return o(p(this,ue))}get snippetProps(){return o(p(this,he))}}le=new WeakMap,de=new WeakMap,ce=new WeakMap,ue=new WeakMap,he=new WeakMap;var Ht,Jt,fe,ve,pe,ge,me,be;class kr extends Vs{constructor(e){super(e);z(this,"opts");z(this,"isMulti",!0);T(this,Ht,Pt(null));T(this,Jt,Pt(0));T(this,fe,e=>{const s=this.getAllThumbs();if(!s.length)return;for(const d of s)d.blur();const r=s.map(d=>{if(this.opts.orientation.current==="horizontal"){const{left:u,right:c}=d.getBoundingClientRect();return Math.abs(e.clientX-(u+c)/2)}else{const{top:u,bottom:c}=d.getBoundingClientRect();return Math.abs(e.clientY-(u+c)/2)}}),a=s[r.indexOf(Math.min(...r))],n=s.indexOf(a);return{node:a,idx:n}});z(this,"handlePointerMove",e=>{if(!this.isActive||this.opts.disabled.current)return;e.preventDefault(),e.stopPropagation();const s=this.opts.ref.current,r=this.activeThumb;if(!s||!r)return;r.node.focus();const{left:a,right:n,top:d,bottom:u}=s.getBoundingClientRect(),c=this.direction;c==="lr"?this.applyPosition({clientXY:e.clientX,activeThumbIdx:r.idx,start:a,end:n}):c==="rl"?this.applyPosition({clientXY:e.clientX,activeThumbIdx:r.idx,start:n,end:a}):c==="bt"?this.applyPosition({clientXY:e.clientY,activeThumbIdx:r.idx,start:u,end:d}):c==="tb"&&this.applyPosition({clientXY:e.clientY,activeThumbIdx:r.idx,start:d,end:u})});z(this,"handlePointerDown",e=>{if(e.button!==0||this.opts.disabled.current)return;const s=this.opts.ref.current,r=p(this,fe).call(this,e);if(!r||!s)return;const a=e.target;!cs(a)||!s.contains(a)||(e.preventDefault(),this.activeThumb=r,r.node.focus(),this.isActive=!0,this.handlePointerMove(e))});z(this,"handlePointerUp",()=>{this.opts.disabled.current||(this.isActive&&this.opts.onValueCommit.current(Zt(()=>this.opts.value.current)),this.isActive=!1)});z(this,"getPositionFromValue",e=>{const s=this.opts.min.current,r=this.opts.max.current;return(e-s)/(r-s)*100});z(this,"getAllThumbs",()=>{const e=this.opts.ref.current;return e?Array.from(e.querySelectorAll(`[${se}]`)):[]});z(this,"updateValue",(e,s)=>{const r=this.opts.value.current;if(!r.length){this.opts.value.current.push(e);return}if(r[s]===e)return;const n=[...r];if(!lr(s,n))return;const d=n[s]>e?-1:1,u=()=>{var b;const f=s+d;n[s]=n[f],n[f]=e;const v=this.getAllThumbs();v.length&&((b=v[f])==null||b.focus(),this.activeThumb={node:v[f],idx:f})};if(this.opts.autoSort.current&&(d===-1&&e<n[s-1]||d===1&&e>n[s+1])){u(),this.opts.value.current=n;return}const c=this.opts.min.current,h=this.opts.max.current,l=this.opts.step.current;n[s]=Et(e,c,h,l),this.opts.value.current=n});T(this,ve,m(()=>{const e=this.opts.value.current;return Array.from({length:e.length||1},(s,r)=>{const a=Zt(()=>this.currentThumbIdx);a<e.length&&Zt(()=>{this.currentThumbIdx=a+1});const n=e[r],d=this.getPositionFromValue(n??0),u=ks(this.direction,d);return{role:"slider","aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":n,"aria-disabled":hs(this.opts.disabled.current),"aria-orientation":us(this.opts.orientation.current),"data-value":n,tabindex:this.opts.disabled.current?-1:0,style:u,[se]:""}})}));T(this,pe,m(()=>this.thumbsPropsArr.map((e,s)=>s)));T(this,ge,m(()=>{const e=this.opts.max.current,s=this.opts.min.current,r=this.opts.step.current,a=e-s;let n=Math.ceil(a/r);a%r==0&&n++;const d=this.opts.value.current;return Array.from({length:n},(u,c)=>{const h=c*(r/a)*100,l=c===0,f=c===n-1,v=l?0:f?-100:-50,b=Cs(this.direction,h,v),x=s+c*r,A=d.length===1?x<=d[0]:d[0]<=x&&x<=d[d.length-1];return{"data-disabled":Ae(this.opts.disabled.current),"data-orientation":$e(this.opts.orientation.current),"data-bounded":A?"":void 0,"data-value":x,style:b,[Ms]:""}})}));T(this,me,m(()=>this.ticksPropsArr.map((e,s)=>s)));T(this,be,m(()=>({ticks:this.ticksRenderArr,thumbs:this.thumbsRenderArr})));this.opts=e,ws(()=>fs(At(document,"pointerdown",this.handlePointerDown),At(document,"pointerup",this.handlePointerUp),At(document,"pointermove",this.handlePointerMove),At(document,"pointerleave",this.handlePointerUp))),ds([()=>this.opts.step.current,()=>this.opts.min.current,()=>this.opts.max.current,()=>this.opts.value.current],([s,r,a,n])=>{const d=c=>Et(c,r,a,s)===c,u=c=>Et(c,r,a,s);n.some(c=>!d(c))&&(this.opts.value.current=n.map(u))})}get activeThumb(){return o(p(this,Ht))}set activeThumb(e){W(p(this,Ht),ut(e))}get currentThumbIdx(){return o(p(this,Jt))}set currentThumbIdx(e){W(p(this,Jt),ut(e))}applyPosition({clientXY:e,activeThumbIdx:s,start:r,end:a}){const n=this.opts.min.current,d=this.opts.max.current,c=(e-r)/(a-r)*(d-n)+n;if(c<n)this.updateValue(n,s);else if(c>d)this.updateValue(d,s);else{const h=this.opts.step.current,l=Math.floor((c-n)/h),f=n+l*h+h/2,v=n+(l+1)*h+h/2,b=c>=f&&c<v?(l+1)*h+n:l*h+n;b<=d&&this.updateValue(b,s)}}get thumbsPropsArr(){return o(p(this,ve))}get thumbsRenderArr(){return o(p(this,pe))}get ticksPropsArr(){return o(p(this,ge))}get ticksRenderArr(){return o(p(this,me))}get snippetProps(){return o(p(this,be))}}Ht=new WeakMap,Jt=new WeakMap,fe=new WeakMap,ve=new WeakMap,pe=new WeakMap,ge=new WeakMap,me=new WeakMap,be=new WeakMap;const Cr=[vs,ps,gs,ms,bs,_s];var _e,xe;class Mr{constructor(t,e){z(this,"opts");z(this,"root");T(this,_e,m(()=>{const t=Array.isArray(this.root.opts.value.current)&&this.root.opts.value.current.length>1?this.root.getPositionFromValue(Math.min(...this.root.opts.value.current)??0):0,e=Array.isArray(this.root.opts.value.current)?100-this.root.getPositionFromValue(Math.max(...this.root.opts.value.current)??0):100-this.root.getPositionFromValue(this.root.opts.value.current);return{position:"absolute",...Pr(this.root.direction,t,e)}}));T(this,xe,m(()=>({id:this.opts.id.current,"data-orientation":$e(this.root.opts.orientation.current),"data-disabled":Ae(this.root.opts.disabled.current),style:this.rangeStyles,[$r]:""})));this.opts=t,this.root=e,Fe(t)}get rangeStyles(){return o(p(this,_e))}get props(){return o(p(this,xe))}}_e=new WeakMap,xe=new WeakMap;var ye,G,Q,we;class Vr{constructor(t,e){T(this,G);z(this,"opts");z(this,"root");T(this,ye,m(()=>this.root.opts.disabled.current||this.opts.disabled.current));T(this,we,m(()=>({...this.root.thumbsPropsArr[this.opts.index.current],id:this.opts.id.current,onkeydown:this.onkeydown})));this.opts=t,this.root=e,Fe(t),this.onkeydown=this.onkeydown.bind(this)}onkeydown(t){if(o(p(this,ye)))return;const e=this.opts.ref.current;if(!e)return;const s=this.root.getAllThumbs();if(!s.length)return;const r=s.indexOf(e);if(this.root.isMulti&&(this.root.currentThumbIdx=r),!Cr.includes(t.key))return;t.preventDefault();const a=this.root.opts.min.current,n=this.root.opts.max.current,d=this.root.opts.value.current,u=Array.isArray(d)?d[r]:d,c=this.root.opts.orientation.current,h=this.root.direction,l=this.root.opts.step.current;switch(t.key){case bs:E(this,G,Q).call(this,a);break;case _s:E(this,G,Q).call(this,n);break;case vs:if(c!=="horizontal")break;if(t.metaKey){const f=h==="rl"?n:a;E(this,G,Q).call(this,f)}else h==="rl"&&u<n?E(this,G,Q).call(this,u+l):h==="lr"&&u>a&&E(this,G,Q).call(this,u-l);break;case ps:if(c!=="horizontal")break;if(t.metaKey){const f=h==="rl"?a:n;E(this,G,Q).call(this,f)}else h==="rl"&&u>a?E(this,G,Q).call(this,u-l):h==="lr"&&u<n&&E(this,G,Q).call(this,u+l);break;case gs:if(t.metaKey){const f=h==="tb"?a:n;E(this,G,Q).call(this,f)}else h==="tb"&&u>a?E(this,G,Q).call(this,u-l):h!=="tb"&&u<n&&E(this,G,Q).call(this,u+l);break;case ms:if(t.metaKey){const f=h==="tb"?n:a;E(this,G,Q).call(this,f)}else h==="tb"&&u<n?E(this,G,Q).call(this,u+l):h!=="tb"&&u>a&&E(this,G,Q).call(this,u-l);break}this.root.opts.onValueCommit.current(this.root.opts.value.current)}get props(){return o(p(this,we))}}ye=new WeakMap,G=new WeakSet,Q=function(t){this.root.isMulti?this.root.updateValue(t,this.opts.index.current):this.root.updateValue(t)},we=new WeakMap;const Ye=new Hs("Slider.Root");function Dr(i){const{type:t,...e}=i,s=t==="single"?new Tr(e):new kr(e);return Ye.set(s)}function Rr(i){return new Mr(i,Ye.get())}function Ir(i){return new Vr(i,Ye.get())}var Or=k("<span><!></span>");function Nr(i,t){D(t,!0);let e=P(t,"id",19,Se),s=P(t,"ref",15,null),r=P(t,"value",15),a=P(t,"onValueChange",3,Ze),n=P(t,"onValueCommit",3,Ze),d=P(t,"disabled",3,!1),u=P(t,"min",3,0),c=P(t,"max",3,100),h=P(t,"step",3,1),l=P(t,"dir",3,"ltr"),f=P(t,"autoSort",3,!0),v=P(t,"orientation",3,"horizontal"),b=Y(t,["$$slots","$$events","$$legacy","children","child","id","ref","value","type","onValueChange","onValueCommit","disabled","min","max","step","dir","autoSort","orientation"]);r()===void 0&&r(t.type==="single"?0:[]);const x=Dr({id:B.with(()=>e()),ref:B.with(()=>s(),$=>s($)),value:B.with(()=>r(),$=>{r($),a()($)}),onValueCommit:B.with(()=>n()),disabled:B.with(()=>d()),min:B.with(()=>u()),max:B.with(()=>c()),step:B.with(()=>h()),dir:B.with(()=>l()),autoSort:B.with(()=>f()),orientation:B.with(()=>v()),type:t.type}),A=m(()=>Pe(b,x.props));var X=I(),F=S(X);{var L=$=>{var O=I(),N=S(O),M=Us(()=>({props:o(A),...x.snippetProps}));q(N,()=>t.child,()=>o(M)),g($,O)},C=$=>{var O=Or();let N;var M=y(O);q(M,()=>t.children??et,()=>x.snippetProps),_(O),K(()=>N=$t(O,N,{...o(A)})),g($,O)};gt(F,$=>{t.child?$(L):$(C,!1)})}g(i,X),R()}var zr=k("<span><!></span>");function Er(i,t){D(t,!0);let e=P(t,"ref",15,null),s=P(t,"id",19,Se),r=Y(t,["$$slots","$$events","$$legacy","children","child","ref","id"]);const a=Rr({id:B.with(()=>s()),ref:B.with(()=>e(),l=>e(l))}),n=m(()=>Pe(r,a.props));var d=I(),u=S(d);{var c=l=>{var f=I(),v=S(f);q(v,()=>t.child,()=>({props:o(n)})),g(l,f)},h=l=>{var f=zr();let v;var b=y(f);q(b,()=>t.children??et),_(f),K(()=>v=$t(f,v,{...o(n)})),g(l,f)};gt(u,l=>{t.child?l(c):l(h,!1)})}g(i,d),R()}var Lr=k("<span><!></span>");function Fr(i,t){D(t,!0);let e=P(t,"ref",15,null),s=P(t,"id",19,Se),r=P(t,"disabled",3,!1),a=Y(t,["$$slots","$$events","$$legacy","children","child","ref","id","index","disabled"]);const n=Ir({id:B.with(()=>s()),ref:B.with(()=>e(),f=>e(f)),index:B.with(()=>t.index),disabled:B.with(()=>r())}),d=m(()=>Pe(a,n.props));var u=I(),c=S(u);{var h=f=>{var v=I(),b=S(v);q(b,()=>t.child,()=>({props:o(d)})),g(f,v)},l=f=>{var v=Lr();let b;var x=y(v);q(x,()=>t.children??et),_(v),K(()=>b=$t(v,b,{...o(d)})),g(f,v)};gt(c,f=>{t.child?f(h):f(l,!1)})}g(i,u),R()}var wt,St,Z,pt,mt,te,Ee,ls,Br=(ls=class extends vr{constructor(t,e){super();T(this,mt);T(this,wt);T(this,St);T(this,Z);T(this,pt);It(this,wt,t),this.setOptions(e),this.bindMethods(),E(this,mt,te).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const e=this.options;this.options=p(this,wt).defaultMutationOptions(t),pr(this.options,e)||p(this,wt).getMutationCache().notify({type:"observerOptionsUpdated",mutation:p(this,Z),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&ss(e.mutationKey)!==ss(this.options.mutationKey)?this.reset():((s=p(this,Z))==null?void 0:s.state.status)==="pending"&&p(this,Z).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=p(this,Z))==null||t.removeObserver(this)}onMutationUpdate(t){E(this,mt,te).call(this),E(this,mt,Ee).call(this,t)}getCurrentResult(){return p(this,St)}reset(){var t;(t=p(this,Z))==null||t.removeObserver(this),It(this,Z,void 0),E(this,mt,te).call(this),E(this,mt,Ee).call(this)}mutate(t,e){var s;return It(this,pt,e),(s=p(this,Z))==null||s.removeObserver(this),It(this,Z,p(this,wt).getMutationCache().build(p(this,wt),this.options)),p(this,Z).addObserver(this),p(this,Z).execute(t)}},wt=new WeakMap,St=new WeakMap,Z=new WeakMap,pt=new WeakMap,mt=new WeakSet,te=function(){var e;const t=((e=p(this,Z))==null?void 0:e.state)??dr();It(this,St,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},Ee=function(t){Ps.batch(()=>{var e,s,r,a,n,d,u,c;if(p(this,pt)&&this.hasListeners()){const h=p(this,St).variables,l=p(this,St).context;(t==null?void 0:t.type)==="success"?((s=(e=p(this,pt)).onSuccess)==null||s.call(e,t.data,h,l),(a=(r=p(this,pt)).onSettled)==null||a.call(r,t.data,null,h,l)):(t==null?void 0:t.type)==="error"&&((d=(n=p(this,pt)).onError)==null||d.call(n,t.error,h,l),(c=(u=p(this,pt)).onSettled)==null||c.call(u,void 0,t.error,h,l))}this.listeners.forEach(h=>{h(p(this,St))})})},ls);function Kr(i,t){const e=As(),s=gr(i)?i:Qe(i),r=new Br(e,qt(s));let a;s.subscribe(u=>{a=(c,h)=>{r.mutate(c,h).catch(mr)},r.setOptions(u)});const n=Qe(r.getCurrentResult(),u=>r.subscribe(Ps.batchCalls(c=>u(c)))),{subscribe:d}=Gs(n,u=>({...u,mutate:a,mutateAsync:u.mutate}));return{subscribe:d}}var Yr=k('<div class="flex items-center space-x-2 py-1"><!> <!></div>'),Xr=k("<p>No tag, create a tag</p>"),Ur=k('<div class="mb-3 w-full space-y-2"></div>');function Gr(i,t){D(t,!0);const[e,s]=Qt(),r=()=>lt(o(d),"$tags",e),a=()=>lt(o(u),"$tagsSelected",e),n=m(()=>$s({dataset_id:t.dataset_id,kind:[t.gridType==="annotations"?"annotation":"sample"]})),d=m(()=>o(n).tags),u=m(()=>o(n).tagsSelected),c=m(()=>o(n).tagSelectionToggle);ke(i,{title:"Tags",icon:hr,children:(h,l)=>{var f=Ur();Te(f,5,r,v=>v.tag_id,(v,b)=>{var x=Yr(),A=y(x);const X=m(()=>a().has(o(b).tag_id)),F=m(()=>`${o(b).tag_id}-label`);Be(A,{get id(){return o(b).tag_id},get checked(){return o(X)},get"aria-labelledby"(){return o(F)},onCheckedChange:()=>o(c)(o(b).tag_id)});var L=w(A,2);const C=m(()=>`${o(b).tag_id}-label`);Ke(L,{get id(){return o(C)},get for(){return o(b).tag_id},get title(){return o(b).name},class:"flex-1 cursor-pointer break-all text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ",children:($,O)=>{ot();var N=Mt();K(()=>rt(N,o(b).name)),g($,N)},$$slots:{default:!0}}),_(x),g(v,x)},v=>{var b=Xr();g(v,b)}),_(f),g(h,f)}}),R(),s()}var Wr=k('<div class="h-3 w-3 rounded-sm border"></div> <p class="flex-1 truncate text-base font-normal"> </p> <span class="text-sm text-diffuse-foreground"> </span>',1),qr=k('<div class="width-full flex items-center space-x-2"><!> <!></div>'),jr=k('<div class="width-full space-y-2 overflow-hidden"></div>');function Hr(i,t){D(t,!0);const[e,s]=Qt(),r=()=>lt(a(),"$annotations",e);let a=P(t,"annotations",19,()=>[]);ke(i,{title:"Labels",children:(n,d)=>{var u=jr();Te(u,5,r,({label_name:c,current_count:h,total_count:l,selected:f})=>c,(c,h)=>{let l=()=>o(h).label_name,f=()=>o(h).current_count,v=()=>o(h).total_count,b=()=>o(h).selected;var x=qr(),A=y(x);const X=m(()=>`${l()}-label`);Be(A,{get id(){return l()},get checked(){return b()},get"aria-labelledby"(){return o(X)},onCheckedChange:()=>t.onToggleAnnotation(l())});var F=w(A,2);const L=m(()=>`${l()}-label`);Ke(F,{get id(){return o(L)},get for(){return l()},class:"flex min-w-0 flex-1 cursor-pointer items-center space-x-2 text-nowrap peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(C,$)=>{var O=Wr(),N=S(O),M=w(N,2),st=y(M,!0);_(M);var H=w(M,2),Tt=y(H);_(H),K((ht,bt,_t)=>{Js(N,ht),rt(st,l()),rt(Tt,`${bt??""} of ${_t??""}`)},[()=>`
                            border-color: ${rs(l()).color};
                            background-color: ${rs(l(),b()?1:.6).color};
                        `,()=>zt(f()),()=>zt(v())]),g(C,O)},$$slots:{default:!0}}),_(x),K(()=>xs(x,"title",l())),g(c,x)}),_(u),g(n,u)},$$slots:{default:!0}}),R(),s()}const Jr=async({dataset_id:i,tag_id:t,annotationIdsBody:e})=>{const s={data:void 0,error:void 0};try{const r=await Ft.POST("/api/datasets/{dataset_id}/tags/{tag_id}/add/annotations",{params:{path:{dataset_id:i,tag_id:t}},body:e});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No data");s.data=r.data}catch(r){s.error="Error assigning annotationIds to a tag: "+String(r)}return s};function Qr(i,t){D(t,!0);let e=P(t,"ref",15,null),s=Y(t,["$$slots","$$events","$$legacy","ref","class"]);var r=I(),a=S(r);const n=m(()=>nt("text-lg font-semibold leading-none tracking-tight",t.class));j(a,()=>cr,(d,u)=>{u(d,at({get class(){return o(n)}},()=>s,{get ref(){return e()},set ref(c){e(c)}}))}),g(i,r),R()}var Zr=k("<div><!></div>");function ta(i,t){D(t,!0);let e=P(t,"ref",15,null),s=Y(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Zr();let a;var n=y(r);q(n,()=>t.children??et),_(r),ee(r,d=>e(d),()=>e()),K(d=>a=$t(r,a,{class:d,...s}),[()=>nt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t.class)]),g(i,r),R()}var ea=k("<div><!></div>");function sa(i,t){D(t,!0);let e=P(t,"ref",15,null),s=Y(t,["$$slots","$$events","$$legacy","ref","class","children"]);var r=ea();let a;var n=y(r);q(n,()=>t.children??et),_(r),ee(r,d=>e(d),()=>e()),K(d=>a=$t(r,a,{class:d,...s}),[()=>nt("flex flex-col space-y-1.5 text-center sm:text-left",t.class)]),g(i,r),R()}function ra(i,t){D(t,!0);let e=P(t,"ref",15,null),s=Y(t,["$$slots","$$events","$$legacy","ref","class"]);var r=I(),a=S(r);const n=m(()=>nt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",t.class));j(a,()=>Qs,(d,u)=>{u(d,at({get class(){return o(n)}},()=>s,{get ref(){return e()},set ref(c){e(c)}}))}),g(i,r),R()}var aa=k('<!> <span class="sr-only">Close</span>',1),na=k("<!> <!>",1),ia=k("<!> <!>",1);function oa(i,t){D(t,!0);let e=P(t,"ref",15,null),s=Y(t,["$$slots","$$events","$$legacy","ref","class","portalProps","children"]);var r=I(),a=S(r);j(a,()=>ca,(n,d)=>{d(n,at(()=>t.portalProps,{children:(u,c)=>{var h=ia(),l=S(h);j(l,()=>ra,(b,x)=>{x(b,{})});var f=w(l,2);const v=m(()=>nt("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] bg-background fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",t.class));j(f,()=>Zs,(b,x)=>{x(b,at({get class(){return o(v)}},()=>s,{get ref(){return e()},set ref(A){e(A)},children:(A,X)=>{var F=na(),L=S(F);q(L,()=>t.children??et);var C=w(L,2);j(C,()=>tr,($,O)=>{O($,{class:"ring-offset-background focus:ring-ring absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:(N,M)=>{var st=aa(),H=S(st);er(H,{class:"size-4"}),ot(2),g(N,st)},$$slots:{default:!0}})}),g(A,F)},$$slots:{default:!0}}))}),g(u,h)},$$slots:{default:!0}}))}),g(i,r),R()}function la(i,t){D(t,!0);let e=P(t,"ref",15,null),s=Y(t,["$$slots","$$events","$$legacy","ref","class"]);var r=I(),a=S(r);const n=m(()=>nt("text-muted-foreground text-sm",t.class));j(a,()=>Sr,(d,u)=>{u(d,at({get class(){return o(n)}},()=>s,{get ref(){return e()},set ref(c){e(c)}}))}),g(i,r),R()}const da=ur,ca=sr;var ua=k("<input>"),ha=k("<input>");function fa(i,t){D(t,!0);let e=P(t,"ref",15,null),s=P(t,"value",15),r=P(t,"files",15),a=Y(t,["$$slots","$$events","$$legacy","ref","value","type","files","class"]);var n=I(),d=S(n);{var u=h=>{var l=ua();ts(l);let f;ee(l,v=>e(v),()=>e()),K(v=>f=$t(l,f,{class:v,type:"file",...a}),[()=>nt("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t.class)]),rr(l,r),es(l,s),g(h,l)},c=h=>{var l=ha();ts(l);let f;ee(l,v=>e(v),()=>e()),K(v=>f=$t(l,f,{class:v,type:t.type,...a}),[()=>nt("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t.class)]),es(l,s),g(h,l)};gt(d,h=>{t.type==="file"?h(u):h(c,!1)})}g(i,n),R()}const va=async({dataset_id:i,tagInputBody:t})=>{const e={data:void 0,error:void 0};try{const s=await Ft.POST("/api/datasets/{dataset_id}/tags",{params:{path:{dataset_id:i}},body:t});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No data");e.data=s.data}catch(s){e.error="Error creating tag: "+String(s)}return e},pa=async({dataset_id:i,tag_id:t,sampleIdsBody:e})=>{const s={data:void 0,error:void 0};try{const r=await Ft.POST("/api/datasets/{dataset_id}/tags/{tag_id}/add/samples",{params:{path:{dataset_id:i,tag_id:t}},body:e});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No data");s.data=r.data}catch(r){s.error="Error assigning sampleIds to tag: "+String(r)}return s};function ga(i,t){D(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Bt(i,at({name:"plus"},()=>e,{iconNode:[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]],children:(r,a)=>{var n=I(),d=S(n);q(d,()=>t.children??et),g(r,n)},$$slots:{default:!0}})),R()}function ma(i,t){D(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Bt(i,at({name:"eraser"},()=>e,{iconNode:[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}],["path",{d:"M22 21H7"}],["path",{d:"m5 11 9 9"}]],children:(r,a)=>{var n=I(),d=S(n);q(d,()=>t.children??et),g(r,n)},$$slots:{default:!0}})),R()}var ba=k("<!> Create new Tags",1),_a=k("<!> <!>",1),xa=k('<div class="flex space-x-2 py-1"><!> <!></div>'),ya=k('<!> <!> <div class="grid gap-4"><!></div> <div><!> <!></div> <!>',1),wa=k('<div class="flex space-x-1"><!> <!></div> <!>',1);function Sa(i,t){D(t,!0);const[e,s]=Qt(),r=()=>lt(f,"$selectedSampleIds",e),a=()=>lt(v,"$selectedAnnotationIds",e),n=()=>lt(o(l),"$tags",e),d=()=>lt(o(X),"$itemsSelected",e),u=()=>lt(bt,"$submitTagAndMutate",e);let c=m(()=>t.gridType==="samples"?"sample":"annotation");const h=m(()=>$s({dataset_id:t.datasetId,kind:[o(c)]})),l=m(()=>o(h).tags),{selectedSampleIds:f,selectedAnnotationIds:v,clearSelectedAnnotations:b,clearSelectedSamples:x}=ys(),A=m(()=>t.gridType==="samples"?x:b),X=m(()=>t.gridType==="samples"?f:v);let F=Pt(!1);const L=m(()=>r().size>0&&t.gridType==="samples"||a().size>0&&t.gridType==="annotations");let C=Pt(""),$=Pt(ut([])),O=()=>{o($).push(o(C)),M.add(o(C)),W(C,"")};const N=m(()=>[...o($).map(V=>({tag_id:V,name:V,kind:o(c)})),...n()].filter(V=>V.name.includes(o(C))));let M=ut(new ze);const st=V=>{M.has(V)?(M.delete(V),o($).splice(o($).indexOf(V),1)):M.add(V)};let H=Pt(null);const Tt=async()=>{await Promise.all([...o($)].map(async V=>{var kt;const tt=await va({dataset_id:t.datasetId,tagInputBody:{name:V,description:`${V} description`,kind:o(c)}});if(tt.error)throw tt.error;return(kt=tt.data)!=null&&kt.tag_id&&(M.delete(V),M.add(tt.data.tag_id)),tt})),await Promise.all([...M].map(async V=>{const tt=o(c)==="sample"?await pa({dataset_id:t.datasetId,tag_id:V,sampleIdsBody:{sample_ids:[...d()]}}):await Jr({dataset_id:t.datasetId,tag_id:V,annotationIdsBody:{annotation_ids:[...d()]}});if(tt.error)throw tt.error;return tt}))},ht=As(),bt=Kr({mutationFn:async()=>{await Tt()},onError:V=>{W(H,ut(V))},onSuccess:()=>{ht.invalidateQueries({queryKey:br({dataset_id:t.datasetId})}),o(A)(),_t(!1)}}),_t=V=>{W(F,ut(V)),W(H,null),W(C,""),W($,ut([])),M.clear()},Kt=m(()=>M.size>0||o($).length>0);var Yt=wa(),ft=S(Yt),Xt=y(ft);const Ce=m(()=>!o(L));Nt(Xt,{variant:"outline",get disabled(){return o(Ce)},class:"flex-1",onclick:()=>W(F,!0),children:(V,tt)=>{var kt=ba(),Xe=S(kt);ga(Xe,{}),ot(),g(V,kt)},$$slots:{default:!0}});var Me=w(Xt,2);const Ut=m(()=>!o(L));Nt(Me,{variant:"outline",get disabled(){return o(Ut)},size:"icon",title:"Clear selection",get onclick(){return o(A)},children:(V,tt)=>{ma(V,{})},$$slots:{default:!0}}),_(ft);var Rs=w(ft,2);j(Rs,()=>da,(V,tt)=>{tt(V,{onOpenChange:_t,get open(){return o(F)},children:(kt,Xe)=>{var Ue=I(),Is=S(Ue);j(Is,()=>oa,(Os,Ns)=>{Ns(Os,{class:"sm:max-w-[425px]",children:(zs,Ka)=>{var Ge=ya(),We=S(Ge);j(We,()=>sa,(U,J)=>{J(U,{children:(dt,xt)=>{var ct=_a(),Vt=S(ct);j(Vt,()=>Qr,(vt,Ct)=>{Ct(vt,{children:(Dt,Wt)=>{ot();var Rt=Mt();K(()=>rt(Rt,`Add the selected ${o(c)??""} to a tag`)),g(Dt,Rt)},$$slots:{default:!0}})});var Gt=w(Vt,2);j(Gt,()=>la,(vt,Ct)=>{Ct(vt,{children:(Dt,Wt)=>{ot();var Rt=Mt();K(()=>rt(Rt,`Add the selected ${d().size??""}
                ${o(c)??""} to an new or existing tag. Tags can later be exported.`)),g(Dt,Rt)},$$slots:{default:!0}})}),g(dt,ct)},$$slots:{default:!0}})});var qe=w(We,2);{var Es=U=>{fr(U,{title:"Error occured",children:(J,dt)=>{ot();var xt=Mt();K(()=>rt(xt,o(H))),g(J,xt)}})};gt(qe,U=>{o(H)&&U(Es)})}var Ve=w(qe,2),Ls=y(Ve);fa(Ls,{type:"text",placeholder:"Create or search tags",autofocus:!0,get value(){return o(C)},set value(U){W(C,ut(U))}}),_(Ve);var De=w(Ve,2),je=y(De);Te(je,17,()=>o(N),U=>U.tag_id,(U,J)=>{var dt=xa(),xt=y(dt);const ct=m(()=>`tagCreateDialog-tag-${o(J).tag_id}`),Vt=m(()=>M.has(o(J).tag_id)),Gt=m(()=>`tagCreateDialog-tag-${o(J).tag_id}-label`);Be(xt,{get id(){return o(ct)},get checked(){return o(Vt)},get"aria-labelledby"(){return o(Gt)},onCheckedChange:()=>st(o(J).tag_id)});var vt=w(xt,2);const Ct=m(()=>`tagCreateDialog-tag-${o(J).tag_id}-label`),Dt=m(()=>`tagCreateDialog-tag-${o(J).tag_id}`);Ke(vt,{get id(){return o(Ct)},get for(){return o(Dt)},class:"cursor-pointer text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 ",children:(Wt,Rt)=>{ot();var He=Mt();K(()=>rt(He,o(J).name)),g(Wt,He)},$$slots:{default:!0}}),_(dt),g(U,dt)});var Fs=w(je,2);{var Bs=U=>{const J=m(()=>nt("",...ar({variant:"outline"})));Nt(U,{type:"button",variant:"outline",get class(){return o(J)},onclick:O,children:(dt,xt)=>{ot();var ct=Mt();K(()=>rt(ct,`Create tag "${o(C)??""}"`)),g(dt,ct)},$$slots:{default:!0}})};gt(Fs,U=>{o(C)&&U(Bs)})}_(De);var Ks=w(De,2);j(Ks,()=>ta,(U,J)=>{J(U,{children:(dt,xt)=>{var ct=I(),Vt=S(ct);{var Gt=vt=>{Nt(vt,{type:"submit",onclick:()=>u().mutate(),children:(Ct,Dt)=>{ot();var Wt=Mt("Save changes");g(Ct,Wt)},$$slots:{default:!0}})};gt(Vt,vt=>{o(Kt)&&vt(Gt)})}g(dt,ct)},$$slots:{default:!0}})}),g(zs,Ge)},$$slots:{default:!0}})}),g(kt,Ue)},$$slots:{default:!0}})}),g(i,Yt),R(),s()}var Pa=k(`<span class="bg-secondary relative grow overflow-hidden rounded-full data-[orientation='horizontal']:h-2 data-[orientation='vertical']:h-full data-[orientation='horizontal']:w-full data-[orientation='vertical']:w-2"><!></span> <!>`,1);function Le(i,t){D(t,!0);let e=P(t,"ref",15,null),s=P(t,"value",15),r=P(t,"orientation",3,"horizontal"),a=Y(t,["$$slots","$$events","$$legacy","ref","value","orientation","class"]);var n=I(),d=S(n);const u=m(()=>nt("relative flex touch-none select-none items-center data-[orientation='vertical']:h-full data-[orientation='vertical']:min-h-44 data-[orientation='horizontal']:w-full data-[orientation='vertical']:w-auto data-[orientation='vertical']:flex-col",t.class));j(d,()=>Nr,(c,h)=>{h(c,at({get orientation(){return r()},get class(){return o(u)}},()=>a,{get ref(){return e()},set ref(f){e(f)},get value(){return s()},set value(f){s(f)},children:(f,v)=>{let b=()=>v==null?void 0:v().thumbs;var x=Pa(),A=S(x),X=y(A);j(X,()=>Er,(L,C)=>{C(L,{class:"bg-primary absolute data-[orientation='horizontal']:h-full data-[orientation='vertical']:w-full"})}),_(A);var F=w(A,2);Te(F,17,b,nr,(L,C)=>{var $=I(),O=S($);j(O,()=>Fr,(N,M)=>{M(N,{get index(){return o(C)},class:"border-primary bg-background ring-offset-background focus-visible:ring-ring block size-5 rounded-full border-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})}),g(L,$)}),K(()=>xs(A,"data-orientation",r())),g(f,x)},$$slots:{default:!0}}))}),g(i,n),R()}function Aa(i,t){D(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Bt(i,at({name:"component"},()=>e,{iconNode:[["path",{d:"M15.536 11.293a1 1 0 0 0 0 1.414l2.376 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}],["path",{d:"M2.297 11.293a1 1 0 0 0 0 1.414l2.377 2.377a1 1 0 0 0 1.414 0l2.377-2.377a1 1 0 0 0 0-1.414L6.088 8.916a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 17.912a1 1 0 0 0 0 1.415l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.415l-2.377-2.376a1 1 0 0 0-1.414 0z"}],["path",{d:"M8.916 4.674a1 1 0 0 0 0 1.414l2.377 2.376a1 1 0 0 0 1.414 0l2.377-2.376a1 1 0 0 0 0-1.414l-2.377-2.377a1 1 0 0 0-1.414 0z"}]],children:(r,a)=>{var n=I(),d=S(n);q(d,()=>t.children??et),g(r,n)},$$slots:{default:!0}})),R()}function $a(i,t){D(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Bt(i,at({name:"grid-3x3"},()=>e,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}],["path",{d:"M3 9h18"}],["path",{d:"M3 15h18"}],["path",{d:"M9 3v18"}],["path",{d:"M15 3v18"}]],children:(r,a)=>{var n=I(),d=S(n);q(d,()=>t.children??et),g(r,n)},$$slots:{default:!0}})),R()}function Ds(i,t){D(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Bt(i,at({name:"image"},()=>e,{iconNode:[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}],["circle",{cx:"9",cy:"9",r:"2"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"}]],children:(r,a)=>{var n=I(),d=S(n);q(d,()=>t.children??et),g(r,n)},$$slots:{default:!0}})),R()}function Ta(i,t){D(t,!0);let e=Y(t,["$$slots","$$events","$$legacy"]);Bt(i,at({name:"sliders-horizontal"},()=>e,{iconNode:[["line",{x1:"21",x2:"14",y1:"4",y2:"4"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22"}]],children:(r,a)=>{var n=I(),d=S(n);q(d,()=>t.children??et),g(r,n)},$$slots:{default:!0}})),R()}var ka=k('<div class="w-300 flex space-x-4 text-diffuse-foreground"><!> <!> <!></div>');function Ca(i,t){D(t,!0);const e=P(t,"min",3,100),s=P(t,"max",3,1500),r=ir.throttle(h=>{t.onChange(h[0])},100);var a=ka(),n=y(a);$a(n,{class:"h-6 w-6"});var d=w(n,2);const u=m(()=>[t.width]);Le(d,{class:"w-full flex-1",get value(){return o(u)},get min(){return e()},get max(){return s()},step:1,onValueChange:r});var c=w(d,2);Ds(c,{class:"h-6 w-6"}),_(a),g(i,a),R()}var Ma=k('<div class="space-y-4"><div class="space-y-1"><h2 class="text-md">Width Filter</h2> <div class="flex justify-between text-sm text-diffuse-foreground"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div> <div class="space-y-1"><h2 class="text-md">Height Filter</h2> <div class="flex justify-between text-sm text-diffuse-foreground"><span> </span> <span> </span></div> <div class="relative p-2"><!></div></div></div>');function Va(i,t){D(t,!0);const[e,s]=Qt(),r=()=>lt(t.dimensions,"$dimensions",e),{min_width:a,max_width:n,min_height:d,max_height:u}=r(),c=l=>{t.onChange({min_width:l[0],max_width:l[1],min_height:d,max_height:u})},h=l=>{t.onChange({min_width:a,max_width:n,min_height:l[0],max_height:l[1]})};ke(i,{title:"Metadata",children:(l,f)=>{var v=Ma(),b=y(v),x=w(y(b),2),A=y(x),X=y(A);_(A);var F=w(A,2),L=y(F);_(F),_(x);var C=w(x,2),$=y(C);Le($,{class:"filter-width",min:a,max:n,value:[a,n],onValueChange:c}),_(C),_(b);var O=w(b,2),N=w(y(O),2),M=y(N),st=y(M);_(M);var H=w(M,2),Tt=y(H);_(H),_(N);var ht=w(N,2),bt=y(ht);Le(bt,{class:"filter-height",min:d,max:u,value:[d,u],onValueChange:h}),_(ht),_(O),_(v),K((_t,Kt,Yt,ft)=>{rt(X,`${_t??""}px`),rt(L,`${Kt??""}px`),rt(st,`${Yt??""}px`),rt(Tt,`${ft??""}px`)},[()=>zt(r().min_width),()=>zt(r().max_width),()=>zt(r().min_height),()=>zt(r().max_height)]),g(l,v)},$$slots:{default:!0}}),R(),s()}var Da=k("<!> Samples",1),Ra=k("<!> Annotations",1),Ia=k('<div class="mb-5 mt-2 text-lg font-semibold">Collections</div> <!> <div class="flex space-x-2"><!> <!></div>',1);function Oa(i,t){D(t,!0);var e=Ia(),s=w(S(e),2);Ss(s,{class:"mb-4 bg-border-hard"});var r=w(s,2),a=y(r);const n=m(()=>nt("flex-1","px-2",t.gridType=="samples"&&"inline-flex rounded-md bg-muted")),d=m(()=>Ne.toSamples(t.datasetId));Nt(a,{variant:"ghost",get class(){return o(n)},get href(){return o(d)},"data-sveltekit-noscroll":!0,children:(l,f)=>{var v=Da(),b=S(v);Ds(b,{class:"size-4"}),ot(),g(l,v)},$$slots:{default:!0}});var u=w(a,2);const c=m(()=>nt("flex-1","px-2",t.gridType=="annotations"&&"inline-flex rounded-md bg-muted")),h=m(()=>Ne.toAnnotations(t.datasetId));Nt(u,{get class(){return o(c)},variant:"ghost",get href(){return o(h)},"data-sveltekit-noscroll":!0,children:(l,f)=>{var v=Ra(),b=S(v);Aa(b,{class:"size-4"}),ot(),g(l,v)},$$slots:{default:!0}}),_(r),g(i,e),R()}const ns=async({dataset_id:i,filtered_labels:t,dimensions:e})=>{const s={data:[],error:void 0};try{const r=await Ft.GET("/api/annotations/count",{params:{query:{dataset_id:i,...t&&{filtered_labels:t},...(e==null?void 0:e.min_width)&&{min_width:e.min_width},...(e==null?void 0:e.max_width)&&{max_width:e.max_width},...(e==null?void 0:e.min_height)&&{min_height:e.min_height},...(e==null?void 0:e.max_height)&&{max_height:e.max_height}}}});if(r.error)throw new Error(JSON.stringify(r.error,null,2));if(!r.data)throw new Error("No annotation counts found");s.data=r.data.map(a=>({label_name:a.label_name,total_count:a.total_count,current_count:a.current_count}))}catch(r){s.error="Error loading annotation counts: "+String(r)}return s},Na=async({dataset_id:i,annotation_labels:t})=>{const e={data:{min_width:0,max_width:0,min_height:0,max_height:0},error:void 0};try{const s=await Ft.GET("/api/samples/dimensions",{params:{query:{dataset_id:i,annotation_labels:t}}});if(s.error)throw new Error(JSON.stringify(s.error,null,2));if(!s.data)throw new Error("No dimension bounds data");e.data=s.data}catch(s){e.error="Error loading dimension bounds: "+String(s)}return e},za=async()=>{const i={data:[],error:void 0};try{const t=await Ft.GET("/api/annotation_labels");t.data&&(i.data=t.data)}catch(t){i.error="Error loading annotation labels: "+String(t)}return i};function Ea(){const i=Ot({width:200,height:200});return{sampleSize:i,updateWidth:e=>{i.set({width:e,height:e})}}}const is=(i,t)=>i.map(e=>({...e,selected:t.includes(e.label_name)})),os=i=>t=>t.includes(i)?t.filter(e=>e!==i):[...t,i],La=async({params:{dataset_id:i}})=>{const t=Ot({min_width:0,max_width:0,min_height:0,max_height:0}),e=Ot([]),s=Ot([]),r=Ot([]),a=Ot(void 0),[n,d]=await Promise.all([za().then(l=>l.data.reduce((f,v)=>({...f,[v.annotation_label_name]:v.annotation_label_id}),{})),Na({dataset_id:i}).then(({data:l})=>l),ns({dataset_id:i}).then(({data:l})=>{l&&r.set(is(l,qt(e)))})]);t.set(d);const u=async()=>{try{const l=qt(e),f=await ns({dataset_id:i,filtered_labels:l.length>0?l:void 0,dimensions:qt(t)});r.update(()=>is(f.data||[],l))}catch(l){a.set(`Failed to load annotations: ${String(l)}`)}},c=l=>{l&&(t.set(l),u())};return{datasetId:i,annotations:r,toggleAnnotationSelection:l=>{e.update(os(l)),s.update(os(n[l])),u()},annotationLabels:n,selectedAnnotations:e,selectedAnnotationsIds:s,dimensions:Ws(t),updateDimensions:c,error:qt(a),sampleSize:Ea()}},sn=Object.freeze(Object.defineProperty({__proto__:null,load:La},Symbol.toStringTag,{value:"Module"}));var Fa=k('<div class="space-y-2"><!> <!></div>'),Ba=k('<div class="flex h-full w-full space-x-4 px-4 pb-4"><div class="flex w-80 flex-col space-y-6 rounded-[1vw] bg-card py-4"><div class="px-4"><!></div> <div class="min-h-0 flex-1 space-y-2 overflow-y-auto px-4 dark:[color-scheme:dark]"><div><!> <!></div> <!></div></div> <div class="flex1 flex flex-grow flex-col space-y-4 rounded-[1vw] bg-card p-4"><div class="my-2 flex items-center space-x-4"><div class="flex-1"></div> <div class="w-4/12"><!></div></div> <!> <div class="flex min-h-0 flex-1"><!></div></div></div>');function rn(i,t){D(t,!0);const[e,s]=Qt(),r=()=>lt(_r,"$page",e),a=()=>lt(b,"$bonndedSampleSize",e);let n=r().params.dataset_id;const{dimensions:d,updateDimensions:u,annotations:c,toggleAnnotationSelection:h,sampleSize:l}=t.data,{setLastGridType:f}=ys();let v=Pt("samples");qs(()=>{W(v,ut(r().url.pathname===Ne.toAnnotations(n)?"annotations":"samples")),f(o(v))});const b=l.sampleSize;var x=Ba(),A=y(x),X=y(A),F=y(X);Oa(F,{datasetId:n,get gridType(){return o(v)}}),_(X);var L=w(X,2),C=y(L),$=y(C);Gr($,{dataset_id:n,get gridType(){return o(v)}});var O=w($,2);Sa(O,{datasetId:n,get gridType(){return o(v)}}),_(C);var N=w(C,2);ke(N,{title:"Filters",icon:Ta,children:(Kt,Yt)=>{var ft=Fa(),Xt=y(ft);Hr(Xt,{annotations:c,onToggleAnnotation:h});var Ce=w(Xt,2);{var Me=Ut=>{Va(Ut,{dimensions:d,onChange:u})};gt(Ce,Ut=>{d&&Ut(Me)})}_(ft),g(Kt,ft)}}),_(L),_(A);var M=w(A,2),st=y(M),H=w(y(st),2),Tt=y(H);Ca(Tt,{get width(){return a().width},get onChange(){return l.updateWidth}}),_(H),_(st);var ht=w(st,2);Ss(ht,{class:"mb-4 bg-border-hard"});var bt=w(ht,2),_t=y(bt);or(_t,t,"default",{},null),_(bt),_(M),_(x),g(i,x),R(),s()}export{rn as component,sn as universal};
